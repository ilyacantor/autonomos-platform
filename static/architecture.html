<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutonomOS Architecture - Interactive Documentation</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-dark: #0d1117;
            --bg-lighter: #161b22;
            --bg-header: #1c2128;
            --border-color: #30363d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent-green: #3fb950;
            --accent-blue: #58a6ff;
            --accent-purple: #bc8cff;
            --code-bg: #161b22;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .header {
            background: var(--bg-header);
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--accent-blue);
        }

        .header .subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.25rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .nav {
            background: var(--bg-lighter);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .nav h2 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--accent-green);
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.75rem;
        }

        .nav-link {
            display: block;
            padding: 0.75rem 1rem;
            background: var(--bg-dark);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--accent-blue);
            text-decoration: none;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background: var(--bg-header);
            border-color: var(--accent-blue);
            transform: translateX(4px);
        }

        .section {
            background: var(--bg-lighter);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .section h2 {
            font-size: 1.75rem;
            color: var(--accent-green);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .section h3 {
            font-size: 1.35rem;
            color: var(--accent-blue);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        .section h4 {
            font-size: 1.1rem;
            color: var(--accent-purple);
            margin-top: 1rem;
            margin-bottom: 0.75rem;
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .status-operational {
            background: rgba(63, 185, 80, 0.2);
            color: var(--accent-green);
            border: 1px solid var(--accent-green);
        }

        .status-complete {
            background: rgba(88, 166, 255, 0.2);
            color: var(--accent-blue);
            border: 1px solid var(--accent-blue);
        }

        ul, ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .checkmark {
            color: var(--accent-green);
            font-weight: bold;
        }

        code {
            background: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--accent-purple);
        }

        pre {
            background: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        pre code {
            background: none;
            padding: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: var(--bg-dark);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
        }

        thead {
            background: var(--bg-header);
        }

        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            font-weight: 600;
            color: var(--accent-blue);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tbody tr:hover {
            background: var(--bg-lighter);
        }

        .raci-a {
            color: var(--accent-green);
            font-weight: bold;
        }

        .raci-r {
            color: var(--accent-blue);
        }

        .raci-c {
            color: var(--text-secondary);
        }

        .highlight-box {
            background: rgba(88, 166, 255, 0.1);
            border-left: 4px solid var(--accent-blue);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .warning-box {
            background: rgba(255, 193, 7, 0.1);
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }

        .mermaid {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            margin: 1.5rem 0;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .metric-card {
            background: var(--bg-dark);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 1rem;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-green);
            margin-bottom: 0.25rem;
        }

        .metric-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .section {
                padding: 1rem;
            }

            .nav-grid {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üèóÔ∏è AutonomOS Architecture</h1>
        <div class="subtitle">Multi-Tenant AI Orchestration Platform - Interactive Documentation</div>
    </div>

    <div class="container">
        <!-- Navigation -->
        <div class="nav">
            <h2>üìë Quick Navigation</h2>
            <div class="nav-grid">
                <a href="#overview" class="nav-link">üìä System Overview</a>
                <a href="#raci" class="nav-link">üìã RACI Matrix</a>
                <a href="#aam" class="nav-link">üîÑ AAM Architecture</a>
                <a href="#dcl" class="nav-link">üß† DCL Architecture</a>
                <a href="#dataflow" class="nav-link">üåä Data Flow</a>
                <a href="#telemetry" class="nav-link">üì° Live Telemetry</a>
                <a href="#performance" class="nav-link">‚ö° Performance Metrics</a>
                <a href="#tech-stack" class="nav-link">üõ†Ô∏è Technology Stack</a>
            </div>
        </div>

        <!-- System Overview -->
        <section id="overview" class="section">
            <h2>üìä System Overview</h2>
            <span class="status-badge status-operational">Production Ready</span>
            
            <div class="highlight-box">
                <strong>Status:</strong> Phase 1 Foundation Complete + Enterprise Infrastructure Operational<br>
                <strong>Validation:</strong> 25+ architect reviews, 178 tests (93.4% pass rate), zero startup errors<br>
                <strong>Last Updated:</strong> November 19, 2025
            </div>

            <h3>What's Actually Built and Operational</h3>
            
            <h4><span class="checkmark">‚úÖ</span> AAM (Adaptive API Mesh)</h4>
            <ul>
                <li><strong>Production Connectors:</strong> 4 operational (Salesforce, MongoDB, FileSource, Supabase)</li>
                <li><strong>Canonical Event Processing:</strong> Pydantic models with 147 events validated</li>
                <li><strong>Schema Drift Detection:</strong> Fingerprinting with Redis-backed caching</li>
                <li><strong>Auto-Repair System:</strong> LLM-powered with RAG intelligence, Safe Mode operational</li>
                <li><strong>Database:</strong> PostgreSQL (Supabase) with 10 migrations, HEAD verified</li>
            </ul>

            <h4><span class="checkmark">‚úÖ</span> DCL (Data Connection Layer)</h4>
            <ul>
                <li><strong>Graph State Management:</strong> Redis-backed with WebSocket real-time updates</li>
                <li><strong>Multi-Tenant Architecture:</strong> Distributed locking, tenant-scoped state</li>
                <li><strong>Performance:</strong> 3x-7x improvement (62s ‚Üí 9s for 9-source parallel processing)</li>
                <li><strong>Database:</strong> DuckDB for materialized views, PostgreSQL for persistence</li>
            </ul>

            <h4><span class="checkmark">‚úÖ</span> Live Flow Telemetry System (Phase 4)</h4>
            <ul>
                <li><strong>Real-Time Dashboard:</strong> React component at <code>/flow-monitor</code> with dark mode UI</li>
                <li><strong>Redis Streams Infrastructure:</strong> Three separate streams (aam:flow, dcl:flow, agent:flow)</li>
                <li><strong>WebSocket Live Streaming:</strong> &lt;1s latency with XREAD BLOCK polling</li>
                <li><strong>RACI Compliance:</strong> Each layer publishes only its own events, telemetry failures isolated</li>
                <li><strong>Testing:</strong> 10/10 telemetry tests passing, architect-approved for production</li>
            </ul>

            <pre><code>AAM Layer ‚Üí FlowEventPublisher ‚Üí aam:flow stream
DCL Layer ‚Üí FlowEventPublisher ‚Üí dcl:flow stream     ‚Üí FlowMonitor API ‚Üí React Dashboard
Agent Layer ‚Üí FlowEventPublisher ‚Üí agent:flow stream   ‚Üì WebSocket /ws/flow-monitor</code></pre>
        </section>

        <!-- RACI Matrix -->
        <section id="raci" class="section">
            <h2>üìã RACI Matrix - Component Responsibilities</h2>
            
            <div class="highlight-box">
                <strong>Critical Finding:</strong> Clear separation of responsibilities between AAM (Adaptive API Mesh) and DCL (Data Connection Layer) is essential for architectural integrity.
            </div>

            <h3>Component Responsibility Matrix</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Capability</th>
                        <th>AOD</th>
                        <th>AAM</th>
                        <th>DCL</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="5" style="background: var(--bg-header); font-weight: bold;">Discovery & Cataloging</td>
                    </tr>
                    <tr>
                        <td>Asset discovery (find data sources)</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td><span class="raci-c">C</span></td>
                        <td>I</td>
                        <td>AOD owns discovery</td>
                    </tr>
                    <tr>
                        <td>Schema introspection</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td><span class="raci-c">C</span></td>
                        <td>AAM owns runtime schema scanning</td>
                    </tr>
                    <tr>
                        <td>Source catalog management</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>I</td>
                        <td><span class="raci-c">C</span></td>
                        <td>AOD owns catalog</td>
                    </tr>
                    <tr>
                        <td colspan="5" style="background: var(--bg-header); font-weight: bold;">Connection Runtime</td>
                    </tr>
                    <tr>
                        <td>API authentication/OAuth</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>I</td>
                        <td>AAM owns credential management</td>
                    </tr>
                    <tr>
                        <td>Data fetching/sync</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>I</td>
                        <td>AAM owns data retrieval</td>
                    </tr>
                    <tr>
                        <td>Pagination handling</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>I</td>
                        <td>AAM owns API pagination</td>
                    </tr>
                    <tr>
                        <td>Rate limiting/throttling</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>I</td>
                        <td>AAM owns API limits</td>
                    </tr>
                    <tr>
                        <td>Connection health monitoring</td>
                        <td><span class="raci-c">C</span></td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>I</td>
                        <td>AAM owns monitoring</td>
                    </tr>
                    <tr>
                        <td colspan="5" style="background: var(--bg-header); font-weight: bold;">Intelligence & Mapping</td>
                    </tr>
                    <tr>
                        <td>LLM-powered mapping proposals</td>
                        <td>-</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns LLM decisions</td>
                    </tr>
                    <tr>
                        <td>RAG mapping lookup</td>
                        <td>-</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns RAG system</td>
                    </tr>
                    <tr>
                        <td>Mapping registry storage</td>
                        <td>-</td>
                        <td><span class="raci-c">C</span></td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns registry database</td>
                    </tr>
                    <tr>
                        <td>Mapping approval workflow</td>
                        <td>-</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns approvals</td>
                    </tr>
                    <tr>
                        <td>Confidence scoring</td>
                        <td>-</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns scoring logic</td>
                    </tr>
                    <tr>
                        <td colspan="5" style="background: var(--bg-header); font-weight: bold;">Transformation</td>
                    </tr>
                    <tr>
                        <td>Canonical transformation</td>
                        <td>-</td>
                        <td><span class="raci-r">R</span></td>
                        <td><span class="raci-a">A</span></td>
                        <td>DCL decides, AAM executes</td>
                    </tr>
                    <tr>
                        <td>Schema drift detection</td>
                        <td>-</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td><span class="raci-c">C</span></td>
                        <td>AAM detects and owns</td>
                    </tr>
                    <tr>
                        <td>Drift repair proposals</td>
                        <td>-</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns repair logic</td>
                    </tr>
                    <tr>
                        <td colspan="5" style="background: var(--bg-header); font-weight: bold;">Graph & Ontology</td>
                    </tr>
                    <tr>
                        <td>Ontology management</td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL fully owns</td>
                    </tr>
                    <tr>
                        <td>Graph generation</td>
                        <td>-</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns graph building</td>
                    </tr>
                    <tr>
                        <td>Entity resolution</td>
                        <td>-</td>
                        <td>I</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns resolution</td>
                    </tr>
                    <tr>
                        <td colspan="5" style="background: var(--bg-header); font-weight: bold;">Agent Orchestration</td>
                    </tr>
                    <tr>
                        <td>Agent execution</td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns execution</td>
                    </tr>
                    <tr>
                        <td>Agent context management</td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns context</td>
                    </tr>
                    <tr>
                        <td>Multi-agent coordination</td>
                        <td>-</td>
                        <td>-</td>
                        <td><span class="raci-a">A/R</span></td>
                        <td>DCL owns coordination</td>
                    </tr>
                </tbody>
            </table>

            <h3>RACI Legend</h3>
            <ul>
                <li><span class="raci-a">A</span> = <strong>Accountable</strong> (single owner, ultimately answerable)</li>
                <li><span class="raci-r">R</span> = <strong>Responsible</strong> (does the work, can be multiple)</li>
                <li><span class="raci-c">C</span> = <strong>Consulted</strong> (provides input, two-way communication)</li>
                <li>I = <strong>Informed</strong> (kept updated, one-way communication)</li>
            </ul>

            <div class="warning-box">
                <strong>Key Rule:</strong> Each capability has exactly ONE Accountable owner (marked as A or A/R when same component is both)
            </div>
        </section>

        <!-- AAM Architecture -->
        <section id="aam" class="section">
            <h2>üîÑ AAM (Adaptive API Mesh) Architecture</h2>
            <span class="status-badge status-operational">Production Ready</span>

            <h3>Core Responsibilities</h3>
            <ul>
                <li><strong>Connection Runtime:</strong> API authentication, OAuth flows, credential management</li>
                <li><strong>Data Transport:</strong> Fetching, syncing, pagination handling across external APIs</li>
                <li><strong>Schema Monitoring:</strong> Drift detection via SHA-256 fingerprinting</li>
                <li><strong>Canonical Normalization:</strong> Event transformation (execution, not decision-making)</li>
                <li><strong>Health Monitoring:</strong> Connection status, rate limiting, throttling</li>
            </ul>

            <h3>Data Flow Pipeline</h3>
            <pre><code>Data Sources (Salesforce, MongoDB, FileSource, Supabase)
    ‚Üì
AAM Connectors (production credentials from Replit Secrets)
    ‚Üì
Canonical Event Normalization (Pydantic validation)
    ‚Üì
Schema Drift Detection (fingerprinting + Redis)
    ‚Üì
LLM/RAG Auto-Repair (with confidence scoring)
    ‚Üì
Redis Streams ‚Üí DCL Integration
    ‚Üì
Canonical Event Storage (PostgreSQL)</code></pre>

            <h3>Production Connectors</h3>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">Salesforce</div>
                    <div class="metric-label">OAuth2 CRM Connector</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">MongoDB</div>
                    <div class="metric-label">NoSQL Document DB</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">FileSource</div>
                    <div class="metric-label">CSV/Excel Ingestion</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">Supabase</div>
                    <div class="metric-label">PostgreSQL Cloud</div>
                </div>
            </div>

            <h3>Key Capabilities</h3>
            <ul>
                <li><span class="checkmark">‚úÖ</span> <strong>147 canonical events</strong> validated (105 opportunities, 15 accounts, 12 contacts, 10 aws_resources, 5 cost_reports)</li>
                <li><span class="checkmark">‚úÖ</span> <strong>Zero validation errors</strong> across all event types</li>
                <li><span class="checkmark">‚úÖ</span> <strong>&lt;10s processing time</strong> in dev mode (no-RAG fast path)</li>
                <li><span class="checkmark">‚úÖ</span> <strong>Multi-tenant isolation</strong> via tenant_id scoping</li>
            </ul>
        </section>

        <!-- DCL Architecture -->
        <section id="dcl" class="section">
            <h2>üß† DCL (Data Connection Layer) Architecture</h2>
            <span class="status-badge status-operational">Production Ready</span>

            <h3>Core Responsibilities</h3>
            <ul>
                <li><strong>Intelligence Layer:</strong> LLM-powered mapping proposals, RAG lookup, confidence scoring</li>
                <li><strong>Transformation Decisions:</strong> Determines canonical mappings (AAM executes them)</li>
                <li><strong>Graph Generation:</strong> Entity resolution, ontology management, graph building</li>
                <li><strong>Drift Repair Logic:</strong> Auto-repair proposals and approval workflows</li>
                <li><strong>Agent Orchestration:</strong> Execution, context management, multi-agent coordination</li>
            </ul>

            <h3>Data Flow Pipeline</h3>
            <pre><code>User Request (via API/WebSocket)
    ‚Üì
JWT Authentication (suspended in dev mode via DCL_AUTH_ENABLED=false)
    ‚Üì
Tenant Isolation (distributed Redis locks)
    ‚Üì
Source Connection (parallel async processing)
    ‚Üì
AI Entity Mapping (LLM-powered with RAG)
    ‚Üì
Graph Generation (nodes + edges)
    ‚Üì
Redis State Cache + WebSocket Broadcast
    ‚Üì
Live Sankey Visualization (React frontend)</code></pre>

            <h3>Performance Improvements</h3>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">3x-7x</div>
                    <div class="metric-label">Speed Improvement</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">9s</div>
                    <div class="metric-label">9-source processing (down from 62s)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">&lt;100ms</div>
                    <div class="metric-label">WebSocket Latency</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">19-33</div>
                    <div class="metric-label">Graph Nodes</div>
                </div>
            </div>

            <h3>Key Features</h3>
            <ul>
                <li><span class="checkmark">‚úÖ</span> <strong>Parallel source processing</strong> with async distributed locks</li>
                <li><span class="checkmark">‚úÖ</span> <strong>Dynamic WebSocket URLs</strong> (eliminated hardcoded localhost)</li>
                <li><span class="checkmark">‚úÖ</span> <strong>Consolidated graph structure</strong> (single "from AAM" parent node)</li>
                <li><span class="checkmark">‚úÖ</span> <strong>Feature flags</strong> (Redis-backed, multi-worker, pub/sub broadcasting)</li>
                <li><span class="checkmark">‚úÖ</span> <strong>DuckDB + PostgreSQL</strong> hybrid storage architecture</li>
            </ul>
        </section>

        <!-- Data Flow -->
        <section id="dataflow" class="section">
            <h2>üåä System Data Flow</h2>

            <div class="mermaid">
graph TB
    subgraph "Discovery Layer"
        U[User] -->|Requests Discovery| AOD[AOD Service]
        AOD -->|Catalog Sources| PC[(Provider Catalog)]
    end
    
    subgraph "Connection Layer"
        AOD -->|Notify Available| AAM[AAM Workers]
        AAM -->|Get Credentials| IM[Integration Manager]
        IM -->|Encrypted Secrets| V[(Vault/DB)]
        AAM -->|Fetch Data| EXT[External APIs]
    end
    
    subgraph "Intelligence Layer"
        AAM -->|Request Mapping| DCL[DCL Engine]
        DCL -->|RAG Lookup| PIN[(Pinecone)]
        DCL -->|LLM Fallback| LLM[LLM Service]
        DCL -->|Store Mappings| PG[(PostgreSQL)]
    end
    
    subgraph "Processing Layer"
        AAM -->|Raw Data| RDS[(Redis Queue)]
        RDS -->|Batch Process| DUCK[(DuckDB)]
        DUCK -->|Transform| AAM
        AAM -->|Canonical Events| PG
    end
    
    subgraph "Orchestration Layer"
        DCL -->|Execute| AGT[Agents]
        AGT -->|Read Context| PG
        AGT -->|Write Results| PG
        AGT -->|Notifications| U
    end
            </div>

            <h3>Data Sources ‚Üí AAM ‚Üí DCL ‚Üí Agents Pipeline</h3>
            <p>The platform follows the "Strangler Fig" pattern with feature flags for zero-downtime migrations:</p>
            <ol>
                <li><strong>External Sources</strong> - Salesforce, MongoDB, FileSource, Supabase provide raw data</li>
                <li><strong>AAM Layer</strong> - Handles connection runtime, fetching, normalization execution</li>
                <li><strong>DCL Layer</strong> - Makes intelligence decisions, mapping proposals, graph generation</li>
                <li><strong>Agent Layer</strong> - Executes orchestrated actions based on unified data views</li>
            </ol>
        </section>

        <!-- Live Telemetry -->
        <section id="telemetry" class="section">
            <h2>üì° Live Flow Telemetry System (Phase 4)</h2>
            <span class="status-badge status-complete">100% Complete</span>

            <h3>Architecture</h3>
            <div class="mermaid">
graph LR
    AAM[AAM Layer] -->|publish| AS[aam:flow stream]
    DCL[DCL Layer] -->|publish| DS[dcl:flow stream]
    AGT[Agent Layer] -->|publish| GS[agent:flow stream]
    
    AS --> API[Flow Monitor API]
    DS --> API
    GS --> API
    
    API -->|REST| SNAP[Snapshot Endpoint]
    API -->|WebSocket| WS[Live Stream]
    
    WS --> UI[React Dashboard]
    SNAP --> UI
            </div>

            <h3>Key Features</h3>
            <ul>
                <li><strong>Real-Time Dashboard:</strong> React component at <code>/flow-monitor</code></li>
                <li><strong>Three Redis Streams:</strong> Separate streams for AAM, DCL, and Agent layers</li>
                <li><strong>WebSocket Streaming:</strong> &lt;1s latency with automatic reconnection</li>
                <li><strong>RACI Compliance:</strong> Each layer publishes only its own events</li>
                <li><strong>Graceful Degradation:</strong> Telemetry failures never break business logic</li>
            </ul>

            <h3>API Endpoints</h3>
            <table>
                <thead>
                    <tr>
                        <th>Endpoint</th>
                        <th>Method</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>/api/v1/flow-monitor</code></td>
                        <td>GET</td>
                        <td>Snapshot API (XREVRANGE returns newest events)</td>
                    </tr>
                    <tr>
                        <td><code>/api/v1/ws/flow-monitor</code></td>
                        <td>WebSocket</td>
                        <td>Live streaming with automatic reconnection</td>
                    </tr>
                    <tr>
                        <td><code>/api/v1/flow-monitor/demo</code></td>
                        <td>POST</td>
                        <td>Demo event generator for integration testing</td>
                    </tr>
                </tbody>
            </table>

            <h3>UI Features</h3>
            <ul>
                <li>Three-column layout (Green/Blue/Purple palette matching branding)</li>
                <li>Click-through event details with full metadata inspection</li>
                <li>Tenant-scoped event filtering</li>
                <li>Dark mode optimized design</li>
            </ul>
        </section>

        <!-- Performance Metrics -->
        <section id="performance" class="section">
            <h2>‚ö° Validated Performance Metrics</h2>

            <h3>AAM Performance</h3>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">147</div>
                    <div class="metric-label">Canonical Events Validated</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">0</div>
                    <div class="metric-label">Validation Errors</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">&lt;10s</div>
                    <div class="metric-label">Processing Speed (dev mode)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">4</div>
                    <div class="metric-label">Production Connectors</div>
                </div>
            </div>

            <h3>DCL Performance</h3>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">9s</div>
                    <div class="metric-label">9-source parallel processing</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">19-33</div>
                    <div class="metric-label">Graph Nodes</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">&lt;100ms</div>
                    <div class="metric-label">WebSocket Latency</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">Redis</div>
                    <div class="metric-label">State Persistence</div>
                </div>
            </div>

            <h3>Distributed Job Processing Benchmarks</h3>
            <table>
                <thead>
                    <tr>
                        <th>Workload</th>
                        <th>Jobs</th>
                        <th>Connectors</th>
                        <th>Fields</th>
                        <th>Throughput</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Test</td>
                        <td>2</td>
                        <td>2</td>
                        <td>10</td>
                        <td>40 fields/sec</td>
                    </tr>
                    <tr>
                        <td>Small</td>
                        <td>5</td>
                        <td>5</td>
                        <td>15</td>
                        <td>375 fields/sec</td>
                    </tr>
                    <tr>
                        <td>Medium</td>
                        <td>10</td>
                        <td>10</td>
                        <td>20</td>
                        <td>2,000 fields/sec</td>
                    </tr>
                    <tr>
                        <td>Large</td>
                        <td>20</td>
                        <td>15</td>
                        <td>25</td>
                        <td>7,500 fields/sec</td>
                    </tr>
                </tbody>
            </table>

            <h3>Multi-Tenant Isolation</h3>
            <ul>
                <li><span class="checkmark">‚úÖ</span> <strong>Linear scaling</strong> up to 10 tenants validated</li>
                <li><span class="checkmark">‚úÖ</span> <strong>Zero cross-tenant data leakage</strong> confirmed in testing</li>
                <li><span class="checkmark">‚úÖ</span> <strong>Round-robin scheduling</strong> ensures resource fairness</li>
                <li><span class="checkmark">‚úÖ</span> <strong>Chaos resilience</strong> - system recovers from worker crashes, Redis failures</li>
            </ul>
        </section>

        <!-- Technology Stack -->
        <section id="tech-stack" class="section">
            <h2>üõ†Ô∏è Technology Stack</h2>

            <h3>Frontend</h3>
            <ul>
                <li><strong>React 18</strong> - Modern UI library with hooks</li>
                <li><strong>TypeScript</strong> - Type-safe JavaScript</li>
                <li><strong>Vite</strong> - Fast build system and dev server</li>
                <li><strong>D3.js</strong> - Sankey diagrams for data flow visualization</li>
                <li><strong>WebSocket</strong> - Real-time updates for live telemetry</li>
            </ul>

            <h3>Backend</h3>
            <ul>
                <li><strong>Python 3.11+</strong> - Primary backend language</li>
                <li><strong>FastAPI</strong> - High-performance async web framework</li>
                <li><strong>SQLAlchemy 2.0</strong> - Async ORM for database operations</li>
                <li><strong>Alembic</strong> - Database migration tool</li>
                <li><strong>Pydantic</strong> - Data validation and settings management</li>
                <li><strong>Python RQ</strong> - Redis-based task queue</li>
            </ul>

            <h3>Databases & Storage</h3>
            <ul>
                <li><strong>PostgreSQL (Supabase)</strong> - Primary database with PgBouncer compatibility</li>
                <li><strong>DuckDB</strong> - Embedded analytics for DCL materialized views</li>
                <li><strong>Redis (Upstash)</strong> - Queue, caching, state management, streams</li>
                <li><strong>Pinecone</strong> - Vector database for RAG embeddings</li>
            </ul>

            <h3>AI/ML</h3>
            <ul>
                <li><strong>Google Gemini API</strong> - LLM for mapping proposals</li>
                <li><strong>OpenAI API</strong> - Alternative LLM provider</li>
                <li><strong>sentence-transformers</strong> - multilingual-e5-large for embeddings</li>
                <li><strong>RAG Intelligence</strong> - Hybrid retrieval for mapping lookups</li>
            </ul>

            <h3>Infrastructure</h3>
            <ul>
                <li><strong>Uvicorn</strong> - ASGI server for FastAPI</li>
                <li><strong>Redis TLS/SSL</strong> - Encrypted connections with certificate validation</li>
                <li><strong>JWT Authentication</strong> - Argon2 password hashing</li>
                <li><strong>Feature Flags</strong> - Redis-backed with pub/sub broadcasting</li>
            </ul>

            <h3>Testing & Validation</h3>
            <ul>
                <li><strong>178 Tests</strong> - 93.4% pass rate</li>
                <li><strong>25+ Architect Reviews</strong> - Production readiness validation</li>
                <li><strong>Benchmarking Suite</strong> - 4 workload profiles (test/small/medium/large)</li>
                <li><strong>Stress Testing</strong> - 20 comprehensive multi-tenant tests</li>
            </ul>
        </section>

        <!-- Footer -->
        <div class="section" style="text-align: center; color: var(--text-secondary);">
            <p>AutonomOS - Multi-Tenant AI Orchestration Platform</p>
            <p style="font-size: 0.85rem; margin-top: 0.5rem;">Last Updated: November 19, 2025 | Version 3.0 Production State</p>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
