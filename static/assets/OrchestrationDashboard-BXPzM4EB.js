import{r as h,j as e,o as O,e as y,A as w,B as J,p as _,l as b,q,Z as N,s as W,t as $,H as K,u as X,g as Q,v as Z,w as ee,x as se,y as te,c as ae,f as C,G as L,P as re,k as v,z as U,F as le,J as ne,K as ie,W as ce,T as P,O as oe,Q as de,V as B,Y as xe}from"./ui-vendor-BH17eeQC.js";import"./react-vendor-D3F3s8fL.js";const A="/api/v1/orchestration";async function me(){const s=await fetch(`${A}/vitals`);if(!s.ok)throw new Error(`Failed to fetch vitals: ${s.statusText}`);return s.json()}async function ge(){const s=await fetch(`${A}/functions`);if(!s.ok)throw new Error(`Failed to fetch functions: ${s.statusText}`);return s.json()}async function he(s=20){const t=await fetch(`${A}/agents/performance?limit=${s}`);if(!t.ok)throw new Error(`Failed to fetch agent performance: ${t.statusText}`);return t.json()}async function ue(){const s=await fetch(`${A}/autonomy-mode`);if(!s.ok)throw new Error(`Failed to fetch autonomy mode: ${s.statusText}`);return s.json()}async function pe(s){const t=await fetch(`${A}/autonomy-mode`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:s})});if(!t.ok)throw new Error(`Failed to update autonomy mode: ${t.statusText}`);return t.json()}async function je(){const s=await fetch(`${A}/seed-demo-agents`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`Failed to seed agents: ${s.statusText}`);return s.json()}const fe=1e4;function be(){const[s,t]=h.useState(null),[a,r]=h.useState(!0),[l,n]=h.useState(null),[g,x]=h.useState(null),c=h.useCallback(async()=>{try{const d=await me();t(d),n(null),x(new Date)}catch(d){n(d.message)}finally{r(!1)}},[]);h.useEffect(()=>{c();const d=setInterval(c,fe);return()=>clearInterval(d)},[c]);const o=d=>{switch(d){case"Active":return"bg-green-500/20 text-green-400 border-green-500/30";case"Planning":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"Executing":return"bg-cyan-500/20 text-cyan-400 border-cyan-500/30";case"Learning":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"Idle":return"bg-gray-500/20 text-gray-400 border-gray-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},u=(d,m)=>{switch(d){case"uptime":return m>=99?"text-green-400":m>=95?"text-yellow-400":"text-red-400";case"failed":return m<=5?"text-green-400":m<=15?"text-yellow-400":"text-red-400";case"anomalies":return m<=10?"text-green-400":m<=25?"text-yellow-400":"text-red-400";case"overrides":return m<=5?"text-green-400":m<=15?"text-yellow-400":"text-red-400";case"load":return m<=60?"text-green-400":m<=80?"text-yellow-400":"text-red-400";default:return"text-cyan-400"}};return a&&!s?e.jsxs("div",{className:"rounded-2xl shadow-md p-6 bg-slate-800/60 border border-slate-700 h-full flex items-center justify-center",children:[e.jsx(O,{className:"w-6 h-6 text-cyan-400 animate-spin"}),e.jsx("span",{className:"ml-3 text-slate-400",children:"Loading vitals..."})]}):l&&!s?e.jsxs("div",{className:"rounded-2xl shadow-md p-6 bg-slate-800/60 border border-red-500/30 h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[e.jsx(y,{className:"w-6 h-6"}),e.jsxs("span",{children:["Failed to load vitals: ",l]})]}),e.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-200 text-sm",children:"Retry"})]}):s?e.jsxs("div",{className:"rounded-2xl shadow-md p-6 bg-slate-800/60 border border-slate-700 relative overflow-hidden h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"cursor-help",title:"AutonomOS Agentic Orchestration Agent (AOA): A persistent, meta-level agent that observes, coordinates, and optimizes the behavior of all other domain agents.",children:[e.jsx("h2",{className:"text-xl font-medium text-cyan-400",children:"AutonomOS Orchestration Layer"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Mode: ",s.autonomy_mode]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[s.pending_approvals>0&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-yellow-500/20 rounded-lg border border-yellow-500/30",children:[e.jsx(J,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-sm text-yellow-400",children:[s.pending_approvals," pending"]})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg border ${o(s.state)}`,children:e.jsx("span",{className:"text-sm",children:s.state})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg px-4 py-3 border border-slate-700",children:[e.jsx(w,{className:"w-4 h-4 text-cyan-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Agent Uptime"}),e.jsxs("div",{className:`text-lg transition-colors ${u("uptime",s.agent_uptime_pct)}`,children:[s.agent_uptime_pct.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg px-4 py-3 border border-slate-700",children:[e.jsx(_,{className:"w-4 h-4 text-cyan-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Active Agents"}),e.jsxs("div",{className:"text-lg text-cyan-400",children:[s.active_agents.current," / ",s.active_agents.total]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg px-4 py-3 border border-slate-700",children:[e.jsx(b,{className:"w-4 h-4 text-cyan-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Failed Steps (24h)"}),e.jsx("div",{className:`text-lg transition-colors ${u("failed",s.failed_steps_24h)}`,children:s.failed_steps_24h})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg px-4 py-3 border border-slate-700",children:[e.jsx(y,{className:"w-4 h-4 text-cyan-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Anomalies (24h)"}),e.jsx("div",{className:`text-lg transition-colors ${u("anomalies",s.anomaly_detections_24h)}`,children:s.anomaly_detections_24h})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg px-4 py-3 border border-slate-700",children:[e.jsx(q,{className:"w-4 h-4 text-cyan-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Human Overrides"}),e.jsx("div",{className:`text-lg transition-colors ${u("overrides",s.human_overrides_24h)}`,children:s.human_overrides_24h})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg px-4 py-3 border border-slate-700",children:[e.jsx(N,{className:"w-4 h-4 text-cyan-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Triggers/min"}),e.jsx("div",{className:"text-lg text-cyan-400",children:s.triggers_per_min.toFixed(1)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 rounded-lg px-4 py-3 border border-slate-700",children:[e.jsx(W,{className:"w-4 h-4 text-cyan-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-xs text-slate-500 truncate",children:"Compute Load"}),e.jsxs("div",{className:`text-lg transition-colors ${u("load",s.compute_load_pct)}`,children:[s.compute_load_pct.toFixed(0),"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 pt-2 border-t border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{children:["Total Runs (24h): ",s.total_runs_24h]}),e.jsxs("span",{children:["Avg Duration: ",s.avg_run_duration_ms.toFixed(0),"ms"]})]}),g&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),e.jsxs("span",{children:["Updated ",g.toLocaleTimeString()]})]})]}),s.state==="Executing"&&e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-slate-700 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 via-blue-500 to-cyan-500 animate-pulse"})})]}):null}const ye=15e3;function Ne(){const[s,t]=h.useState(null),[a,r]=h.useState(!0),[l,n]=h.useState(null),g=h.useCallback(async()=>{try{const o=await ge();t(o),n(null)}catch(o){n(o.message)}finally{r(!1)}},[]);h.useEffect(()=>{g();const o=setInterval(g,ye);return()=>clearInterval(o)},[g]);const x=o=>{switch(o){case"optimal":return"bg-green-500/20 text-green-400";case"warning":return"bg-yellow-500/20 text-yellow-400";case"critical":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},c=o=>{switch(o){case"optimal":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}};return a&&!s?e.jsx("div",{className:"bg-slate-800/60 rounded-xl border border-slate-700 p-6",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(O,{className:"w-6 h-6 text-cyan-400 animate-spin"}),e.jsx("span",{className:"ml-3 text-slate-400",children:"Loading functions..."})]})}):l&&!s?e.jsxs("div",{className:"bg-slate-800/60 rounded-xl border border-red-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[e.jsx(y,{className:"w-6 h-6"}),e.jsxs("span",{children:["Failed to load functions: ",l]})]}),e.jsx("button",{onClick:g,className:"mt-4 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-slate-200 text-sm",children:"Retry"})]}):s?e.jsxs("div",{className:"bg-slate-800/60 rounded-xl border border-slate-700 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-medium text-cyan-400 mb-1",children:"AOA Functions"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Core orchestration capability metrics"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:s.functions.map(o=>e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 border border-slate-700 hover:border-cyan-500/50 transition-colors group cursor-help",title:o.description,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-200",children:o.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1 relative",children:[e.jsx("span",{className:"text-xs font-medium text-cyan-400 truncate",children:o.description.split(" - ")[0]}),e.jsx(K,{className:"w-3 h-3 text-slate-500 hover:text-cyan-400 cursor-help flex-shrink-0"}),e.jsx("div",{className:"absolute left-0 top-full mt-2 w-48 bg-slate-950 border border-slate-700 rounded-lg p-3 text-xs text-slate-300 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 shadow-xl",children:o.description})]}),e.jsxs("div",{className:"text-3xl text-cyan-400",children:[o.metric,e.jsx("span",{className:"text-lg text-slate-500",children:o.unit})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Target: ",o.target,o.unit]})]}),e.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${c(o.status)}`,style:{width:`${Math.min(100,o.metric)}%`}})})]},o.id))}),e.jsx("div",{className:"mt-4 text-center py-3 px-6 bg-slate-800/30 rounded-lg border border-slate-700",children:e.jsx("p",{className:"text-sm text-slate-400",children:"Each % value represents real-time operational efficiency of that orchestration function vs its target SLO."})})]}):null}const ve=15e3,we={finops:"https://autonomos.technology/",revops:"https://autonomos.cloud/"};function _e(s){const t=s.toLowerCase();for(const[a,r]of Object.entries(we))if(t.includes(a))return r;return null}function Ae(){const[s,t]=h.useState(null),[a,r]=h.useState(!0),[l,n]=h.useState(null),[g,x]=h.useState(!1),c=h.useCallback(async()=>{try{const i=await he(20);t(i),n(null)}catch(i){n(i.message)}finally{r(!1)}},[]),o=async()=>{x(!0);try{await je(),await c()}catch(i){n(i.message)}finally{x(!1)}};h.useEffect(()=>{c();const i=setInterval(c,ve);return()=>clearInterval(i)},[c]);const u=i=>{switch(i){case"running":return"bg-green-500";case"warning":return"bg-yellow-500";case"error":return"bg-red-500";case"idle":return"bg-gray-500";default:return"bg-gray-500"}},d=i=>i>=95?"text-green-400":i>=80?"text-yellow-400":"text-red-400",m=i=>i<1e3?`${i.toFixed(0)}ms`:i<6e4?`${(i/1e3).toFixed(1)}s`:`${(i/6e4).toFixed(1)}m`,p=i=>i===0?"$0":i<.01?"<$0.01":i<1?`$${i.toFixed(2)}`:`$${i.toFixed(2)}`,j=i=>{if(!i)return"Never";const f=new Date(i),Y=new Date().getTime()-f.getTime(),S=Math.floor(Y/6e4);if(S<1)return"Just now";if(S<60)return`${S}m ago`;const D=Math.floor(S/60);return D<24?`${D}h ago`:`${Math.floor(D/24)}d ago`};return a&&!s?e.jsx("div",{className:"bg-gray-900 rounded-xl border border-gray-800 p-6 h-full",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(O,{className:"w-6 h-6 text-cyan-400 animate-spin"}),e.jsx("span",{className:"ml-3 text-gray-400",children:"Loading agent performance..."})]})}):l&&!s?e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-red-500/30 p-6 h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[e.jsx(y,{className:"w-6 h-6"}),e.jsxs("span",{children:["Failed to load performance: ",l]})]}),e.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-gray-200 text-sm",children:"Retry"})]}):s?e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-800 p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white cursor-help",title:"Displays real-time operational metrics for each domain agent. Each row represents execution throughput, success rate, and resource usage per active agent.",children:"Active Agent Performance"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.total_agents," agents"]})]}),s.agents.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-3 text-gray-600"}),e.jsx("p",{className:"text-white font-medium",children:"No agents configured"}),e.jsx("p",{className:"text-sm mt-1 mb-4",children:"Create demo agents to see the dashboard in action"}),e.jsx("button",{onClick:o,disabled:g,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 disabled:from-gray-600 disabled:to-gray-600 text-white rounded-xl font-medium shadow-lg shadow-cyan-500/20 disabled:shadow-none transition-all",children:g?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-4 h-4 animate-spin"}),"Creating Agents..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4"}),"Seed Demo Agents"]})})]})}):e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("th",{className:"text-left text-xs font-semibold text-gray-500 uppercase tracking-wider pb-3",children:"Agent"}),e.jsx("th",{className:"text-center text-xs font-semibold text-gray-500 uppercase tracking-wider pb-3",children:"Status"}),e.jsx("th",{className:"text-right text-xs font-semibold text-gray-500 uppercase tracking-wider pb-3",children:"Exec/hr"}),e.jsx("th",{className:"text-right text-xs font-semibold text-gray-500 uppercase tracking-wider pb-3",children:"Success"}),e.jsx("th",{className:"text-right text-xs font-semibold text-gray-500 uppercase tracking-wider pb-3",children:"Avg Time"}),e.jsx("th",{className:"text-right text-xs font-semibold text-gray-500 uppercase tracking-wider pb-3",children:"Cost (24h)"}),e.jsx("th",{className:"text-right text-xs font-semibold text-gray-500 uppercase tracking-wider pb-3",children:"Last Run"})]})}),e.jsx("tbody",{children:s.agents.map(i=>{const f=_e(i.name);return e.jsxs("tr",{className:`border-b border-gray-800 hover:bg-gray-800/50 transition-colors ${f?"cursor-pointer":""}`,onClick:f?()=>window.open(f,"_blank"):void 0,children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`text-sm font-medium ${f?"text-cyan-400 hover:text-cyan-300":"text-white"}`,children:i.name}),f&&e.jsx(Q,{className:"w-3.5 h-3.5 text-cyan-400"}),e.jsx("span",{className:"text-xs text-gray-500 bg-gray-800 px-2 py-0.5 rounded",children:i.agent_type}),i.pending_approvals>0&&e.jsxs("span",{className:"text-xs text-yellow-400 bg-yellow-500/20 px-2 py-0.5 rounded",children:[i.pending_approvals," pending"]})]})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${u(i.status)} ${i.status==="running"?"animate-pulse":""}`,title:i.status})})}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("span",{className:"text-sm text-gray-300",children:i.executions_per_hour})}),e.jsx("td",{className:"py-3 text-right",children:e.jsxs("span",{className:`text-sm font-medium ${d(i.success_rate_pct)}`,children:[i.success_rate_pct.toFixed(1),"%"]})}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("span",{className:"text-sm text-gray-300",children:m(i.avg_duration_ms)})}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("span",{className:"text-sm text-gray-300",children:p(i.cost_24h_usd)})}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("span",{className:"text-sm text-gray-500",children:j(i.last_run_at)})})]},i.id)})})]})}),s.agents.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Runs (24h)"}),e.jsx("div",{className:"text-lg text-cyan-400",children:s.agents.reduce((i,f)=>i+f.total_runs_24h,0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Failed (24h)"}),e.jsx("div",{className:"text-lg text-red-400",children:s.agents.reduce((i,f)=>i+f.failed_runs_24h,0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Cost"}),e.jsx("div",{className:"text-lg text-green-400",children:p(s.agents.reduce((i,f)=>i+f.cost_24h_usd,0))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Total Tokens"}),e.jsxs("div",{className:"text-lg text-purple-400",children:[(s.agents.reduce((i,f)=>i+f.tokens_24h,0)/1e3).toFixed(1),"k"]})]})]})]}):null}const ke=[{mode:"Observe",description:"Monitor only, no agent actions"},{mode:"Recommend",description:"Suggest actions for review"},{mode:"Approve-to-Act",description:"Require approval before execution"},{mode:"Auto (Guardrails)",description:"Autonomous with safety limits"},{mode:"Federated (xAO)",description:"Cross-enterprise orchestration"}];function $e({className:s=""}){const[t,a]=h.useState("Auto (Guardrails)"),[r,l]=h.useState(!1),[n,g]=h.useState(!1),[x,c]=h.useState(null),o=h.useCallback(async()=>{try{const m=await ue();a(m.mode),c(null)}catch(m){console.error("Failed to fetch autonomy mode:",m)}},[]);h.useEffect(()=>{o()},[o]);const u=async m=>{if(m===t){l(!1);return}g(!0),c(null);try{await pe(m),a(m),l(!1)}catch(p){c(p.message)}finally{g(!1)}},d=m=>{switch(m){case"Observe":return"text-gray-400";case"Recommend":return"text-blue-400";case"Approve-to-Act":return"text-yellow-400";case"Auto (Guardrails)":return"text-green-400";case"Federated (xAO)":return"text-purple-400";default:return"text-cyan-400"}};return e.jsxs("div",{className:`relative ${s}`,children:[e.jsxs("button",{onClick:()=>l(!r),disabled:n,className:"flex items-center gap-2 px-3 py-2 bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-lg transition-colors disabled:opacity-50",title:"Autonomy Mode controls how AutonomOS manages itself. 'Auto (Guardrails)' allows self-directed agent decisions within preset boundaries.",children:[e.jsx(Z,{className:`w-4 h-4 ${n?"animate-spin":""} text-cyan-400`}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Autonomy Mode"}),e.jsx("div",{className:`text-sm font-medium ${d(t)}`,children:t})]}),e.jsx(ee,{className:`w-4 h-4 text-slate-400 transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),e.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-20",children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-slate-500 uppercase tracking-wider border-b border-slate-700 mb-2",children:"Select Autonomy Mode"}),x&&e.jsxs("div",{className:"mx-2 mb-2 p-2 bg-red-500/20 border border-red-500/30 rounded text-sm text-red-400 flex items-center gap-2",children:[e.jsx(se,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:x})]}),ke.map(({mode:m,description:p})=>e.jsxs("button",{onClick:()=>u(m),disabled:n,className:`w-full text-left px-3 py-2 rounded-md transition-colors flex items-center justify-between ${t===m?"bg-cyan-600 text-white":"text-slate-300 hover:bg-slate-700"} disabled:opacity-50`,children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:m}),e.jsx("div",{className:`text-xs mt-0.5 ${t===m?"text-cyan-100":"text-slate-400"}`,children:p})]}),t===m&&e.jsx(te,{className:"w-4 h-4 flex-shrink-0"})]},m))]})})]})]})}const Ce=[{key:"planner",label:"Planner",icon:W,color:"cyan"},{key:"worker",label:"Worker",icon:_,color:"blue"},{key:"specialist",label:"Specialist",icon:w,color:"purple"},{key:"reviewer",label:"Reviewer",icon:ae,color:"orange"},{key:"approver",label:"Approver",icon:C,color:"green"}],Se=[{key:"rock_solid",label:"Rock Solid",color:"emerald"},{key:"reliable",label:"Reliable",color:"blue"},{key:"flaky",label:"Flaky",color:"yellow"},{key:"unreliable",label:"Unreliable",color:"red"}];function V({agents:s,loading:t}){if(t)return e.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-slate-700 rounded w-32"}),e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(g=>e.jsx("div",{className:"h-8 bg-slate-700/50 rounded"},g))})]})});const a=s?.total_registered??0,r=s?.active??0,l=s?.by_type??{},n=s?.by_trust_tier??{};return e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-cyan-400"}),"Fleet Status"]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Active:"}),e.jsxs("span",{className:"text-cyan-400 font-medium",children:[r,"/",a]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Distribution by Type"}),e.jsx("div",{className:"space-y-3",children:Ce.map(({key:g,label:x,icon:c,color:o})=>{const u=l[g]??0,d=a>0?u/a*100:0;return e.jsx(Te,{icon:c,label:x,count:u,total:a,percentage:d,color:o},g)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Reliability Tiers"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Se.map(({key:g,label:x,color:c})=>{const o=n[g]??0;return e.jsx(Fe,{label:x,count:o,color:c},g)})})]}),a>0&&e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-700/50",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Fleet Utilization"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-blue-500 transition-all duration-500",style:{width:`${r/a*100}%`}})}),e.jsxs("span",{className:"text-cyan-400 font-medium",children:[(r/a*100).toFixed(0),"%"]})]})]})}),a===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(_,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No agents registered yet."}),e.jsx("p",{className:"text-sm",children:"Agents will appear when FARM sends a fleet."})]})]})}function Te({icon:s,label:t,count:a,total:r,percentage:l,color:n}){const g={cyan:{bg:"bg-cyan-500/20",text:"text-cyan-400",bar:"bg-cyan-500"},blue:{bg:"bg-blue-500/20",text:"text-blue-400",bar:"bg-blue-500"},purple:{bg:"bg-purple-500/20",text:"text-purple-400",bar:"bg-purple-500"},orange:{bg:"bg-orange-500/20",text:"text-orange-400",bar:"bg-orange-500"},green:{bg:"bg-green-500/20",text:"text-green-400",bar:"bg-green-500"}},x=g[n]||g.blue;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 ${x.bg} rounded-lg flex items-center justify-center`,children:e.jsx(s,{className:`w-4 h-4 ${x.text}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-300",children:t}),e.jsx("span",{className:`text-sm font-medium ${x.text}`,children:a})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${x.bar} transition-all duration-500`,style:{width:`${l}%`}})})]})]})}function Fe({label:s,count:t,color:a}){const r={emerald:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",blue:"bg-blue-500/20 text-blue-400 border-blue-500/30",yellow:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",red:"bg-red-500/20 text-red-400 border-red-500/30"},l=r[a]||r.blue;return e.jsxs("div",{className:`px-2 py-2 rounded-lg border ${l} text-center`,children:[e.jsx("div",{className:"text-lg font-bold",children:t}),e.jsx("div",{className:"text-xs opacity-80",children:s})]})}function z({workflows:s,scenarioResult:t,loading:a}){if(a)return e.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-slate-700 rounded w-40"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(p=>e.jsx("div",{className:"h-20 bg-slate-700/50 rounded"},p))})]})});const r=s?.active_workflows??0,l=s?.completed_24h??0,n=s?.failed_24h??0,g=s?.completion_rate??0,x=s?.avg_duration_ms??0,c=s?.throughput_per_min??0,o=r+l+n,u=t?.tasks_completed??0,d=t?.total_tasks??0,m=d>0?u/d*100:0;return e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-purple-400"}),"Workflow Execution"]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Throughput:"}),e.jsxs("span",{className:"text-purple-400 font-medium",children:[c.toFixed(1),"/min"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[e.jsx(T,{icon:re,label:"Running",value:r,color:"blue"}),e.jsx(T,{icon:v,label:"Completed",value:l,color:"green"}),e.jsx(T,{icon:b,label:"Failed",value:n,color:"red"}),e.jsx(T,{icon:$,label:"Avg Time",value:`${(x/1e3).toFixed(1)}s`,color:"gray"})]}),d>0&&e.jsxs("div",{className:"mb-6 p-4 bg-slate-700/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Overall Task Progress"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[u,"/",d," tasks"]})]}),e.jsx("div",{className:"w-full h-3 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500",style:{width:`${m}%`}})}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{className:"text-purple-400 font-medium",children:[m.toFixed(1),"%"]}),e.jsx("span",{children:"100%"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Completion Rate"}),e.jsx(Ee,{rate:g})]}),e.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${Pe(g)}`,style:{width:`${g*100}%`}})})]}),t?.analysis?.sections&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Execution Analysis"}),Object.entries(t.analysis.sections).map(([p,j])=>e.jsx(Re,{title:p.charAt(0).toUpperCase()+p.slice(1),verdict:j.verdict,findings:j.findings||[]},p))]}),o===0&&!t&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(L,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No workflows executed yet."}),e.jsx("p",{className:"text-sm",children:"Workflows will appear when stress test starts."})]}),t&&(t.chaos_events_total??0)>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-700/50",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(N,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-gray-400",children:"Chaos events handled:"}),e.jsxs("span",{className:"text-yellow-400 font-medium",children:[t.chaos_events_recovered,"/",t.chaos_events_total]})]})})]})}function T({icon:s,label:t,value:a,color:r}){const l={blue:{bg:"bg-blue-500/20",text:"text-blue-400"},green:{bg:"bg-green-500/20",text:"text-green-400"},red:{bg:"bg-red-500/20",text:"text-red-400"},gray:{bg:"bg-gray-500/20",text:"text-gray-400"}},n=l[r]||l.gray;return e.jsxs("div",{className:`${n.bg} rounded-lg p-3 text-center`,children:[e.jsx(s,{className:`w-4 h-4 ${n.text} mx-auto mb-1`}),e.jsx("div",{className:`text-lg font-bold ${n.text}`,children:a}),e.jsx("div",{className:"text-xs text-gray-500",children:t})]})}function Ee({rate:s}){const t=(s*100).toFixed(1);return s>=.95?e.jsxs("span",{className:"flex items-center gap-1 text-green-400 text-sm font-medium",children:[e.jsx(v,{className:"w-4 h-4"}),t,"%"]}):s>=.8?e.jsxs("span",{className:"flex items-center gap-1 text-yellow-400 text-sm font-medium",children:[e.jsx(y,{className:"w-4 h-4"}),t,"%"]}):e.jsxs("span",{className:"flex items-center gap-1 text-red-400 text-sm font-medium",children:[e.jsx(b,{className:"w-4 h-4"}),t,"%"]})}function Re({title:s,verdict:t,findings:a}){const r={PASS:{bg:"bg-green-500/20",text:"text-green-400",icon:v},DEGRADED:{bg:"bg-yellow-500/20",text:"text-yellow-400",icon:y},FAIL:{bg:"bg-red-500/20",text:"text-red-400",icon:b}},l=r[t]||r.PASS,n=l.icon;return e.jsxs("div",{className:`${l.bg} rounded-lg p-3`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:s}),e.jsxs("span",{className:`flex items-center gap-1 text-xs ${l.text}`,children:[e.jsx(n,{className:"w-3 h-3"}),t]})]}),a.length>0&&e.jsx("ul",{className:"text-xs text-gray-400 space-y-1",children:a.slice(0,3).map((g,x)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-600",children:"•"}),g]},x))})]})}function Pe(s){return s>=.95?"bg-gradient-to-r from-green-500 to-emerald-500":s>=.8?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-red-500 to-rose-500"}const Oe=[{key:"tool_timeout",label:"Tool Timeout",icon:$,color:"yellow"},{key:"tool_failure",label:"Tool Failure",icon:b,color:"red"},{key:"agent_conflict",label:"Agent Conflict",icon:y,color:"orange"},{key:"policy_violation",label:"Policy Violation",icon:C,color:"purple"},{key:"checkpoint_crash",label:"Checkpoint Crash",icon:le,color:"pink"},{key:"memory_pressure",label:"Memory Pressure",icon:w,color:"cyan"},{key:"rate_limit",label:"Rate Limit",icon:ne,color:"blue"},{key:"data_corruption",label:"Data Corruption",icon:ie,color:"rose"},{key:"network_partition",label:"Network Partition",icon:ce,color:"gray"}];function H({chaos:s,events:t,loading:a}){if(a)return e.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-slate-700 rounded w-36"}),e.jsx("div",{className:"h-40 bg-slate-700/50 rounded"})]})});const r=s?.events_triggered??0,l=s?.events_recovered??0,n=s?.events_failed??0,g=s?.recovery_rate??0,x=s?.by_type??{},c=r-l-n,o=Ie(t,x);return e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-yellow-400"}),"Chaos Events"]}),e.jsx(Le,{rate:g})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[e.jsx(F,{label:"Triggered",value:r,icon:N,color:"yellow"}),e.jsx(F,{label:"Recovered",value:l,icon:v,color:"green"}),e.jsx(F,{label:"Failed",value:n,icon:b,color:"red"}),e.jsx(F,{label:"Pending",value:c,icon:U,color:"blue"})]}),r>0&&e.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-700/50",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-700/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-400",children:"Count"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-400",children:"Recovered"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700/30",children:Oe.filter(u=>(o[u.key]?.count??0)>0).map(({key:u,label:d,icon:m,color:p})=>{const j=o[u]||{count:0,recovered:0,pending:0};return e.jsx(De,{icon:m,label:d,count:j.count,recovered:j.recovered,pending:j.pending,color:p},u)})})]})}),r>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Recovery Progress"}),e.jsxs("span",{className:"text-yellow-400 font-medium",children:[l,"/",r]})]}),e.jsxs("div",{className:"w-full h-3 bg-slate-700 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${l/r*100}%`}}),e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${c/r*100}%`}}),e.jsx("div",{className:"h-full bg-red-500 transition-all duration-500",style:{width:`${n/r*100}%`}})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Recovered"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})," Pending"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})," Failed"]})]})]}),t.length>0&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-700/50",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Recent Chaos Events"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:t.slice(0,5).map((u,d)=>e.jsx(Me,{event:u},d))})]}),r===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No chaos events yet."}),e.jsx("p",{className:"text-sm",children:"Chaos injections will appear during stress testing."})]})]})}function Le({rate:s}){const t=(s*100).toFixed(0);return s>=.8?e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 text-sm font-medium rounded-lg",children:[e.jsx(v,{className:"w-4 h-4"}),t,"% Recovery"]}):s>=.5?e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-500/20 text-yellow-400 text-sm font-medium rounded-lg",children:[e.jsx(y,{className:"w-4 h-4"}),t,"% Recovery"]}):e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-red-500/20 text-red-400 text-sm font-medium rounded-lg",children:[e.jsx(b,{className:"w-4 h-4"}),t,"% Recovery"]})}function F({label:s,value:t,icon:a,color:r}){const l={yellow:{bg:"bg-yellow-500/20",text:"text-yellow-400"},green:{bg:"bg-green-500/20",text:"text-green-400"},red:{bg:"bg-red-500/20",text:"text-red-400"},blue:{bg:"bg-blue-500/20",text:"text-blue-400"}},n=l[r]||l.yellow;return e.jsxs("div",{className:`${n.bg} rounded-lg p-3 text-center`,children:[e.jsx(a,{className:`w-4 h-4 ${n.text} mx-auto mb-1`}),e.jsx("div",{className:`text-lg font-bold ${n.text}`,children:t}),e.jsx("div",{className:"text-xs text-gray-500",children:s})]})}function De({icon:s,label:t,count:a,recovered:r,pending:l,color:n}){const g={yellow:"text-yellow-400",red:"text-red-400",orange:"text-orange-400",purple:"text-purple-400",pink:"text-pink-400",cyan:"text-cyan-400",blue:"text-blue-400",rose:"text-rose-400",gray:"text-gray-400"},x=g[n]||g.gray;return e.jsxs("tr",{className:"hover:bg-slate-700/20 transition-colors",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:`w-4 h-4 ${x}`}),e.jsx("span",{className:"text-sm text-gray-300",children:t})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:`text-sm font-medium ${x}`,children:a})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:"text-sm font-medium text-green-400",children:r})}),e.jsx("td",{className:"px-4 py-2",children:l>0?e.jsxs("span",{className:"flex items-center gap-1 text-xs text-blue-400",children:[e.jsx(U,{className:"w-3 h-3 animate-spin"}),l," pending"]}):e.jsx("span",{className:"text-xs text-gray-500",children:"-"})})]})}function Me({event:s}){const t=s.type.includes("recovered"),a=s.type.includes("failed"),r=new Date(s.timestamp).toLocaleTimeString(),l=s.data.chaos_type||"unknown";return e.jsxs("div",{className:`flex items-center gap-3 py-2 px-3 rounded-lg ${t?"bg-green-500/10":a?"bg-red-500/10":"bg-yellow-500/10"}`,children:[t?e.jsx(v,{className:"w-4 h-4 text-green-400"}):a?e.jsx(b,{className:"w-4 h-4 text-red-400"}):e.jsx(N,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-gray-500 text-xs w-16",children:r}),e.jsx("span",{className:"text-gray-300 text-sm",children:l}),s.data.task_id&&e.jsxs("span",{className:"text-gray-500 text-xs ml-auto",children:["Task: ",s.data.task_id.slice(0,8),"..."]})]})}function Ie(s,t){const a={};for(const[r,l]of Object.entries(t))a[r]={count:l,recovered:0,pending:l};for(const r of s){const l=r.data.chaos_type;l&&(a[l]||(a[l]={count:0,recovered:0,pending:0}),r.type.includes("injected")?(a[l].count++,a[l].pending++):r.type.includes("recovered")&&(a[l].recovered++,a[l].pending=Math.max(0,a[l].pending-1)))}return a}const Be=[{key:"completion_rate",label:"Completion Rate",icon:oe,format:s=>`≥${(s*100).toFixed(0)}%`,formatActual:s=>`${(s*100).toFixed(1)}%`},{key:"chaos_recovery",label:"Chaos Recovery",icon:N,format:s=>`≥${(s*100).toFixed(0)}%`,formatActual:s=>`${(s*100).toFixed(1)}%`},{key:"task_completion",label:"Task Completion",icon:de,format:s=>`${s} tasks`,formatActual:s=>`${s} tasks`},{key:"all_assigned",label:"All Tasks Assigned",icon:B,format:s=>s?"Yes":"No",formatActual:s=>s?"Yes":"No"},{key:"can_execute_all",label:"Can Execute All",icon:B,format:s=>s?"Yes":"No",formatActual:s=>s?"Yes":"No"},{key:"throughput",label:"Throughput",icon:xe,format:s=>`≥${s} tasks/sec`,formatActual:s=>`${s.toFixed(2)} tasks/sec`},{key:"avg_latency",label:"Avg Latency",icon:$,format:s=>`≤${s}ms`,formatActual:s=>`${s.toFixed(0)}ms`}];function Ge({scenarioResult:s,loading:t}){if(t)return e.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-slate-700 rounded w-48"}),e.jsx("div",{className:"h-40 bg-slate-700/50 rounded"})]})});const a=s?.validation??{},r=Object.entries(a),l=r.filter(([x,c])=>c.passed).length,n=r.length,g=n>0?l/n:0;return e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-orange-400"}),"FARM Test Oracle"]}),n>0&&e.jsx(We,{rate:g})]}),n>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-700/50",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-700/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400",children:"Check"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-400",children:"Expected"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-400",children:"Actual"}),e.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-400",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700/30",children:r.map(([x,c])=>{const o=Be.find(u=>u.key===x);return e.jsx(Ve,{label:o?.label??M(x),icon:o?.icon??P,expected:o?.format?o.format(c.expected):String(c.expected),actual:o?.formatActual?o.formatActual(c.actual):String(c.actual),passed:c.passed},x)})})]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:[l," of ",n," checks passed"]}),e.jsx(Ue,{verdict:s?.verdict??"PENDING"})]}),l<n&&e.jsxs("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Discrepancies"]}),e.jsx("ul",{className:"text-sm text-gray-400 space-y-1",children:r.filter(([x,c])=>!c.passed).map(([x,c])=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(b,{className:"w-4 h-4 text-red-400 mt-0.5"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-gray-300",children:M(x)}),": Expected"," ",G(c.expected),", got ",G(c.actual)]})]},x))})]}),l===n&&n>0&&e.jsx("div",{className:"mt-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"All validation checks passed"})]})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(P,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No expectations defined yet."}),e.jsx("p",{className:"text-sm",children:"FARM expectations will appear when a scenario is submitted."})]}),s?.analysis?.recommendations&&s.analysis.recommendations.length>0&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-700/50",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Recommendations"}),e.jsx("ul",{className:"text-sm text-gray-400 space-y-2",children:s.analysis.recommendations.map((x,c)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-400",children:"→"}),x]},c))})]}),s?.analysis?.metrics&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-700/50",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Performance Metrics"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(s.analysis.metrics).slice(0,4).map(([x,c])=>e.jsx(ze,{label:M(x),value:c},x))})]})]})}function We({rate:s}){const t=(s*100).toFixed(0);return s>=1?e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 text-sm font-medium rounded-lg",children:[e.jsx(v,{className:"w-4 h-4"}),t,"% Aligned"]}):s>=.8?e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-500/20 text-yellow-400 text-sm font-medium rounded-lg",children:[e.jsx(y,{className:"w-4 h-4"}),t,"% Aligned"]}):e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-red-500/20 text-red-400 text-sm font-medium rounded-lg",children:[e.jsx(b,{className:"w-4 h-4"}),t,"% Aligned"]})}function Ue({verdict:s}){const t={PASS:{bg:"bg-green-500/20",text:"text-green-400",icon:v},DEGRADED:{bg:"bg-yellow-500/20",text:"text-yellow-400",icon:y},FAIL:{bg:"bg-red-500/20",text:"text-red-400",icon:b},PENDING:{bg:"bg-gray-500/20",text:"text-gray-400",icon:$}},a=t[s]||t.PENDING,r=a.icon;return e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 ${a.bg} ${a.text} text-sm font-medium rounded-lg`,children:[e.jsx(r,{className:"w-4 h-4"}),s]})}function Ve({label:s,icon:t,expected:a,actual:r,passed:l}){return e.jsxs("tr",{className:"hover:bg-slate-700/20 transition-colors",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:s})]})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:"text-sm text-gray-400",children:a})}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:`text-sm font-medium ${l?"text-green-400":"text-red-400"}`,children:r})}),e.jsx("td",{className:"px-4 py-2 text-center",children:l?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500/20 text-green-400 text-xs rounded-full",children:[e.jsx(v,{className:"w-3 h-3"}),"PASS"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-red-500/20 text-red-400 text-xs rounded-full",children:[e.jsx(b,{className:"w-3 h-3"}),"FAIL"]})})]})}function ze({label:s,value:t}){const a=typeof t=="number"?t<1?`${(t*100).toFixed(1)}%`:t.toFixed(2):String(t);return e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:a}),e.jsx("div",{className:"text-xs text-gray-500",children:s})]})}function M(s){return s.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function G(s){return typeof s=="boolean"?s?"true":"false":typeof s=="number"?s<1&&s>0?`${(s*100).toFixed(1)}%`:s.toFixed(2):String(s)}const He=[{id:"overview",label:"Overview",icon:w,description:"Real-time vitals and KPIs"},{id:"agents",label:"Agents",icon:_,description:"Fleet management and performance"},{id:"workflows",label:"Workflows",icon:L,description:"Execution tracking"},{id:"resilience",label:"Resilience",icon:N,description:"Chaos testing and recovery"},{id:"governance",label:"Governance",icon:C,description:"Approvals and policies"},{id:"stress-test",label:"Stress Test",icon:P,description:"FARM stress testing"}];function as(){const[s,t]=h.useState("overview"),[a,r]=h.useState(null),[l,n]=h.useState(null),[g,x]=h.useState([]),[c,o]=h.useState(!0),u=h.useCallback(async()=>{try{const d=await fetch("/api/v1/aoa/dashboard",{headers:{"X-Tenant-ID":"default"}});if(d.ok){const m=await d.json();if(r(m),m.simulation_scenario_id){const p=await fetch(`/api/v1/stress-test/scenario/${m.simulation_scenario_id}`);if(p.ok){const j=await p.json();n(j)}}}}catch(d){console.error("Dashboard fetch error:",d)}finally{o(!1)}},[]);return h.useEffect(()=>{u();const d=setInterval(u,5e3);return()=>clearInterval(d)},[u]),h.useEffect(()=>{let d=null;const m=()=>{d=new EventSource("/api/v1/aoa/events"),d.onmessage=p=>{try{const j=JSON.parse(p.data);x(i=>[{type:j.type,timestamp:new Date().toISOString(),data:j},...i.slice(0,99)])}catch(j){console.error("SSE parse error:",j)}},d.onerror=()=>{d?.close(),setTimeout(m,5e3)}};return m(),()=>{d?.close()}},[]),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-cyan-500/20",children:e.jsx(w,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Agentic Orchestration"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Real-time monitoring and control of autonomous agent operations"})]})]}),e.jsx($e,{})]}),e.jsx("div",{className:"flex items-center gap-1 bg-slate-800/50 rounded-xl p-1.5 border border-slate-700/50",children:He.map(d=>{const m=d.icon,p=s===d.id;return e.jsxs("button",{onClick:()=>t(d.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg transition-all ${p?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"text-gray-400 hover:text-gray-200 hover:bg-slate-700/50"}`,title:d.description,children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:d.label}),d.id==="stress-test"&&a?.simulation_active&&e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]},d.id)})}),e.jsxs("div",{className:"min-h-[600px]",children:[s==="overview"&&e.jsx(Ye,{dashboard:a,loading:c}),s==="agents"&&e.jsx(Je,{dashboard:a,loading:c}),s==="workflows"&&e.jsx(qe,{dashboard:a,scenarioResult:l,loading:c}),s==="resilience"&&e.jsx(Ke,{dashboard:a,events:g,loading:c}),s==="governance"&&e.jsx(Xe,{dashboard:a,loading:c}),s==="stress-test"&&e.jsx(Qe,{dashboard:a,scenarioResult:l,events:g,loading:c})]}),e.jsx("div",{className:"text-center py-4 text-xs text-slate-500",children:"Dashboard data refreshes automatically. All metrics are derived from real agent execution data."})]})}function Ye({dashboard:s,loading:t}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx(be,{}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(E,{label:"Active Agents",value:s?.agents.active??0,total:s?.agents.total_registered,icon:_,color:"cyan"}),e.jsx(E,{label:"Active Workflows",value:s?.workflows.active_workflows??0,icon:L,color:"purple"}),e.jsx(E,{label:"Chaos Recovery",value:`${((s?.chaos.recovery_rate??0)*100).toFixed(0)}%`,icon:N,color:(s?.chaos.recovery_rate??0)>=.8?"green":"yellow"}),e.jsx(E,{label:"Pending Approvals",value:s?.governance.pending_approvals??0,icon:C,color:(s?.governance.pending_approvals??0)>0?"orange":"gray"})]}),e.jsx(Ne,{})]})}function Je({dashboard:s,loading:t}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{agents:s?.agents,loading:t}),e.jsx(Ae,{})]})}function qe({dashboard:s,scenarioResult:t,loading:a}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx(z,{workflows:s?.workflows,scenarioResult:t,loading:a}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(I,{label:"Completed (24h)",value:s?.workflows.completed_24h??0,color:"green"}),e.jsx(I,{label:"Failed (24h)",value:s?.workflows.failed_24h??0,color:"red"}),e.jsx(I,{label:"Avg Duration",value:`${((s?.workflows.avg_duration_ms??0)/1e3).toFixed(1)}s`,color:"blue"})]})]})}function Ke({dashboard:s,events:t,loading:a}){const r=t.filter(l=>l.type.startsWith("chaos."));return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{chaos:s?.chaos,events:r,loading:a}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Resilience Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-cyan-400",children:s?.chaos.events_triggered??0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Events Triggered"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-green-400",children:s?.chaos.events_recovered??0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Successfully Recovered"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-red-400",children:s?.chaos.events_failed??0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Failed to Recover"})]})]})]})]})}function Xe({dashboard:s,loading:t}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-6 flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-purple-400"}),"Governance Overview"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Approvals"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{label:"Pending Approvals",value:s?.governance.pending_approvals??0,color:(s?.governance.pending_approvals??0)>0?"orange":"green"}),e.jsx(k,{label:"Auto-Approved",value:s?.governance.approvals_auto_approved??0,color:"green"}),e.jsx(k,{label:"Escalated",value:s?.governance.approvals_escalated??0,color:"yellow"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Policies"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(k,{label:"Active Policies",value:s?.governance.policies_active??0,color:"cyan"}),e.jsx(k,{label:"Violations (24h)",value:s?.governance.policy_violations_24h??0,color:(s?.governance.policy_violations_24h??0)>0?"red":"green"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Budget & Costs"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(R,{label:"Today",value:s?.costs.today_usd??0}),e.jsx(R,{label:"This Week",value:s?.costs.week_usd??0}),e.jsx(R,{label:"This Month",value:s?.costs.month_usd??0}),e.jsx(R,{label:"Budget Remaining",value:s?.costs.budget_remaining_usd,highlight:!0})]}),(s?.costs.budget_utilization??0)>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Budget Utilization"}),e.jsxs("span",{className:"text-cyan-400 font-medium",children:[((s?.costs.budget_utilization??0)*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full h-3 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${(s?.costs.budget_utilization??0)>.9?"bg-red-500":(s?.costs.budget_utilization??0)>.7?"bg-yellow-500":"bg-green-500"}`,style:{width:`${(s?.costs.budget_utilization??0)*100}%`}})})]})]})]})}function Qe({dashboard:s,scenarioResult:t,events:a,loading:r}){const l=a.filter(n=>n.type.startsWith("chaos."));return e.jsxs("div",{className:"space-y-6",children:[s?.simulation_active?e.jsxs("div",{className:"bg-purple-500/20 border border-purple-500/50 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-purple-400 font-medium",children:"Stress Test Running"}),s.simulation_scenario_id&&e.jsxs("span",{className:"text-gray-500 text-sm ml-auto",children:["Scenario: ",s.simulation_scenario_id]})]}):e.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),e.jsx("span",{className:"text-gray-400",children:"No active stress test"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(V,{agents:s?.agents,loading:r}),e.jsx(z,{workflows:s?.workflows,scenarioResult:t,loading:r})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx(H,{chaos:s?.chaos,events:l,loading:r}),e.jsx(Ge,{scenarioResult:t,loading:r})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-cyan-400"}),"Recent Events"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[a.length," events"]})]}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:a.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No events yet. Events will appear when stress test starts."}):a.slice(0,15).map((n,g)=>e.jsx(Ze,{event:n},g))})]})]})}function E({label:s,value:t,total:a,icon:r,color:l}){const n={cyan:"from-cyan-500 to-blue-600 shadow-cyan-500/20",purple:"from-purple-500 to-pink-600 shadow-purple-500/20",green:"from-green-500 to-emerald-600 shadow-green-500/20",yellow:"from-yellow-500 to-orange-600 shadow-yellow-500/20",orange:"from-orange-500 to-red-600 shadow-orange-500/20",gray:"from-gray-500 to-slate-600 shadow-gray-500/20"};return e.jsx("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${n[l]} rounded-lg flex items-center justify-center shadow-lg`,children:e.jsx(r,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold text-white",children:[t,a!==void 0&&e.jsxs("span",{className:"text-gray-500 text-sm font-normal",children:["/",a]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:s})]})]})})}function I({label:s,value:t,color:a}){const r={green:"text-green-400",red:"text-red-400",blue:"text-blue-400"};return e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700/50 p-4 text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${r[a]}`,children:t}),e.jsx("div",{className:"text-sm text-gray-500",children:s})]})}function k({label:s,value:t,color:a}){const r={green:"bg-green-500/20 text-green-400",orange:"bg-orange-500/20 text-orange-400",yellow:"bg-yellow-500/20 text-yellow-400",red:"bg-red-500/20 text-red-400",cyan:"bg-cyan-500/20 text-cyan-400"};return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-300",children:s}),e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${r[a]}`,children:t})]})}function R({label:s,value:t,highlight:a}){const r=t!==null?`$${t.toFixed(2)}`:"N/A";return e.jsxs("div",{className:`p-4 rounded-lg text-center ${a?"bg-cyan-500/10 border border-cyan-500/30":"bg-slate-700/30"}`,children:[e.jsx("div",{className:`text-xl font-bold ${a?"text-cyan-400":"text-white"}`,children:r}),e.jsx("div",{className:"text-xs text-gray-500",children:s})]})}function Ze({event:s}){const t=r=>r.includes("completed")||r.includes("recovered")||r.includes("granted")?"text-green-400":r.includes("failed")||r.includes("rejected")?"text-red-400":r.includes("started")||r.includes("injected")||r.includes("requested")?"text-yellow-400":"text-gray-400",a=new Date(s.timestamp).toLocaleTimeString();return e.jsxs("div",{className:"flex items-center gap-3 py-2 px-3 bg-slate-700/30 rounded-lg",children:[e.jsx("span",{className:"text-gray-500 text-xs w-20",children:a}),e.jsx("span",{className:`text-sm flex-1 ${t(s.type)}`,children:s.type}),s.data.task_id&&e.jsxs("span",{className:"text-gray-500 text-xs",children:["Task: ",s.data.task_id.slice(0,8),"..."]})]})}export{as as default};
