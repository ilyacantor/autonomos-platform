import{r as nt,g as Nt,a as kt}from"./react-vendor-D3F3s8fL.js";import{s as $,S as St,a as At}from"./d3-vendor-BvNdi-GT.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const m of s)if(m.type==="childList")for(const p of m.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function o(s){const m={};return s.integrity&&(m.integrity=s.integrity),s.referrerPolicy&&(m.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?m.credentials="include":s.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function i(s){if(s.ep)return;s.ep=!0;const m=o(s);fetch(s.href,m)}})();var Ae={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ge;function Ct(){if(Ge)return ae;Ge=1;var t=nt(),l=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function p(n,b,w){var h,A={},c=null,g=null;w!==void 0&&(c=""+w),b.key!==void 0&&(c=""+b.key),b.ref!==void 0&&(g=b.ref);for(h in b)i.call(b,h)&&!m.hasOwnProperty(h)&&(A[h]=b[h]);if(n&&n.defaultProps)for(h in b=n.defaultProps,b)A[h]===void 0&&(A[h]=b[h]);return{$$typeof:l,type:n,key:c,ref:g,props:A,_owner:s.current}}return ae.Fragment=o,ae.jsx=p,ae.jsxs=p,ae}var Ue;function Dt(){return Ue||(Ue=1,Ae.exports=Ct()),Ae.exports}var e=Dt(),a=nt();const ot=Nt(a);var de={},Ve;function Mt(){if(Ve)return de;Ve=1;var t=kt();return de.createRoot=t.createRoot,de.hydrateRoot=t.hydrateRoot,de}var Lt=Mt();const it=a.createContext(void 0);function Et({children:t}){const[l,o]=a.useState("Auto (Guardrails)"),[i,s]=a.useState(!1),[m,p]=a.useState(!0);return e.jsx(it.Provider,{value:{autonomyMode:l,setAutonomyMode:o,isModalOpen:i,setIsModalOpen:s,legacyMode:m,setLegacyMode:p},children:t})}function _t(){const t=a.useContext(it);if(t===void 0)throw new Error("useAutonomy must be used within an AutonomyProvider");return t}const Ce=window.location.origin,U={BASE_URL:Ce,buildApiUrl:t=>`${Ce}/api/v1${t}`,buildDclUrl:t=>`${Ce}/dcl${t}`},J="aoa_jwt",Ee=[{id:"1",name:"Dynamics CRM",value:"dynamics",type:"CRM",status:"connected",description:"Customer relationship management"},{id:"2",name:"Salesforce",value:"salesforce",type:"CRM",status:"connected",description:"Cloud-based CRM platform"},{id:"3",name:"HubSpot",value:"hubspot",type:"CRM",status:"connected",description:"Marketing and sales platform"},{id:"4",name:"SAP ERP",value:"sap",type:"ERP",status:"connected",description:"Enterprise resource planning"},{id:"5",name:"NetSuite",value:"netsuite",type:"ERP",status:"connected",description:"Cloud ERP system"},{id:"6",name:"Legacy SQL",value:"legacy_sql",type:"Database",status:"connected",description:"On-premise SQL database"},{id:"7",name:"Snowflake",value:"snowflake",type:"Warehouse",status:"connected",description:"Cloud data warehouse"},{id:"8",name:"Supabase",value:"supabase",type:"Database",status:"connected",description:"Open source database platform"},{id:"9",name:"MongoDB",value:"mongodb",type:"Database",status:"connected",description:"NoSQL document database"}],_e=[{id:"2",name:"Salesforce",value:"salesforce",type:"CRM",status:"connected",description:"Cloud-based CRM platform"},{id:"8",name:"Supabase",value:"supabase",type:"Database",status:"connected",description:"Open source database platform"},{id:"9",name:"MongoDB",value:"mongodb",type:"Database",status:"connected",description:"NoSQL document database"},{id:"10",name:"FileSource",value:"filesource",type:"Database",status:"connected",description:"File-based data sources"}],lt=[{id:"1",name:"RevOps Pilot",value:"revops_pilot",description:"Revenue operations intelligence agent"},{id:"2",name:"FinOps Pilot",value:"finops_pilot",description:"Financial operations intelligence agent"}],oe=()=>Ee.map(t=>t.value),Je=()=>_e.map(t=>t.value),Ie=()=>lt.map(t=>t.value),De=()=>{let t=!1,l=!1;try{const o=localStorage.getItem("aos.selectedSources");if(!o)t=!0;else{const i=JSON.parse(o);(!Array.isArray(i)||i.length===0)&&(t=!0)}}catch{t=!0}try{const o=localStorage.getItem("aos.selectedAgents");if(!o)l=!0;else{const i=JSON.parse(o);(!Array.isArray(i)||i.length===0)&&(l=!0)}}catch{l=!0}if(t){const o=oe();localStorage.setItem("aos.selectedSources",JSON.stringify(o)),console.log("[DCL Defaults] Initialized all sources:",o)}if(l){const o=Ie();localStorage.setItem("aos.selectedAgents",JSON.stringify(o)),console.log("[DCL Defaults] Initialized all agents:",o)}},Ot=()=>{try{const t=localStorage.getItem("aos.selectedSources");if(t){const l=JSON.parse(t);if(Array.isArray(l))return l}}catch(t){console.error("[DCL Defaults] Failed to parse saved sources:",t)}return oe()},ge=()=>{try{const t=localStorage.getItem("aos.selectedAgents");if(t){const l=JSON.parse(t);if(Array.isArray(l)&&l.length>0)return l}}catch(t){console.error("[DCL Defaults] Failed to parse saved agents:",t)}return Ie()},re="auth_token_expiry",Ye=480*60*1e3,ct=a.createContext(void 0);function It({children:t}){const[l,o]=a.useState(null),[i,s]=a.useState(null),[m,p]=a.useState(!0),n=a.useCallback(()=>{localStorage.removeItem(J),localStorage.removeItem(re),s(null),o(null)},[]),b=a.useCallback(()=>{const c=localStorage.getItem(J),g=localStorage.getItem(re);if(!c)return!1;if(!g)return console.log("[Auth] Legacy token without expiry found, logging out..."),n(),!1;const j=parseInt(g,10);return Date.now()>=j?(console.log("[Auth] Token expired after 30 minutes, logging out..."),n(),!1):!0},[n]);a.useEffect(()=>{const c=localStorage.getItem(J);c&&b()?(De(),s(c),w(c)):p(!1);const g=()=>{console.log("[Auth] Received unauthorized event, logging out..."),n()};return window.addEventListener("auth:unauthorized",g),()=>{window.removeEventListener("auth:unauthorized",g)}},[b,n]);const w=async c=>{try{const g=await fetch(U.buildApiUrl("/auth/me"),{headers:{Authorization:`Bearer ${c}`}});if(g.ok){const j=await g.json();o(j)}else g.status===401?(console.log("[Auth] 401 on profile fetch, logging out..."),n()):(localStorage.removeItem(J),localStorage.removeItem(re),s(null))}catch(g){console.error("Failed to fetch user profile:",g),n()}finally{p(!1)}},h=async(c,g)=>{const j=await fetch(U.buildApiUrl("/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:g})});if(!j.ok){const S=await j.json();throw new Error(S.detail||"Invalid credentials")}const k=await j.json(),u=k.access_token||k.token,d=Date.now()+Ye;localStorage.setItem(J,u),localStorage.setItem(re,d.toString()),s(u),De(),await w(u)},A=async(c,g,j)=>{const k=await fetch(U.buildApiUrl("/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,email:g,password:j})});if(!k.ok){const v=await k.json();throw new Error(v.detail||"Registration failed")}const u=await k.json(),d=u.access_token||u.token,S=Date.now()+Ye;localStorage.setItem(J,d),localStorage.setItem(re,S.toString()),s(d),De(),await w(d)};return e.jsx(ct.Provider,{value:{user:l,token:i,isAuthenticated:!!i,isLoading:m,login:h,register:A,logout:n},children:t})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),L=(t,l)=>{const o=a.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:m=2,absoluteStrokeWidth:p,className:n="",children:b,...w},h)=>a.createElement("svg",{ref:h,...Pt,width:s,height:s,stroke:i,strokeWidth:p?Number(m)*24/Number(s):m,className:["lucide",`lucide-${Tt(t)}`,n].join(" "),...w},[...l.map(([A,c])=>a.createElement(A,c)),...Array.isArray(b)?b:[b]]));return o.displayName=`${t}`,o};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=L("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=L("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=L("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=L("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=L("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=L("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=L("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=L("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=L("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=L("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=L("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=L("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=L("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=L("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=L("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=L("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=L("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=L("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=L("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=L("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=L("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=L("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=L("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=L("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=L("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=L("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=L("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=L("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=L("MonitorDot",[["circle",{cx:"19",cy:"6",r:"3",key:"108a5v"}],["path",{d:"M22 12v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h9",key:"1fet9y"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=L("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=L("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=L("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=L("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=L("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=L("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=L("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=L("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=L("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=L("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=L("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=L("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=L("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=L("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=L("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=L("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=L("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),is="/assets/autonomos-logo-CqGBsnEG.png";function ls({onAuthOpen:t,currentPage:l,onNavigate:o}){const[i,s]=a.useState(!1),[m]=a.useState(!0),p=[{id:"architecture",label:"Platform Guide",icon:e.jsx(dt,{className:"w-5 h-5"}),tooltip:"Interactive architecture documentation"},{id:"discover",label:"AOD (Discover)",icon:e.jsx(ue,{className:"w-5 h-5"}),tooltip:"Asset discovery and cataloging"},{id:"connect",label:"AAM (Connect)",icon:e.jsx(ht,{className:"w-5 h-5"}),tooltip:"Self-healing data connectivity"},{id:"ontology",label:"DCL (Ontology)",icon:e.jsx(ut,{className:"w-5 h-5"}),tooltip:"Data intelligence and mapping"},{id:"orchestration",label:"AOA (Orchestration)",icon:e.jsx(X,{className:"w-5 h-5"})},{id:"agents",label:"Agents",icon:e.jsx(X,{className:"w-5 h-5"})},{id:"flow-monitor",label:"Flow Monitor",icon:e.jsx(Yt,{className:"w-5 h-5"}),tooltip:"Real-time telemetry monitoring"},{id:"control-center",label:"Control Center",icon:e.jsx(Ut,{className:"w-5 h-5"})},{id:"faq",label:"Help",icon:e.jsx(Te,{className:"w-5 h-5"})}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-16 bg-gray-900 border-b border-gray-800 flex items-center px-4 sm:px-6 gap-3 sm:gap-6 safe-x",children:[e.jsx("div",{className:"flex-shrink-0 -ml-[10px]",children:e.jsx("button",{onClick:()=>o("architecture"),className:"hover:opacity-80 transition-opacity cursor-pointer",children:e.jsx("img",{src:is,alt:"autonomOS",className:"h-[36px] sm:h-[42px] object-contain"})})}),e.jsx("nav",{className:"hidden sm:flex flex-1 items-center gap-1",children:p.map(n=>e.jsxs("button",{onClick:()=>o(n.id),title:n.tooltip,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all flex-shrink-0 touch-target-h ${l===n.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"} ${n.id==="faq"?"ring-2 ring-[#0BCAD9]/50 shadow-lg shadow-[#0BCAD9]/30 animate-pulse":""}`,children:[n.icon,e.jsx("span",{className:"font-medium text-sm whitespace-nowrap",children:n.label})]},n.id))}),e.jsx("div",{className:"flex-1 sm:hidden"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx("div",{className:"relative",children:e.jsxs("button",{className:"p-2 hover:bg-gray-800 rounded-lg transition-colors relative touch-target mobile-tap-highlight",children:[e.jsx($t,{className:"w-5 h-5 text-gray-400"}),m&&e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>t("login"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-200 transition-colors touch-target-h mobile-tap-highlight",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Login"})]}),e.jsxs("button",{onClick:()=>t("signup"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-cyan-600 hover:bg-cyan-500 text-white transition-colors touch-target-h mobile-tap-highlight",children:[e.jsx(Ze,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Sign Up"})]})]}),e.jsx("button",{onClick:()=>s(!i),className:"sm:hidden p-2 hover:bg-gray-800 rounded-lg transition-colors touch-target mobile-tap-highlight",children:i?e.jsx(Fe,{className:"w-6 h-6 text-gray-400"}):e.jsx(Vt,{className:"w-6 h-6 text-gray-400"})})]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 sm:hidden",onClick:()=>s(!1)}),e.jsx("div",{className:"fixed top-16 right-0 bottom-0 w-64 bg-gray-900 border-l border-gray-800 z-50 sm:hidden safe-x safe-bottom",children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsx("nav",{className:"flex flex-col gap-2 mb-6",children:p.map(n=>e.jsxs("button",{onClick:()=>{o(n.id),s(!1)},className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all touch-target-h mobile-tap-highlight ${l===n.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"} ${n.id==="faq"?"ring-2 ring-[#0BCAD9]/50 shadow-lg shadow-[#0BCAD9]/30 animate-pulse":""}`,children:[n.icon,e.jsx("span",{className:"font-medium text-base",children:n.label})]},n.id))}),e.jsx("div",{className:"border-t border-gray-800 pt-4 mt-auto",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>{t("login"),s(!1)},className:"flex items-center gap-2 px-4 py-3 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-200 transition-colors touch-target-h mobile-tap-highlight justify-center",children:[e.jsx(Ke,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Login"})]}),e.jsxs("button",{onClick:()=>{t("signup"),s(!1)},className:"flex items-center gap-2 px-4 py-3 rounded-lg bg-cyan-600 hover:bg-cyan-500 text-white transition-colors touch-target-h mobile-tap-highlight justify-center",children:[e.jsx(Ze,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Sign Up"})]})]})})]})})]})]})}function cs({children:t,currentPage:l,onNavigate:o,onAuthOpen:i}){return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-950",children:[e.jsx(ls,{onAuthOpen:i,currentPage:l,onNavigate:o}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-6",children:t})})]})}function Xe(){return e.jsx("div",{className:"h-full w-full -m-6",children:e.jsx("iframe",{src:"/architecture.html",className:"w-full h-full border-0",title:"AutonomOS Architecture Documentation",style:{height:"calc(100vh - 64px)"}})})}function ye({status:t,tooltip:l,className:o=""}){return t==="live"?e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-500/10 border border-green-500/30 ${o}`,title:l||"Live data from backend services",role:"status","aria-label":"Live data indicator",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse","aria-hidden":"true"}),e.jsx("span",{className:"text-xs font-medium text-green-400",children:"Live"})]}):null}const ds={"nlp-gateway":{status:"live",tooltip:"Connected to backend NLP services with real-time API responses"},"aam-monitor":{status:"live",tooltip:"Live AAM metrics from backend connectors and event streams"},"aam-connections":{status:"live",tooltip:"Real-time connection status from backend AAM service"},"aam-events":{status:"live",tooltip:"Live event stream from AAM monitoring"},"aam-intelligence":{status:"live",tooltip:"Real-time drift detection and repair metrics from AAM"},"dcl-graph":{status:"live",tooltip:"Live unified ontology from backend DCL engine"},"dcl-sankey":{status:"live",tooltip:"Real-time data flow visualization from DCL materialized views"},"aod-dashboard":{status:"live",tooltip:"Live external AOD Dashboard (aos-discover.replit.app)"},"finops-agent":{status:"live",tooltip:"Live FinOps agent demo (axiom-finops-demo.replit.app)"},"revops-agent":{status:"live",tooltip:"Live RevOps agent demo (autonomos-dcl-light.replit.app)"},"aoa-status":{status:"demo",tooltip:"Simulated orchestration metrics with client-side animations"},"agent-performance":{status:"demo",tooltip:"Mock agent performance data for demonstration purposes"},"xao-metrics":{status:"demo",tooltip:"Demo cross-agentic orchestration metrics"},"hitl-queue":{status:"demo",tooltip:"Static demonstration data for HITL workflow"},"discover-stats":{status:"demo",tooltip:"Fixed demo statistics for asset discovery pipeline"},"discover-pipeline":{status:"demo",tooltip:"Demo pipeline metrics showing typical processing flow"},"discover-triage":{status:"demo",tooltip:"Example HITL triage categories with static counts"},"discover-catalog":{status:"demo",tooltip:"Sample catalogued inventory data"},"discover-action-log":{status:"demo",tooltip:"Demo automated action log with sample events"}};function fe(t){return ds[t]}const ms={cto:"CTO",cro:"CRO",coo:"COO",cfo:"CFO"},hs={cto:zt,cro:Re,coo:rs,cfo:Rt},gs={cto:"blue",cro:"purple",coo:"green",cfo:"amber"};function se(t){return ms[t]}function yt(t){return hs[t]}function us(t){return gs[t]}const ps={cto:["Any connector drift today?","Show dependencies for checkout-service","List degraded connectors","What apps are missing owners?"],cro:["Show this quarter's pipeline by stage","What's win rate vs last quarter?","Which deals are slipping?","Top 10 opportunities by value"],coo:["Cloud spend MTD vs budget","Renewals due in 30 days","Top cost centers MTD","Vendors > $50k last 30d"],cfo:["Revenue MTD / QTD / YTD","Gross margin trend","Cash, burn, runway","DSO / DPO last 90d"]};function xs({persona:t}){const[l,o]=a.useState([]),[i,s]=a.useState(""),[m,p]=a.useState(!1),[n,b]=a.useState(null),w=ps[t],h=async(g,j)=>{g&&g.preventDefault();const k=j||i;if(!k.trim()||m)return;const u={role:"user",content:k};o(d=>[...d,u]),s(""),p(!0);try{const d=localStorage.getItem("token"),v=await(await fetch("/nlp/v1/query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:d?`Bearer ${d}`:""},body:JSON.stringify({query:k,persona:t})})).json();v.resolved_persona&&b(v.resolved_persona);let E="",z=[];v.matches?(E=v.matches.map((P,H)=>`${H+1}. ${P.title}
${P.content}
Score: ${P.score.toFixed(3)}`).join(`

`),z=v.matches.map(P=>`${P.title}: ${P.section}`)):v.response?E=v.response:E=JSON.stringify(v,null,2);const q={role:"assistant",content:E,trace_id:v.trace_id,sources:z};o(P=>[...P,q])}catch(d){const S={role:"assistant",content:`Error: ${d instanceof Error?d.message:"Failed to connect to NLP Gateway"}`};o(v=>[...v,S])}finally{p(!1)}},A=g=>{s(g),h(void 0,g)},c=()=>{o([]),s("")};return e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-900 to-blue-900 px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(dt,{className:"w-5 h-5 text-white"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"AOS NLP Gateway"}),e.jsx(ye,{...fe("nlp-gateway")}),l.length>0&&e.jsxs("button",{onClick:c,className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors",title:"Clear conversation",children:[e.jsx(Kt,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-300 bg-gray-700 bg-opacity-50 px-2 py-1 rounded flex items-center gap-1.5",children:[e.jsx("span",{className:"text-gray-400",children:"Resolved:"}),e.jsx("span",{className:"font-medium text-white",children:se(n||t)}),e.jsx("span",{className:"text-gray-400",children:"(Auto)"})]}),e.jsx("button",{className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-300 hover:text-white transition-colors group",title:"Queries are automatically routed to the appropriate domain expertise based on detected persona",children:e.jsx(Te,{className:"w-3.5 h-3.5 group-hover:text-blue-400"})})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("form",{onSubmit:h,className:"flex gap-3",children:[e.jsx("input",{type:"text",value:i,onChange:g=>s(g.target.value),placeholder:"Ask anything about AutonomOS services...",className:"flex-1 px-6 py-4 text-lg bg-gray-700 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:m,autoFocus:!0}),e.jsx("button",{type:"submit",disabled:m||!i.trim(),className:"px-6 py-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed rounded-lg text-white font-semibold transition-colors flex items-center gap-2 text-lg",children:m?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-5 h-5 animate-spin"}),"Thinking"]}):e.jsxs(e.Fragment,{children:[e.jsx(Zt,{className:"w-5 h-5"}),"Send"]})})]}),e.jsx("div",{className:"space-y-3 bg-gray-900 bg-opacity-50 rounded-lg p-4 border border-gray-700",children:l.length===0?e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"text-center space-y-4 max-w-2xl mx-auto",children:[e.jsxs("p",{className:"text-gray-400 text-sm mb-3",children:["Get started with these ",se(t)," prompts:"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:w.map((g,j)=>e.jsx("button",{onClick:()=>A(g),className:"p-2 bg-gray-800 hover:bg-gray-700 rounded text-left text-xs text-gray-300 transition-colors border border-gray-700",children:g},j))})]})}):l.map((g,j)=>e.jsxs("div",{className:`p-4 rounded-lg ${g.role==="user"?"bg-blue-900 bg-opacity-40 border border-blue-700":"bg-gray-800 border border-gray-600"}`,children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:g.role==="user"?"You":"NLP Gateway"}),g.trace_id&&e.jsx("span",{className:"font-mono text-gray-500",children:g.trace_id})]}),e.jsx("div",{className:"text-gray-200 whitespace-pre-wrap font-mono text-sm",children:g.content}),g.sources&&g.sources.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Sources:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.sources.map((k,u)=>e.jsx("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded text-gray-300",children:k},u))})]})]},j))}),e.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Tenant: demo-tenant | Env: prod | Auth: JWT"})]})]})}function ys(t){const[l,o]=a.useState(null),[i,s]=a.useState(!0),[m,p]=a.useState(null);return a.useEffect(()=>{let n=!0;async function b(){s(!0),p(null);try{const w=localStorage.getItem("token"),h=await fetch(`/nlp/v1/persona/summary?persona=${t}`,{method:"GET",headers:{Authorization:w?`Bearer ${w}`:"","Content-Type":"application/json"}});if(!h.ok)throw new Error(`Failed to fetch persona summary: ${h.statusText}`);const A=await h.json();n&&o(A)}catch(w){n&&p(w instanceof Error?w.message:"Unknown error")}finally{n&&s(!1)}}return b(),()=>{n=!1}},[t]),{data:l,loading:i,error:m}}function fs({persona:t}){const{data:l,loading:o,error:i}=ys(t);if(o)return e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-12",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[e.jsx(ie,{className:"w-6 h-6 animate-spin"}),e.jsxs("span",{children:["Loading ",se(t)," dashboard..."]})]})});if(i)return e.jsx("div",{className:"bg-gray-800 rounded-lg border border-red-700 p-6",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsxs("span",{children:["Failed to load dashboard: ",i]})]})});if(!l)return null;const s={blue:"from-blue-900 to-cyan-900",purple:"from-purple-900 to-pink-900",green:"from-green-900 to-emerald-900",amber:"from-amber-900 to-orange-900"},m=s[us(t)]||s.blue,p=yt(t);return e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx("div",{className:`bg-gradient-to-r ${m} px-6 py-4 border-b border-gray-700`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-8 h-8 text-white"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:[se(t)," Dashboard"]}),e.jsx("p",{className:"text-sm text-gray-300",children:"Role-specific KPIs and insights"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.tiles.map(n=>{const b=n.note==="stub",w=n.mock===!0,h=b?"div":"a";return e.jsxs(h,{href:b?void 0:n.href,className:`block p-4 rounded-lg border transition-colors ${b?"bg-gray-900 border-gray-700 opacity-60 cursor-not-allowed":"bg-gray-900 border-gray-700 hover:border-gray-600 hover:shadow-lg"}`,title:b?"Data source not connected yet":w?"Demo data (connect sources to replace)":n.title,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:n.title}),w&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-amber-900 bg-opacity-40 text-amber-400 border border-amber-700 rounded",children:"Demo"})]}),n.delta&&!b&&e.jsxs("span",{className:`text-xs flex items-center gap-1 ${n.delta.startsWith("+")?"text-green-400":"text-red-400"}`,children:[n.delta.startsWith("+")?e.jsx(Re,{className:"w-3 h-3"}):e.jsx(pt,{className:"w-3 h-3"}),n.delta]})]}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:n.value??e.jsx("span",{className:"text-gray-600",children:"—"})}),e.jsx("div",{className:"text-xs text-gray-500",children:n.timeframe}),b&&e.jsx("div",{className:"mt-2 text-xs text-amber-600 italic",children:"Coming soon"}),!b&&!w&&n.value===null&&e.jsx("div",{className:"mt-2 text-xs text-blue-400 italic",children:"Connecting..."})]},n.key)})}),e.jsxs("div",{className:`rounded-lg border p-4 ${l.table.note==="stub"?"bg-gray-900 border-gray-700 opacity-60":"bg-gray-900 border-gray-700"}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:l.table.title}),l.table.rows.length===0?e.jsx("div",{className:"text-center py-8",children:l.table.note==="stub"?e.jsxs("div",{className:"text-gray-500 flex flex-col items-center gap-2",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-600"}),e.jsx("p",{className:"text-lg mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This data source will be available in a future release"})]}):e.jsxs("div",{className:"text-gray-500 flex flex-col items-center gap-2",children:[e.jsx(ht,{className:"w-12 h-12 text-blue-600"}),e.jsx("p",{className:"text-lg mb-2",children:"No data yet"}),e.jsx("p",{className:"text-sm text-blue-400",children:"Connect your data source to see insights here"})]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-700",children:l.table.columns.map((n,b)=>e.jsx("th",{className:"text-left p-3 text-gray-400 font-medium",children:n},b))})}),e.jsx("tbody",{children:l.table.rows.map((n,b)=>e.jsx("tr",{className:"border-b border-gray-800 hover:bg-gray-800",children:n.map((w,h)=>e.jsx("td",{className:"p-3 text-gray-200",children:w},h))},b))})]})})]}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["Trace ID: ",l.trace_id]})]})]})}const bs={data_engineer:"cto",revops:"cro",finops:"coo",finance:"cfo"};function et(){const t=localStorage.getItem("aos.persona");if(t){const o=bs[t];if(o)return localStorage.setItem("aos.persona",o),{persona:o,source:"localStorage (migrated)"};if(["cto","cro","coo","cfo"].includes(t))return{persona:t,source:"localStorage"}}const l=localStorage.getItem("token");if(l)try{const o=l.split(".");if(o.length===3){let i=o[1].replace(/-/g,"+").replace(/_/g,"/");for(;i.length%4;)i+="=";const s=JSON.parse(atob(i));if(s.role&&["cto","cro","coo","cfo"].includes(s.role))return{persona:s.role,source:"jwt"}}}catch{}return{persona:"coo",source:"default"}}function vs(){const[t,l]=a.useState(()=>et().persona),o=["cto","cro","coo","cfo"];return a.useEffect(()=>{const{persona:i,source:s}=et();console.info(`[ControlCenter] persona=${i} source=${s}`)},[]),a.useEffect(()=>{localStorage.setItem("aos.persona",t)},[t]),e.jsxs("div",{className:"space-y-8 px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"bg-gray-800/40 border border-gray-700/50 rounded-lg px-4 py-2",children:e.jsxs("p",{className:"text-sm text-gray-400 text-center",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Demo Environment"})," • This interface demonstrates platform capabilities with static mock data"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Control Center"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Natural language interface to all AutonomOS services. Query your data, manage finances, investigate incidents, and discover dependencies—all through conversational AI with RAG-powered knowledge retrieval."})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Select Role:"}),e.jsx("div",{className:"flex gap-2",children:o.map(i=>{const s=yt(i);return e.jsxs("button",{onClick:()=>l(i),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${t===i?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(s,{className:"w-4 h-4"}),e.jsx("span",{children:se(i)})]},i)})})]})}),e.jsx(xs,{persona:t}),e.jsx(fs,{persona:t})]})}function ws(){const[t,l]=a.useState([{id:"1",asset_name:"aws-prod-db-01",asset_type:"Database",risk_level:"high",risk_score:.92,vendor:"AWS",discovered_at:new Date().toISOString(),reason:"Unencrypted database with public access detected",metadata:{region:"us-east-1",size:"2TB",connections:247}},{id:"2",asset_name:"shadow-saas-tool-42",asset_type:"SaaS",risk_level:"high",risk_score:.88,vendor:"Unknown",discovered_at:new Date().toISOString(),reason:"Unauthorized SaaS tool with company data access",metadata:{users:15,data_access:"full",cost_monthly:"$299"}},{id:"3",asset_name:"staging-api-gateway",asset_type:"Service",risk_level:"medium",risk_score:.65,vendor:"GCP",discovered_at:new Date().toISOString(),reason:"Staging environment with production credentials",metadata:{region:"us-central1",requests_per_day:1200}},{id:"4",asset_name:"legacy-payment-processor",asset_type:"Service",risk_level:"medium",risk_score:.58,vendor:"On-Premise",discovered_at:new Date().toISOString(),reason:"Outdated SSL certificate and deprecated API version",metadata:{ssl_expires:"2024-12-01",api_version:"1.2"}}]),[o,i]=a.useState(null),[s,m]=a.useState(""),[p,n]=a.useState("all"),b=c=>{o&&(console.log("[HITL] Decision made:",{asset_id:o.id,asset_name:o.asset_name,decision:c,notes:s}),l(t.filter(g=>g.id!==o.id)),i(null),m(""))},w=p==="all"?t:t.filter(c=>c.risk_level===p),h=t.filter(c=>c.risk_level==="high").length,A=t.filter(c=>c.risk_level==="medium").length;return e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-yellow-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center",children:e.jsx(pe,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"HITL Review Queue"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Human-in-the-Loop decisions for edge case assets"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:h}),e.jsx("div",{className:"text-xs text-gray-400",children:"High Risk"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:A}),e.jsx("div",{className:"text-xs text-gray-400",children:"Medium Risk"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:t.length}),e.jsx("div",{className:"text-xs text-gray-400",children:"Total Queue"})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="all"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["All (",t.length,")"]}),e.jsxs("button",{onClick:()=>n("high"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="high"?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["High Risk (",h,")"]}),e.jsxs("button",{onClick:()=>n("medium"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="medium"?"bg-yellow-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["Medium Risk (",A,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 uppercase mb-2",children:"Pending Review"}),w.length===0?e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-8 text-center",children:[e.jsx(Oe,{className:"w-12 h-12 text-green-400 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-gray-400",children:"No assets in queue"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["All ",p," risk items reviewed"]})]}):w.map(c=>e.jsxs("div",{onClick:()=>i(c),className:`bg-gray-900/60 rounded-lg p-4 cursor-pointer transition-all border-l-4 ${c.risk_level==="high"?"border-red-500 hover:bg-red-900/20":"border-yellow-500 hover:bg-yellow-900/20"} ${o?.id===c.id?"ring-2 ring-cyan-500":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"text-base font-medium text-white",children:c.asset_name}),e.jsx("span",{className:"text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded",children:c.asset_type})]}),e.jsx("div",{className:"text-sm text-gray-400",children:c.vendor})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.risk_level==="high"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:c.risk_level.toUpperCase()}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Score: ",(c.risk_score*100).toFixed(0),"%"]})]})]}),e.jsx("div",{className:"text-sm text-gray-300 mt-2 line-clamp-2",children:c.reason}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-gray-500",children:[e.jsx(ee,{className:"w-3 h-3"}),new Date(c.discovered_at).toLocaleString()]})]},c.id))]}),e.jsx("div",{className:"bg-gray-900/50 rounded-lg p-6 border border-gray-700",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(xe,{className:"w-5 h-5 text-cyan-400"}),e.jsx("h4",{className:"text-lg font-medium text-white",children:"Asset Review"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Asset Name"}),e.jsx("div",{className:"text-white font-medium",children:o.asset_name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Type"}),e.jsx("div",{className:"text-white",children:o.asset_type})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Vendor"}),e.jsx("div",{className:"text-white",children:o.vendor})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Risk Assessment"}),e.jsxs("div",{className:`text-white font-medium ${o.risk_level==="high"?"text-red-400":"text-yellow-400"}`,children:[o.risk_level.toUpperCase()," - ",(o.risk_score*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Reason"}),e.jsx("div",{className:"text-white text-sm",children:o.reason})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Metadata"}),e.jsx("div",{className:"bg-gray-800 rounded p-3 text-xs font-mono text-gray-300 space-y-1",children:Object.entries(o.metadata).map(([c,g])=>e.jsxs("div",{children:[e.jsxs("span",{className:"text-cyan-400",children:[c,":"]})," ",JSON.stringify(g)]},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Decision Notes (Optional)"}),e.jsx("textarea",{value:s,onChange:c=>m(c.target.value),placeholder:"Add notes about your decision...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-cyan-500 transition-colors resize-none",rows:3})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>b("approve"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Approve & Catalog"]}),e.jsxs("button",{onClick:()=>b("reject"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(os,{className:"w-5 h-5"}),"Reject & Quarantine"]}),e.jsxs("button",{onClick:()=>b("flag"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(pe,{className:"w-5 h-5"}),"Flag for Further Review"]})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(xe,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Select an asset from the queue to review"}),e.jsx("p",{className:"text-sm mt-1",children:"Make decisions on high and medium risk items"})]})})]})]})}function js(){return e.jsxs("div",{className:"space-y-6 px-4 sm:px-6 py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Discover"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Autonomously fingerprints your entire tech stack. Catalogs 100s of apps, databases, and tools without manual configuration. Infers relationships instantly. Creates secure architectural views using metadata only."})]}),e.jsxs("div",{className:"mb-8 bg-gray-800 rounded-lg border border-cyan-500/30 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-600/20 to-purple-600/20 border-b border-cyan-500/30 px-4 py-3",children:e.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-cyan-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11 4a1 1 0 10-2 0v4a1 1 0 102 0V7zm-3 1a1 1 0 10-2 0v3a1 1 0 102 0V8zM8 9a1 1 0 00-2 0v2a1 1 0 102 0V9z",clipRule:"evenodd"})}),e.jsx(ye,{...fe("aod-dashboard")}),e.jsx("a",{href:"https://aos-discover.replit.app/",target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-sm text-cyan-400 hover:text-cyan-300 underline font-normal",children:"Open in new tab ↗"})]})}),e.jsx("div",{className:"relative",style:{paddingBottom:"75%"},children:e.jsx("iframe",{src:"https://aos-discover.replit.app/",className:"absolute inset-0 w-full h-full",title:"AOS Discover Dashboard",allow:"fullscreen",style:{border:"none",backgroundColor:"#1a1a1a"}})})]}),e.jsx(ws,{})]})}function ft(){const t=a.useContext(ct);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Ns(){const{isAuthenticated:t}=ft(),[l,o]=a.useState([]),[i,s]=a.useState(!1),[m,p]=a.useState(null),[n,b]=a.useState({activeConnections:287,healingEvents:12,driftAlerts:3,llmCalls:1234,llmTokens:21e5,ragMappings:14876});a.useEffect(()=>{const u=setInterval(()=>{b(d=>({activeConnections:d.activeConnections+Math.floor(Math.random()*3)-1,healingEvents:Math.max(0,d.healingEvents+Math.floor(Math.random()*3)-1),driftAlerts:Math.max(0,d.driftAlerts+Math.floor(Math.random()*2)-.5),llmCalls:d.llmCalls+Math.floor(Math.random()*5),llmTokens:d.llmTokens+Math.floor(Math.random()*1e3),ragMappings:d.ragMappings+Math.floor(Math.random()*10)}))},3e3);return()=>clearInterval(u)},[]);const w=()=>{const u=localStorage.getItem(J);return u?{Authorization:`Bearer ${u}`}:{}},h=async()=>{s(!0);try{const u=await fetch(U.buildApiUrl("/aam/connectors"),{headers:w()});if(u.status===401){console.log("No tenant context — sign in or select tenant."),o([]);return}if(!u.ok)throw new Error("Failed to fetch connectors");const d=await u.json();o(d.connectors||[])}catch(u){console.error("Error fetching connectors:",u)}finally{s(!1)}};a.useEffect(()=>{h();const u=setInterval(()=>{m&&h()},3e4);return()=>clearInterval(u)},[t,m]);const A=u=>{p(m===u?null:u)},c=u=>{const d={running:"bg-green-500/10 text-green-500 border-green-500/20",active:"bg-green-500/10 text-green-500 border-green-500/20",healing:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",pending:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",stopped:"bg-red-500/10 text-red-500 border-red-500/20",failed:"bg-red-500/10 text-red-500 border-red-500/20",error:"bg-red-500/10 text-red-500 border-red-500/20",inactive:"bg-gray-500/10 text-gray-500 border-gray-500/20"},S=d[u.toLowerCase()]||d.inactive;return e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium border ${S}`,children:u.toUpperCase()})},g=u=>u?new Date(u).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",j=u=>{if(!u||u===0)return"0 B";const d=1024,S=["B","KB","MB","GB"],v=Math.floor(Math.log(u)/Math.log(d));return Math.round(u/Math.pow(d,v)*100)/100+" "+S[v]},k=u=>{if(!u)return e.jsx("span",{className:"text-xs text-gray-500",children:"No sync data"});const S={succeeded:"bg-green-500/10 text-green-500 border-green-500/20",running:"bg-blue-500/10 text-blue-500 border-blue-500/20",failed:"bg-red-500/10 text-red-500 border-red-500/20",pending:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20"}[u.toLowerCase()]||"bg-gray-500/10 text-gray-500 border-gray-500/20";return e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium border ${S}`,children:u.toUpperCase()})};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"AOS Connector Details"}),e.jsx("p",{className:"text-gray-400",children:"Individual connection details with mappings and drift status"})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-blue-900/20 to-green-900/20 rounded-xl border border-purple-500/30 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-purple-500/20 bg-black/40",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"w-6 h-6 text-purple-400"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:["AAM Adaptive API Mesh",e.jsx("span",{className:"px-2 py-0.5 bg-amber-500/20 border border-amber-500/40 rounded text-xs font-medium text-amber-400",children:"DEMO"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Real-time orchestration intelligence and self-healing infrastructure"})]})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Active Connections"})]}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:n.activeConnections}),e.jsx("div",{className:"text-xs text-gray-400",children:"Across 47 data sources"})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Self-Healing Events"})]}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:n.healingEvents}),e.jsx("div",{className:"text-xs text-gray-400",children:"Auto-repairs last hour"})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Schema Drift"})]}),e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:n.driftAlerts}),e.jsx("div",{className:"text-xs text-gray-400",children:"Alerts detected"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(xt,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"LLM Intelligence"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Total Calls"}),e.jsx("span",{className:"text-lg font-bold text-white",children:n.llmCalls.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Tokens Processed"}),e.jsxs("span",{className:"text-lg font-bold text-white",children:[(n.llmTokens/1e6).toFixed(2),"M"]})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500 animate-pulse",style:{width:"73%"}})})]})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(mt,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"RAG Learning"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Field Mappings"}),e.jsx("span",{className:"text-lg font-bold text-white",children:n.ragMappings.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Confidence Score"}),e.jsx("span",{className:"text-lg font-bold text-green-400",children:"86%"})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 animate-pulse",style:{width:"86%"}})})]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Connector Details"})]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[l.length," connection",l.length!==1?"s":""," configured"]})]}),i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(X,{className:"w-8 h-8 text-blue-400 animate-spin"})}):l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No connectors found. Please sign in to view your connections."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800/50 border-b border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Connection Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Mappings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Drift"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:l.map(u=>{const d=m===u.id;return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:u.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",u.id.substring(0,8),"..."]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 border border-blue-500/30 rounded text-xs font-medium text-blue-400",children:u.source_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c(u.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:u.mapping_count})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.has_drift?e.jsxs("span",{className:"px-2 py-1 bg-orange-500/10 border border-orange-500/30 rounded text-xs font-medium text-orange-400 flex items-center gap-1 w-fit",children:[e.jsx(pe,{className:"w-3 h-3"}),"DRIFT"]}):e.jsx("span",{className:"text-xs text-gray-500",children:"None"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>A(u.id),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"}),"Hide"]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"w-4 h-4"}),"Details"]})})})]},u.id),d&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-950/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Connection ID"}),e.jsx("code",{className:"text-gray-300 bg-gray-800 px-2 py-1 rounded text-xs",children:u.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Source Type"}),e.jsx("div",{className:"text-white",children:u.source_type})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Mapping Count"}),e.jsxs("div",{className:"text-white",children:[u.mapping_count," field mappings"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Drift Status"}),e.jsx("div",{className:"text-white",children:u.has_drift?e.jsx("span",{className:"text-orange-400",children:"Drift Detected"}):e.jsx("span",{className:"text-green-400",children:"No Drift"})})]}),u.last_event_type&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Last Event"}),e.jsx("div",{className:"text-white",children:u.last_event_type})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Event Time"}),e.jsx("div",{className:"text-white",children:g(u.last_event_at)})]})]})]}),u.last_sync_status&&e.jsxs("div",{className:"border-t border-gray-800 pt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-blue-400"}),"Last Sync Activity"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Sync Status"}),e.jsx("div",{children:k(u.last_sync_status)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Sync Time"}),e.jsx("div",{className:"text-white",children:g(u.last_sync_at)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Records Synced"}),e.jsx("div",{className:"text-white font-mono",children:u.last_sync_records!==null?u.last_sync_records.toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Data Transferred"}),e.jsx("div",{className:"text-white font-mono",children:j(u.last_sync_bytes)})]})]})]})]})})})]})})})]})})]})]})}function ks({isActive:t=!0}){const l=a.useRef(null),o=a.useRef(null),[i,s]=a.useState(null),[m,p]=a.useState(new Set),[n,b]=a.useState({width:0,height:0}),[w,h]=a.useState(!1),A=a.useRef(null);a.useEffect(()=>{if(!t)return;const g=async()=>{try{const u=await(await fetch(U.buildDclUrl("/state"))).json();s(u)}catch(k){console.error("Error fetching state:",k)}};g();const j=()=>g();return window.addEventListener("dcl-state-changed",j),()=>window.removeEventListener("dcl-state-changed",j)},[t]),a.useLayoutEffect(()=>{if(!(!i||!l.current||!o.current)&&!(!i.nodes||i.nodes.length===0)&&!(n.width===0||n.height===0))return h(!0),A.current&&cancelAnimationFrame(A.current),A.current=requestAnimationFrame(()=>{Ss(i,l.current,o.current,m),h(!1)}),()=>{A.current&&cancelAnimationFrame(A.current)}},[i,m,n]);const c=g=>{p(j=>new Set(j).add(g)),setTimeout(()=>{p(j=>{const k=new Set(j);return k.delete(g),k})},2e3)};return a.useEffect(()=>{const g=j=>{const{type:k,sourceId:u,targetId:d}=j.detail;(k==="new_source"||k==="source_removed"||k==="fault"||k==="schema_drift")&&c(`${u}-${d}`)};return window.addEventListener("dcl-graph-event",g),()=>window.removeEventListener("dcl-graph-event",g)},[]),a.useEffect(()=>{if(!o.current)return;let g=null;const j=new ResizeObserver(k=>{g&&cancelAnimationFrame(g),g=requestAnimationFrame(()=>{for(const u of k){const{width:d,height:S}=u.contentRect;d>0&&b({width:d,height:S||400})}})});return j.observe(o.current),()=>{g&&cancelAnimationFrame(g),j.disconnect()}},[]),!n.width||!n.height?e.jsx("div",{ref:o,className:"rounded-xl bg-gray-800/40 border border-gray-700 shadow-sm ring-1 ring-cyan-500/10 p-1 w-full md:min-h-[400px] flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center md:min-h-[400px]",children:e.jsx("div",{className:"text-sm text-gray-400 animate-pulse",children:"Loading graph..."})})}):e.jsx("div",{ref:o,className:"rounded-xl bg-gray-800/40 border border-gray-700 shadow-sm ring-1 ring-cyan-500/10 p-1 w-full md:min-h-[400px] flex items-center justify-center",children:e.jsx("svg",{ref:l,className:"w-full h-auto",style:{display:"block"}})})}function me(t,l){return{fill:"#1e293b",stroke:"#475569",strokeWidth:1,fillOpacity:1}}function Ss(t,l,o,i){const s=$(l);if(s.selectAll("*").remove(),!t.nodes||t.nodes.length===0){s.append("text").attr("x","50%").attr("y","50%").attr("text-anchor","middle").attr("fill","#94a3b8").attr("font-size","14px").text('No data available. Click "Connect & Map" to start.');return}const m=[],p=[],n={};let b=0;t.nodes.forEach(r=>{n[r.id]=b,m.push({name:r.label,type:r.type,id:r.id,sourceSystem:r.sourceSystem,parentId:r.parentId}),b++}),t.edges.forEach(r=>{if(n[r.source]!==void 0&&n[r.target]!==void 0){const y=t.nodes.find(D=>D.id===r.source),x=t.nodes.find(D=>D.id===r.target),C=r.edgeType??r.edge_type??"dataflow";p.push({source:n[r.source],target:n[r.target],value:1,edgeType:C,sourceSystem:y?.sourceSystem,targetType:x?.type,fieldMappings:r.field_mappings||[],edgeLabel:r.label||"",entityFields:r.entity_fields||[],entityName:r.entity_name||""})}});const w=o.getBoundingClientRect(),h=Math.max(w.width,320),A=window.innerWidth<768,c=Math.max(w.height,A?200:400),g={source_parent:0,source:1,ontology:2,agent:3},j=m.length,k=Math.min(c,100+j*40);s.attr("width",h).attr("height",k).attr("viewBox",`0 0 ${h} ${k}`);const d=St().nodeWidth(8).nodePadding(18).extent([[1,20],[h-1,k-20]])({nodes:m.map(r=>Object.assign({},r)),links:p.map(r=>Object.assign({},r))}),{nodes:S,links:v}=d,E=20,z=20,q=(h-E-z)/3,P=[E,E+q,E+q*2,h-z-8];S.forEach(r=>{const y=m.find(x=>x.name===r.name);if(y&&y.type&&g[y.type]!==void 0){const x=g[y.type];r.depth=x,r.x0=P[x],r.x1=P[x]+8}else r.depth=1,r.x0=P[1],r.x1=P[1]+8});const H=()=>{v.forEach(r=>{const y=r.source,x=r.target;r.y0=y.y0+(y.y1-y.y0)/2,r.y1=x.y0+(x.y1-x.y0)/2})};H();const W=S.filter(r=>{const y=m.find(x=>x.name===r.name);return y&&y.type==="ontology"});if(W.length>1){const r=W.reduce((D,O)=>D+(O.y1-O.y0),0),x=(k-r-80)/(W.length-1);let C=40;W.forEach(D=>{const O=D.y1-D.y0;D.y0=C,D.y1=C+O,C+=O+x}),H()}const R=S.filter(r=>{const y=m.find(x=>x.name===r.name);return y&&y.type==="agent"});if(R.length>0){const r=R.reduce((O,I)=>O+(I.y1-I.y0),0),y=40,x=(R.length-1)*y;let D=(k-r-x)/2;R.forEach(O=>{const I=O.y1-O.y0;O.y0=D,O.y1=D+I,D+=I+y}),H()}const V={dynamics:{parent:"#3b82f6",child:"#60a5fa"},salesforce:{parent:"#8b5cf6",child:"#a78bfa"},sap:{parent:"#10b981",child:"#34d399"},netsuite:{parent:"#f59e0b",child:"#fbbf24"},legacy_sql:{parent:"#ef4444",child:"#f87171"},snowflake:{parent:"#06b6d4",child:"#22d3ee"},supabase:{parent:"#14b8a6",child:"#2dd4bf"},mongodb:{parent:"#10b981",child:"#34d399"}},K=Math.min(...S.map(r=>r.x0)),N=Math.max(...S.map(r=>r.x1)),_=Math.min(...S.map(r=>r.y0)),B=Math.max(...S.map(r=>r.y1)),T=N-K,Y=B-_;let f=0;const M=s.append("g");S.forEach(r=>{const y=m.find(x=>x.name===r.name);if(y&&(y.type==="source_parent"||y.type==="ontology"||y.type==="agent")){let x=r.name||"Unknown";y.type==="ontology"&&(x=x.replace(/\s*\(unified\)\s*/i,"").trim()),y.type;const G=(M.append("text").attr("font-size",10).attr("font-family","system-ui, -apple-system, sans-serif").text(x).node()?.getComputedTextLength()||0)+4*2;f=Math.max(f,G)}}),M.remove();const F=8,Q=20,ve=2,$e=20,wt=Q+F+f,qe=K-$e,ze=_-Q,Be=T+$e+wt,we=Y+Q+ve;s.attr("viewBox",`${qe} ${ze} ${Be} ${we}`).attr("preserveAspectRatio","xMidYMid meet").attr("height",we),s.append("defs").append("clipPath").attr("id","graph-clip").append("rect").attr("x",qe).attr("y",ze).attr("width",Be).attr("height",we);const We=s.append("g").attr("clip-path","url(#graph-clip)");We.append("g").attr("fill","none").selectAll("path").data(v).join("path").attr("d",At()).attr("stroke",(r,y)=>{const x=p[y],C=t.nodes.find(O=>n[O.id]===x.source),D=m.find(O=>O.name===r.target.name);return x?.edgeType==="hierarchy"&&C?.type==="source_parent"?"#22c55e":x?.edgeType==="hierarchy"?"#475569":D&&D.type==="agent"?"#9333ea":x&&x.sourceSystem?V[x.sourceSystem]?.child||"#0bcad9":"#94a3b8"}).attr("stroke-width",r=>Math.min(Math.max(.5,r.width*.5),20)).attr("stroke-opacity",(r,y)=>{const x=p[y];if(x?.edgeType==="hierarchy")return .35;const C=t.nodes.find(I=>n[I.id]===x.source),D=t.nodes.find(I=>n[I.id]===x.target),O=`${C?.id}-${D?.id}`;return i.has(O)?.9:C&&(C.type==="source"||C.type==="source_parent")?.7:.4}).attr("class",(r,y)=>{const x=p[y],C=t.nodes.find(I=>n[I.id]===x.source),D=t.nodes.find(I=>n[I.id]===x.target),O=`${C?.id}-${D?.id}`;return i.has(O)?"animate-pulse":""}).style("cursor","pointer").on("mouseenter",function(r,y){const x=v.indexOf(y),C=p[x];C?.edgeType==="hierarchy"?$(this).attr("stroke-opacity",.6):$(this).attr("stroke-opacity",.7);const D=m.find(Z=>Z.name===y.source.name),O=m.find(Z=>Z.name===y.target.name),I=jt(D,O,C);$("body").selectAll(".sankey-edge-tooltip").data([null]).join("div").attr("class","sankey-edge-tooltip").style("position","fixed").style("background","rgba(15, 23, 42, 0.95)").style("color","#e2e8f0").style("padding","8px 12px").style("border-radius","6px").style("border","1px solid #475569").style("font-size","12px").style("pointer-events","none").style("z-index","10000").style("box-shadow","0 4px 6px rgba(0, 0, 0, 0.3)").style("max-width","400px").style("font-family","system-ui, -apple-system, sans-serif").html(I).style("left",r.pageX+10+"px").style("top",r.pageY-10+"px").style("opacity","1").style("display","block")}).on("mousemove",function(r){$(".sankey-edge-tooltip").style("left",r.pageX+10+"px").style("top",r.pageY-10+"px")}).on("mouseleave",function(r,y){const x=v.indexOf(y),C=p[x];if(C?.edgeType==="hierarchy")$(this).attr("stroke-opacity",.35);else{const D=t.nodes.find(O=>n[O.id]===C.source);D&&(D.type==="source"||D.type==="source_parent")?$(this).attr("stroke-opacity",.7):$(this).attr("stroke-opacity",.4)}$(".sankey-edge-tooltip").style("opacity","0").style("display","none")});const He=We.append("g").selectAll("g").data(S).join("g"),je=$("body").selectAll(".sankey-tooltip").data([null]).join("div").attr("class","sankey-tooltip").style("position","absolute").style("background","rgba(15, 23, 42, 0.95)").style("color","#e2e8f0").style("padding","8px 12px").style("border-radius","6px").style("border","1px solid #475569").style("font-size","12px").style("pointer-events","none").style("opacity","0").style("z-index","1000").style("box-shadow","0 4px 6px rgba(0, 0, 0, 0.3)");He.append("rect").attr("x",r=>r.x0).attr("y",r=>r.y0).attr("width",r=>r.x1-r.x0).attr("height",r=>Math.max(r.y1-r.y0,2)).attr("fill",r=>me().fill).attr("fill-opacity",r=>{const y=me(),x=m.find(C=>C.name===r.name);return x?.type==="ontology"?.9:x?.type==="source"?t.edges.some(D=>D.source===x.id&&(D.edgeType??D.edge_type)==="dataflow")?1:.5:x?.type==="agent"?0:x?.type==="source_parent"?.7:y.fillOpacity||.7}).attr("stroke",r=>me().stroke||"#475569").attr("stroke-width",r=>me().strokeWidth||0).attr("stroke-opacity",r=>{const y=m.find(x=>x.name===r.name);return y?.type==="source"?t.edges.some(C=>C.source===y.id&&(C.edgeType??C.edge_type)==="dataflow")?1:.6:y?.type==="agent"||y?.type==="source_parent"?1:0}).style("cursor","pointer").on("mouseenter",function(r,y){const x=m.find(D=>D.name===y.name);if(!x)return;x.type==="ontology"?$(this).attr("fill-opacity",1):(x.type==="source"||x.type==="agent")&&$(this).attr("stroke-opacity",1);let C=`<strong>${y.name}</strong><br/>`;C+=`Type: ${x.type}`,(x.type==="source"||x.type==="source_parent")&&(C+=`<br/>System: ${x.sourceSystem||"Unknown"}`),je.html(C).style("opacity","1").style("left",r.pageX+10+"px").style("top",r.pageY-10+"px")}).on("mousemove",function(r){je.style("left",r.pageX+10+"px").style("top",r.pageY-10+"px")}).on("mouseleave",function(r,y){const x=m.find(C=>C.name===y.name);if(x?.type==="ontology")$(this).attr("fill-opacity",.9);else if(x?.type==="source"){const C=t.edges.some(D=>D.source===x.id&&(D.edgeType??D.edge_type)==="dataflow");$(this).attr("fill-opacity",C?1:.5),$(this).attr("stroke-opacity",C?1:.6)}else x?.type==="agent"?$(this).attr("fill-opacity",0).attr("stroke-opacity",1):x?.type==="source_parent"?$(this).attr("fill-opacity",.7).attr("stroke-opacity",1):$(this).attr("fill-opacity",.7);je.style("opacity","0")}).on("click",async function(r,y){const x=m.find(C=>C.name===y.name);if(x)try{const D=await(await fetch(U.buildDclUrl(`/preview?node=${x.id}`))).json();console.log("Preview data for",x.id,":",D),window.dispatchEvent(new CustomEvent("sankey-node-click",{detail:{node:x,preview:D}}))}catch(C){console.error("Error fetching preview:",C)}});const Ne=[];He.each(function(r){const y=m.find(x=>x.name===r.name);if(y&&(y.type==="source_parent"||y.type==="ontology"||y.type==="agent")){let x=r.name||"Unknown";y.type==="ontology"&&(x=x.replace(/\s*\(unified\)\s*/i,"").trim()),y.type;const C=4,D=10,O=16,I=$(this).append("text").attr("font-size",D).attr("font-family","system-ui, -apple-system, sans-serif").text(x),G=I.node()?.getComputedTextLength()||0;I.remove();const Z=G+C*2,ke=r.x1+F,Se=(r.y0+r.y1)/2;let ce="#475569";y.type==="source_parent"?ce="#22c55e":y.type==="ontology"?ce="#60a5fa":y.type==="agent"&&(ce="#9333ea"),Ne.push({element:this,nodeData:y,d:r,label:x,fontSize:D,pillHeight:O,pillWidth:Z,padding:C,xPos:ke,yPos:Se,borderColor:ce})}});const le=new Map;Ne.forEach(r=>{const y=Math.round(r.xPos);le.has(y)||le.set(y,[]),le.get(y).push(r)}),le.forEach(r=>{r.sort((x,C)=>x.yPos-C.yPos);const y=4;for(let x=1;x<r.length;x++){const C=r[x-1],D=r[x],O=C.yPos+C.pillHeight/2,I=D.yPos-D.pillHeight/2;if(O+y>I){const G=O+y-I;D.yPos+=G}}}),Ne.forEach(r=>{const y=$(r.element).append("g").attr("class","node-label-group").attr("transform",`translate(${r.d.x1+8}, ${r.yPos})`);y.append("rect").attr("x",0).attr("y",-r.pillHeight/2).attr("width",r.pillWidth).attr("height",r.pillHeight).attr("rx",r.pillHeight/2).attr("ry",r.pillHeight/2).attr("fill","#1e293b").attr("stroke",r.borderColor).attr("stroke-width",1.5).attr("fill-opacity",.9).attr("stroke-opacity",.9),y.append("text").attr("x",r.pillWidth/2).attr("y",0).attr("text-anchor","middle").attr("dominant-baseline","central").attr("fill","#e2e8f0").attr("font-size",r.fontSize).attr("font-family","system-ui, -apple-system, sans-serif").attr("font-weight","500").attr("pointer-events","none").text(r.label)});function jt(r,y,x){if(!r||!y)return"Data Flow";const C=r.name||"Unknown",D=y.name||"Unknown";let O="";r.type==="source_parent"&&y.type==="source"?O="System to table connection":r.type==="source"&&y.type==="ontology"?O="Raw data mapped to unified schema":r.type==="ontology"&&y.type==="agent"?O="Ontology field consumed by agent":O="Data flow";let I=`
      <strong>Data Flow</strong><br>
      <span style="color: #94a3b8; font-size: 10px;">${O}</span><br>
      <div style="margin-top: 4px; padding-top: 4px; border-top: 1px solid #475569;">
        <span style="color: #60a5fa;">From:</span> ${C}<br>
        <span style="color: #34d399;">To:</span> ${D}
      </div>
    `;if(r.type==="source_parent"&&y.type==="source"&&x?.tableFields?.length&&(I+=`
        <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #475569;">
          <strong style="color: #a78bfa; font-size: 10px;">Table Fields:</strong><br>
          <div style="max-height: 120px; overflow-y: auto; margin-top: 4px;">
      `,x.tableFields.forEach(G=>{I+=`
          <div style="font-size: 10px; margin: 2px 0; color: #cbd5e1;">
            <span style="color: #60a5fa;">•</span> ${G}
          </div>
        `}),I+="</div></div>"),x?.fieldMappings?.length&&(I+=`
        <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #475569;">
          <strong style="color: #a78bfa; font-size: 10px;">Field Mappings:</strong><br>
          <div style="max-height: 120px; overflow-y: auto; margin-top: 4px;">
      `,x.fieldMappings.forEach(G=>{const Z=G.source||"N/A",ke=G.onto_field||"N/A",Se=G.confidence?`(${Math.round(G.confidence*100)}%)`:"";I+=`
          <div style="font-size: 10px; margin: 2px 0; color: #cbd5e1;">
            <span style="color: #60a5fa;">${Z}</span> → <span style="color: #34d399;">${ke}</span> <span style="color: #94a3b8;">${Se}</span>
          </div>
        `}),I+="</div></div>"),r.type==="ontology"&&y.type==="agent"&&x?.entityFields?.length){const G=x.entityName||"entity";I+=`
        <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #475569;">
          <strong style="color: #a78bfa; font-size: 10px;">Unified ${G.replace("_"," ").toUpperCase()} Fields:</strong><br>
          <div style="max-height: 120px; overflow-y: auto; margin-top: 4px;">
      `,x.entityFields.forEach(Z=>{I+=`
          <div style="font-size: 10px; margin: 2px 0; color: #cbd5e1;">
            <span style="color: #34d399;">•</span> ${Z}
          </div>
        `}),I+="</div></div>"}return I}}function As(){const[t,l]=a.useState(!1),o=a.useRef(null);return a.useEffect(()=>{const i=o.current;if(!i)return;const s=new IntersectionObserver(m=>{m.forEach(p=>{p.isIntersecting&&!t&&(console.log("[DCL Graph] Now visible, activating lazy load..."),l(!0))})},{root:null,rootMargin:"100px",threshold:.01});return s.observe(i),()=>{i&&s.unobserve(i),s.disconnect()}},[t]),e.jsx("div",{ref:o,className:"w-full",children:t?e.jsx(ks,{isActive:t}):e.jsx("div",{className:"rounded-xl bg-gray-800/40 border border-gray-700 shadow-sm ring-1 ring-cyan-500/10 p-8 w-full md:min-h-[400px] flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-400",children:"Scroll to view interactive graph..."})})})}const Cs="auth_token_expiry",ne="aos.dclState.v1",Ds=600*1e3,bt=1;function Me(){try{const t=localStorage.getItem(ne);if(!t)return null;const l=JSON.parse(t);if(l.version!==bt)return console.log("[DCL Cache] Version mismatch, ignoring cache"),localStorage.removeItem(ne),null;if(!l.state?.nodes||l.state.nodes.length===0)return console.log("[DCL Cache] Empty graph in cache, ignoring"),null;const o=Date.now()-l.timestamp,i=o>Ds;return console.log(`[DCL Cache] Loaded cached state (age: ${Math.round(o/1e3)}s, stale: ${i})`),{state:l.state,isStale:i}}catch(t){return console.error("[DCL Cache] Failed to load cache:",t),localStorage.removeItem(ne),null}}function tt(t){try{if(!t?.nodes||t.nodes.length===0)return;const l={state:t,timestamp:Date.now(),version:bt};localStorage.setItem(ne,JSON.stringify(l)),console.log("[DCL Cache] State cached successfully")}catch(l){console.error("[DCL Cache] Failed to save cache:",l)}}function Ms(){try{localStorage.removeItem(ne),console.log("[DCL Cache] Cache cleared")}catch(t){console.error("[DCL Cache] Failed to clear cache:",t)}}function Ls(){const[t,l]=a.useState(()=>{const d=Me();return d?(console.log("[DCL] Hydrated from cache"),d.state):null}),[o,i]=a.useState(()=>!Me()),[s,m]=a.useState(()=>{const d=Me();return d?d.isStale:!1}),[p,n]=a.useState(null),b=a.useRef(null),w=a.useRef(null),h=a.useRef(0),A=10,c=1e3,g=a.useRef(!1),j=a.useCallback(d=>{try{if(d.type==="rag_coverage_check"){console.log("[DCL] 🎯 RAG Coverage Check:",{source:d.source,coverage:`${d.coverage_pct}%`,matched:`${d.matched_count}/${d.total_count} fields`,recommendation:d.recommendation,savings:`$${d.estimated_cost_savings}`,missing_fields:d.missing_fields}),console.log(`💡 ${d.message}`),console.log(`   Recommendation: ${d.recommendation==="skip"?"Skip LLM (use RAG + heuristics)":"Proceed with LLM"}`),console.log(`   Cost savings if skipped: ~$${d.estimated_cost_savings}`);return}if(!d.data)return;const S={events:d.data.events||[],nodes:d.data.nodes||[],edges:d.data.edges||[],confidence:d.data.confidence||null,llm:{calls:d.data.llmCalls,tokens:d.data.llmTokens,calls_saved:d.data.llmCallsSaved||0},preview:{sources:{},ontology:{},connectionInfo:null},rag:d.data.ragContext,selected_sources:d.data.sources||[],selected_agents:d.data.agents||[],dev_mode:d.data.devMode,blended_confidence:d.data.blendedConfidence};l(S),tt(S),n(null),i(!1),m(!1)}catch(S){console.error("Error processing WebSocket message:",S),n(S instanceof Error?S:new Error("Failed to process message"))}},[]),k=a.useCallback(()=>{try{let d;if(U.BASE_URL&&U.BASE_URL.match(/^https?:\/\//))d=U.buildDclUrl("/ws").replace(/^http/,"ws");else{const v=window.location.protocol==="https:"?"wss:":"ws:",E=window.location.host;d=`${v}//${E}/dcl/ws`}console.log("[DCL WebSocket] Connecting to:",d);const S=new WebSocket(d);b.current=S,S.onopen=()=>{console.log("[DCL WebSocket] Connected"),h.current=0;const v=localStorage.getItem(J);if(v)try{S.send(JSON.stringify({type:"auth",token:v}))}catch(E){console.error("[DCL WebSocket] Failed to send auth token:",E)}},S.onmessage=v=>{try{const E=JSON.parse(v.data);console.log("[DCL WebSocket] Received message:",E.type),j(E)}catch(E){console.error("[DCL WebSocket] Failed to parse message:",E),console.error("[DCL WebSocket] Raw message data:",v.data?.substring(0,200))}},S.onerror=v=>{console.error("[DCL WebSocket] Error:",v),n(new Error("WebSocket connection error"))},S.onclose=v=>{if(console.log("[DCL WebSocket] Disconnected:",v.code,v.reason),b.current=null,h.current<A){const E=Math.min(c*Math.pow(2,h.current),3e4);console.log(`[DCL WebSocket] Reconnecting in ${E}ms (attempt ${h.current+1}/${A})`),w.current=setTimeout(()=>{h.current++,k()},E)}else console.error("[DCL WebSocket] Max reconnection attempts reached"),n(new Error("WebSocket connection lost. Please refresh the page."))}}catch(d){console.error("[DCL WebSocket] Failed to create WebSocket:",d),n(d instanceof Error?d:new Error("Failed to create WebSocket"))}},[j]),u=a.useCallback(async()=>{try{const d=localStorage.getItem(J),S={};d&&(S.Authorization=`Bearer ${d}`);const v=await fetch(U.buildDclUrl("/state"),{headers:S});if(!v.ok){if(v.status===401&&d){console.log("[DCL State] 401 Unauthorized - clearing auth and cache"),localStorage.removeItem(J),localStorage.removeItem(Cs),Ms(),window.dispatchEvent(new CustomEvent("auth:unauthorized"));return}throw new Error(`Failed to fetch state: ${v.statusText}`)}const E=await v.json();l(E),tt(E),n(null),i(!1),m(!1)}catch(d){n(d instanceof Error?d:new Error("Unknown error")),console.error("Error fetching DCL state:",d)}},[]);return a.useEffect(()=>(k(),g.current||(g.current=!0,console.log("[DCL] Triggering initial state fetch for refresh"),u()),()=>{console.log("[DCL WebSocket] Cleaning up..."),w.current&&(clearTimeout(w.current),w.current=null),b.current&&(b.current.close(),b.current=null)}),[k,u]),{state:t,loading:o,error:p,isStale:s,refetch:u}}function Es({text:t,speed:l=30}){const[o,i]=a.useState(""),[s,m]=a.useState(0);return a.useEffect(()=>{if(s<t.length){const p=setTimeout(()=>{i(n=>n+t[s]),m(n=>n+1)},l);return()=>clearTimeout(p)}},[s,t,l]),a.useEffect(()=>{i(""),m(0)},[t]),e.jsx("span",{children:o})}function _s({useAamSource:t,onModeChange:l,selectedSources:o,selectedAgents:i}){const[s,m]=a.useState(!1),[p,n]=a.useState(!1),[b,w]=a.useState(!1),{state:h,isStale:A}=Ls(),[c,g]=a.useState([]),[j,k]=a.useState("gemini-2.5-flash"),[u,d]=a.useState(0),[S,v]=a.useState(0),[E,z]=a.useState(!1),[q,P]=a.useState(0),[H,W]=a.useState(0),R=ot.useRef(!1),V=()=>{const f=localStorage.getItem(J);return f?{Authorization:`Bearer ${f}`}:{}},K=()=>{console.log("[DCL] 401 Unauthorized - clearing auth state"),localStorage.removeItem(J),localStorage.removeItem("auth_token_expiry"),window.dispatchEvent(new CustomEvent("auth:unauthorized"))},N=()=>{const f=o.length>0?o:t?Je():oe();return console.log("[DCL] Current sources from parent:",f),f.join(",")},_=()=>{const f=i.length>0?i:ge();return console.log("[DCL] Current agents from parent:",f),f.join(",")},B=()=>{const f=t?Je():oe(),M=["revops_pilot","finops_pilot"];localStorage.setItem("aos.selectedSources",JSON.stringify(f)),localStorage.setItem("aos.selectedAgents",JSON.stringify(M)),console.log("[DCL] ✅ Selected ALL sources and agents:",f,M)};a.useEffect(()=>{h&&m(h.dev_mode||!1)},[h?.dev_mode]),a.useEffect(()=>{const f=M=>{const Q=M.detail?.source;console.log(`[DCL] Received trigger-run event from: ${Q}`),console.log(`[DCL] Current selections: sources=${o.length}, agents=${i.length}`),p||T()};return window.addEventListener("dcl:trigger-run",f),()=>{window.removeEventListener("dcl:trigger-run",f)}},[p,o,i]),a.useEffect(()=>{if(!h)return;(h.events.length!==c.length||h.events.some((M,F)=>c[F]?.text!==M))&&(h.events.length===0?g([]):g(h.events.map((M,F)=>({text:M,isTyping:F===h.events.length-1,key:`${F}-${M.substring(0,20)}-${Date.now()}`}))))},[h?.events,c]),a.useEffect(()=>{A||(R.current=!1)},[A]),a.useEffect(()=>{let f;return E&&p&&(f=setInterval(()=>{d(M=>M+.01)},10)),()=>{f&&clearInterval(f)}},[E,p]),a.useEffect(()=>{let f;return p&&b&&(f=setInterval(async()=>{try{const M=await fetch(U.buildDclUrl("/state"),{headers:{...V()}});if(M.ok){const Q=(await M.json()).llm?.calls||0,ve=Math.max(0,Q-H);P(ve)}}catch(M){console.error("[DCL] Error polling state for LLM count:",M)}},2e3)),()=>{f&&clearInterval(f)}},[p,b,H]),a.useEffect(()=>{let f;if(p&&b){v(0);let M=0;f=setInterval(()=>{M<30?M+=2:M<60?M+=1:M<90?M+=.5:M<95&&(M+=.2),v(Math.min(M,95))},100)}else!p&&S>0&&S<100&&v(100);return()=>{f&&clearInterval(f)}},[p,b,S]);const T=async()=>{d(0),v(0),P(0),z(!0),n(!0),w(!0);try{const f=await fetch(U.buildDclUrl("/state"),{headers:{...V()}});if(f.ok){const F=(await f.json()).llm?.calls||0;W(F),console.log("[DCL] Starting LLM baseline:",F)}}catch(f){console.error("[DCL] Failed to fetch starting LLM count:",f),W(0)}try{const f=N(),M=_(),F=await fetch(U.buildDclUrl(`/connect?sources=${f}&agents=${M}&llm_model=${j}`),{headers:{...V()}});if(F.status===401){K(),console.error("[DCL] Session expired. Please login again."),n(!1);return}if(!F.ok){const Q=await F.json().catch(()=>({detail:"Request failed"}));throw new Error(Q.detail||`HTTP error! status: ${F.status}`)}await F.json(),console.log("[DCL] Connection successful"),window.dispatchEvent(new Event("dcl-state-changed"))}catch(f){console.error("[DCL] Error running:",f)}finally{setTimeout(()=>{n(!1)},1500)}},Y=async()=>{try{const f=!s,M=await fetch(U.buildDclUrl(`/toggle_dev_mode?enabled=${f}`),{headers:{...V()}});if(M.status===401){K(),console.error("[DCL] Session expired. Please login again.");return}if(!M.ok){const Q=await M.json().catch(()=>({detail:"Request failed"}));throw new Error(Q.detail||`HTTP error! status: ${M.status}`)}const F=await M.json();m(F.dev_mode),console.log(`[DCL] Dev mode toggled: ${F.dev_mode?"ON":"OFF"}`),window.dispatchEvent(new Event("dcl-state-changed"))}catch(f){console.error("[DCL] Error toggling dev mode:",f)}};return e.jsxs("div",{id:"dcl-graph-container",className:"bg-gray-900 rounded-xl border border-gray-800 p-2 sm:p-3 -mt-[5px]",children:[b&&e.jsxs("div",{className:"relative -mx-2 sm:-mx-3 -mt-2 sm:-mt-3 mb-3 h-4 bg-gray-800 rounded-t-xl overflow-hidden",children:[e.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 transition-all duration-300 ease-out",style:{width:`${S}%`}}),e.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-transparent via-white/20 to-transparent",style:{width:`${S}%`,animation:"shimmer 1.5s linear infinite",backgroundSize:"200% 100%"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-[10px] tracking-wide drop-shadow-lg",children:[Math.round(S),"% Complete"]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-cyan-400 cursor-help",title:"The Data Connectivity Layer (DCL) links heterogeneous data sources without migrations or ETL. It maps entities to a unified ontology for domain agents to act on.",children:"Data Connection Layer (DCL)"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Provides persistent, versioned entity mappings so AI Agents can reason with consistent, validated inputs."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_300px] gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"relative w-full bg-gradient-to-br from-blue-900/20 to-purple-900/20 rounded-lg border border-blue-500/30 p-2 sm:p-3 backdrop-blur-sm mb-4",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-500/5 rounded-lg animate-pulse"}),e.jsxs("div",{className:"relative z-10 flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-500/50 flex-shrink-0",children:e.jsx(X,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse"})}),e.jsxs("div",{className:"flex-1 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center sm:justify-between gap-2 sm:gap-3 mb-3 sm:mb-1",children:[e.jsx("h3",{className:"text-sm sm:text-sm font-medium text-white",children:"Ontology Graph"}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:Y,className:`touch-target-h mobile-tap-highlight px-3 py-2 sm:px-2 sm:py-1 rounded text-xs sm:text-[10px] transition-all ${s?"bg-amber-600/20 border border-amber-500/40 text-amber-300 hover:bg-amber-600/30":"bg-emerald-600/20 border border-emerald-500/40 text-emerald-300 hover:bg-emerald-600/30"}`,title:"Toggle between Production Mode (heuristics only) and Dev Mode (AI + RAG active)",children:e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s?"bg-amber-400 animate-pulse":"bg-emerald-400"}`}),e.jsx("span",{className:"whitespace-nowrap",children:s?"Dev Mode":"Prod Mode"})]})}),e.jsxs("select",{onChange:f=>{if(f.target.value==="select"){const M=document.getElementById("data-sources-section");M&&M.scrollIntoView({behavior:"smooth",block:"start"})}else f.target.value==="all"&&B();f.target.value="all"},disabled:p,className:"touch-target-h mobile-tap-highlight px-3 py-2 sm:px-2 sm:py-1 bg-gray-800 border border-gray-700 rounded text-xs sm:text-[10px] text-white focus:outline-none focus:border-blue-500 hover:border-gray-600 transition-colors disabled:opacity-50 cursor-pointer",title:"Select data sources",children:[e.jsx("option",{value:"all",children:"All Sources"}),e.jsx("option",{value:"select",children:"Select Sources..."})]}),e.jsxs("select",{value:j,onChange:f=>k(f.target.value),disabled:p,className:"touch-target-h mobile-tap-highlight px-3 py-2 sm:px-2 sm:py-1 bg-gray-800 border border-gray-700 rounded text-xs sm:text-[10px] text-white focus:outline-none focus:border-blue-500 hover:border-gray-600 transition-colors disabled:opacity-50 cursor-pointer",title:"Select LLM model for intelligent mapping",children:[e.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),e.jsx("option",{value:"gpt-5-mini",children:"GPT-5 mini ⚡"}),e.jsx("option",{value:"gpt-5-nano",children:"GPT-5 nano 🚀"})]}),e.jsx("button",{onClick:T,disabled:p,className:"touch-target-h mobile-tap-highlight flex items-center gap-1.5 px-4 sm:px-2 py-2 sm:py-1 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 rounded-md text-xs sm:text-[10px] text-white shadow-lg shadow-emerald-500/30 transition-all disabled:opacity-50 justify-center",title:"Run mapping with selected configuration",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-3 w-3 sm:h-3 sm:w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-3 h-3 sm:w-3 sm:h-3"}),e.jsx("span",{children:"Run"})]})})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-[10px] sm:text-[10px] text-blue-300",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${s?"bg-purple-400 animate-pulse":"bg-gray-500"}`}),e.jsxs("span",{children:["LLM Calls: ",q]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3 text-blue-400"}),e.jsxs("span",{className:"whitespace-nowrap",children:[Ot().length," sources → ",ge().length," agent",ge().length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"RAG mappings retrieved from inventory",children:[e.jsx("svg",{className:"w-3 h-3 text-teal-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("span",{children:["RAG: ",h?.rag?.mappings_retrieved||0]})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"LLM calls saved via RAG inventory",children:[e.jsx("svg",{className:"w-3 h-3 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:["Saved: ",h?.llm?.calls_saved||0]})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"Blended confidence from graph and RAG",children:[e.jsx("svg",{className:"w-3 h-3 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{children:["Confidence: ",h?.blended_confidence?Math.round(h.blended_confidence*100):"--","%"]})]}),(E||u>0)&&e.jsxs("div",{className:"flex items-center gap-1 bg-blue-900/30 px-2 py-0.5 rounded",children:[e.jsx("svg",{className:"w-3 h-3 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"font-mono",children:[u.toFixed(2),"s"]})]})]})]})]})]}),e.jsx("div",{className:"relative pb-2 md:min-h-[500px]",children:e.jsx(As,{})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex-1 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500 flex items-center justify-center text-white text-xs",children:"📝"}),e.jsx("span",{className:"text-white text-sm cursor-help",title:"Chronological event log showing every decision, mapping, and execution step. Functions as a transparent, auditable trail of autonomous system behavior.",children:"Narration"}),e.jsxs("span",{className:"ml-auto text-xs bg-purple-600 text-white px-2 py-0.5 rounded-full",children:[h?.events.length||0," events"]})]}),e.jsx("div",{className:"text-xs space-y-1 overflow-y-auto max-h-[200px]",children:c.length===0?e.jsx("div",{className:"text-gray-500 italic text-[11px]",children:"No events yet. Start mapping to see the narration."}):c.map((f,M)=>({...f,eventNumber:M+1})).reverse().map(f=>e.jsxs("div",{className:"text-gray-300 leading-relaxed",children:[e.jsxs("span",{className:"text-purple-400 mr-1",children:["[",f.eventNumber,"]"]}),f.isTyping?e.jsx(Es,{text:f.text,speed:30}):f.text]},f.key))})]}),e.jsxs("div",{className:"rounded-lg p-4 bg-gradient-to-br from-teal-950 to-cyan-950 border border-teal-700/30 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-teal-500 flex items-center justify-center text-white text-xs",children:"🧠"}),e.jsx("span",{className:"text-white text-sm cursor-help",title:"Retrieval-Augmented Generation (RAG) component that enriches context for agent reasoning. It stores embeddings, retrieves related knowledge, and continuously self-tunes mappings.",children:"RAG Learning Engine"}),e.jsxs("span",{className:"ml-auto text-xs bg-teal-600 text-white px-2 py-0.5 rounded-full",children:[h?.rag?.total_mappings||0," stored"]})]}),e.jsx("div",{className:"text-xs space-y-2 overflow-y-auto overflow-x-hidden min-h-[150px] max-h-[400px]",children:!h?.rag?.retrievals||h.rag.retrievals.length===0?e.jsx("div",{className:"text-teal-300/70 italic text-[11px]",children:"No context retrieved yet. Connect a source to see RAG retrieve historical mappings."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-white mb-2 text-[11px]",children:["Retrieved ",h.rag.last_retrieval_count," similar mappings:"]}),h.rag.retrievals.map((f,M)=>e.jsxs("div",{className:"mb-2 pb-2 border-b border-teal-800/30 last:border-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("div",{className:"text-white text-[11px]",children:f.source_field}),e.jsxs("div",{className:"text-[10px] text-white",children:[(f.similarity*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-teal-300 text-[10px] mb-1",children:["→ ",f.ontology_entity]}),e.jsx("div",{className:"w-full bg-slate-900/50 rounded-sm h-1.5 overflow-hidden mb-1",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-teal-500 to-cyan-400 transition-all",style:{width:`${(f.similarity*100).toFixed(0)}%`}})}),e.jsxs("div",{className:"text-[9px] text-teal-400/70",children:["from: ",f.source_system||"unknown"]})]},M))]})})]})]})]})]})}const Le=lt;function Os(t){switch(t){case"CRM":return e.jsx(as,{className:"w-5 h-5 text-blue-400"});case"ERP":return e.jsx(es,{className:"w-5 h-5 text-green-400"});case"Database":return e.jsx(te,{className:"w-5 h-5 text-red-400"});case"Warehouse":return e.jsx(ns,{className:"w-5 h-5 text-cyan-400"});default:return e.jsx(Xt,{className:"w-5 h-5 text-gray-400"})}}function Is(t){switch(t){case"CRM":return"bg-blue-900/30 border-blue-700/50";case"ERP":return"bg-green-900/30 border-green-700/50";case"Database":return"bg-red-900/30 border-red-700/50";case"Warehouse":return"bg-cyan-900/30 border-cyan-700/50";default:return"bg-gray-900/30 border-gray-700/50"}}function Ps(){const[t,l]=a.useState(oe()),[o,i]=a.useState(Ie()),[s,m]=a.useState(""),[p,n]=a.useState(!1),[b,w]=a.useState(!1),[h,A]=a.useState(null),[c,g]=a.useState(!0),[j,k]=a.useState(null),[u,d]=a.useState(""),[S,v]=a.useState(new Set),E=p?_e:Ee;a.useEffect(()=>{const N=p?_e.map(_=>_.value):Ee.map(_=>_.value);l(_=>{const B=_.filter(Y=>N.includes(Y)),T=B.length>0?B:N;return localStorage.setItem("aos.selectedSources",JSON.stringify(T)),console.log(`[Ontology] Smart merge for ${p?"AAM":"Legacy"} mode:`,T),T})},[p]),a.useEffect(()=>{b&&(console.log("[Ontology] ✅ Mode toggled, selections updated. User must click Run to execute."),w(!1))},[b]),a.useEffect(()=>{i(ge())},[]),a.useEffect(()=>{localStorage.setItem("aos.selectedSources",JSON.stringify(t))},[t]),a.useEffect(()=>{localStorage.setItem("aos.selectedAgents",JSON.stringify(o))},[o]),a.useEffect(()=>{z()},[]);const z=async()=>{g(!0),k(null);try{const N=await fetch(U.buildDclUrl("/ontology_schema"));if(!N.ok)throw new Error(`Failed to fetch ontology schema: ${N.statusText}`);const _=await N.json();A(_)}catch(N){console.error("Error fetching ontology schema:",N),k(N instanceof Error?N.message:"Failed to load ontology schema")}finally{g(!1)}},q=N=>{l(_=>_.includes(N)?_.filter(B=>B!==N):[..._,N])},P=N=>{i(_=>_.includes(N)?_.filter(B=>B!==N):[..._,N])},H=()=>{const N=E.map(_=>_.value);l(N),i(Le.map(_=>_.value))},W=()=>{s.trim()&&(window.location.hash="#/data-lineage",sessionStorage.setItem("lineageSearchQuery",s))},R=N=>{v(_=>{const B=new Set(_);return B.has(N)?B.delete(N):B.add(N),B})},V=N=>{n(N),w(!0)},K=h?Object.entries(h).filter(([N])=>N.toLowerCase().includes(u.toLowerCase())):[];return e.jsxs("div",{className:"space-y-6 px-4 sm:px-6 py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Ontology"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"AI-driven unified data model. Automatically maps disparate data sources into a canonical ontology, creating cross-system entity relationships and powering intelligent agents with a single source of truth."})]}),e.jsx(_s,{useAamSource:p,onModeChange:V,selectedSources:t,selectedAgents:o}),e.jsxs("div",{id:"data-sources-section",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Data Connectivity Layer (DCL)"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-400",children:"Select data sources and agents to create unified entity mappings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-3 sm:p-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-400"}),"Data Sources (",t.length,"/",E.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:E.map(N=>e.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all min-h-[44px] active:opacity-80 ${t.includes(N.value)?"bg-blue-900/40 border-blue-500/50 ring-1 ring-blue-500/30":`${Is(N.type)} hover:border-gray-600`}`,children:[e.jsx("input",{type:"checkbox",checked:t.includes(N.value),onChange:()=>q(N.value),className:"mt-1 w-5 h-5 rounded border-gray-600 text-blue-500 focus:ring-blue-500 focus:ring-offset-gray-900"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Os(N.type),e.jsx("span",{className:"font-semibold text-white text-sm",children:N.name})]}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:N.description})]})]},N.id))})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-3 sm:p-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-orange-400"}),"Trace Data Lineage"]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search for KPI, Report, or Unified Entity...",value:s,onChange:N=>m(N.target.value),onKeyDown:N=>N.key==="Enter"&&W(),className:"w-full bg-gray-900 text-gray-200 pl-10 pr-3 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-orange-500 transition-colors text-sm"})]}),e.jsx("button",{onClick:W,disabled:!s.trim(),className:"mt-3 w-full px-4 py-2.5 bg-orange-600 hover:bg-orange-700 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors text-sm",children:"Trace Lineage"})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("button",{onClick:H,className:"w-full flex items-center justify-center gap-2 px-4 py-3 min-h-[44px] bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 active:from-blue-800 active:to-purple-800 text-white font-semibold rounded-lg shadow-lg shadow-blue-500/30 transition-all",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Select All Sources & Agents"})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-3 sm:p-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-purple-400"}),"Intelligence Agents (",o.length,"/",Le.length,")"]}),e.jsx("div",{className:"space-y-2",children:Le.map(N=>e.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all min-h-[44px] active:opacity-80 ${o.includes(N.value)?"bg-purple-900/40 border-purple-500/50 ring-1 ring-purple-500/30":"bg-gray-900/30 border-gray-700/50 hover:border-gray-600"}`,children:[e.jsx("input",{type:"checkbox",checked:o.includes(N.value),onChange:()=>P(N.value),className:"mt-1 w-5 h-5 rounded border-gray-600 text-purple-500 focus:ring-purple-500 focus:ring-offset-gray-900"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-semibold text-white text-sm block mb-1",children:N.name}),e.jsx("p",{className:"text-xs text-gray-400",children:N.description})]})]},N.id))})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"px-6 py-4 space-y-1",children:[e.jsx("h1",{className:"text-2xl font-medium text-white",children:"Ontology Schema"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Define the canonical entities and their structure for unified data mapping"})]}),e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search entities...",value:u,onChange:N=>d(N.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50"})]})}),e.jsxs("div",{className:"px-6",children:[c&&e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-12 text-center",children:[e.jsx(ie,{className:"w-12 h-12 text-blue-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading ontology schema..."})]}),j&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-6 text-center",children:[e.jsx(be,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),e.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Error Loading Schema"}),e.jsx("p",{className:"text-gray-400 text-sm",children:j}),e.jsx("button",{onClick:z,className:"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Retry"})]}),!c&&!j&&h&&e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-900/50 border-b border-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Entity Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Primary Key"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Unified Fields"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Data Sources"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Source Tables"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:K.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center",children:[e.jsx(Wt,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:u?"No entities match your search":"No entities defined in ontology"})]})}):K.map(([N,_])=>{const B=S.has(N),T=[...new Set(_.source_mappings.map(f=>f.source_system))],Y=_.source_mappings.map(f=>`${f.source_system}/${f.source_table}`);return e.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-white",children:N})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("code",{className:"px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-sm text-cyan-400",children:_.pk})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400",children:[_.fields.length," ",_.fields.length===1?"field":"fields"]})}),e.jsx("td",{className:"px-6 py-4",children:T.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:T.map(f=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-900/30 border border-green-500/30 text-green-400",children:f},f))}):e.jsx("span",{className:"text-gray-500 text-sm",children:"No sources"})}),e.jsx("td",{className:"px-6 py-4",children:Y.length>0?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-blue-900/30 border border-blue-500/30 text-blue-400",children:[Y.length," ",Y.length===1?"table":"tables"]}):e.jsx("span",{className:"text-gray-500 text-sm",children:"No tables"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>R(N),className:"flex items-center gap-1 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg text-sm text-gray-300 transition-colors",children:B?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"}),"Collapse"]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"w-4 h-4"}),"Expand"]})})})]},N)})})]})}),K.map(([N,_])=>S.has(N)?e.jsxs("div",{className:"border-t border-gray-700 bg-gray-900/30 px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:["Unified Fields for ",e.jsx("span",{className:"text-white",children:N}),":"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:_.fields.map(T=>e.jsx("code",{className:"px-3 py-1.5 bg-gray-800 border border-gray-600 rounded text-sm text-gray-300",children:T},T))})]}),_.source_mappings.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Source Mappings (Field-Level Details):"}),e.jsx("div",{className:"space-y-3",children:_.source_mappings.map((T,Y)=>e.jsxs("div",{className:"bg-gray-800/50 border border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-gray-900/30",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-900/30 border border-green-500/30 text-green-400",children:T.source_system}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("code",{className:"px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs text-blue-400",children:T.source_table}),e.jsxs("span",{className:"text-gray-500 text-xs ml-auto",children:[T.field_count," ",T.field_count===1?"field mapping":"field mappings"]})]}),T.field_mappings&&T.field_mappings.length>0?e.jsx("div",{className:"p-4 space-y-2",children:T.field_mappings.map((f,M)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-900/50 border border-gray-700 rounded-lg hover:bg-gray-700/30 transition-colors",children:[e.jsx("code",{className:"px-3 py-1.5 bg-gray-800 border border-gray-600 rounded text-sm text-gray-300 font-mono",children:f.source_field}),e.jsx("span",{className:"text-gray-500 font-bold",children:"→"}),e.jsx("code",{className:"px-3 py-1.5 bg-blue-900/30 border border-blue-500/30 rounded text-sm text-blue-400 font-mono",children:f.ontology_field}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${f.confidence>=.9?"bg-green-900/30 border border-green-500/30 text-green-400":f.confidence>=.7?"bg-yellow-900/30 border border-yellow-500/30 text-yellow-400":"bg-orange-900/30 border border-orange-500/30 text-orange-400"}`,children:[(f.confidence*100).toFixed(0),"% confident"]}),f.transform&&f.transform!=="direct"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-900/30 border border-purple-500/30 text-purple-400",children:f.transform})]},M))}):T.source_fields.length>0&&e.jsx("div",{className:"p-4 flex flex-wrap gap-1",children:T.source_fields.map((f,M)=>e.jsx("code",{className:"px-2 py-1 bg-gray-900 border border-gray-700 rounded text-xs text-gray-400",children:f},M))})]},Y))})]})]},`${N}-details`):null)]}),!c&&!j&&h&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-400",children:[e.jsxs("span",{children:["Showing ",K.length," of ",Object.keys(h).length," ",Object.keys(h).length===1?"entity":"entities"]}),u&&e.jsx("button",{onClick:()=>d(""),className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Clear search"})]})]})]})]})}const Ts=[{id:"discover",name:"Discover",metric:87,target:90,status:"optimal",unit:"%"},{id:"sense",name:"Sense",metric:94,target:85,status:"optimal",unit:"%"},{id:"policy",name:"Policy",metric:76,target:80,status:"warning",unit:"%"},{id:"plan",name:"Plan",metric:91,target:90,status:"optimal",unit:"%"},{id:"prioritize",name:"Prioritize",metric:88,target:85,status:"optimal",unit:"%"},{id:"execute",name:"Execute",metric:82,target:90,status:"warning",unit:"%"},{id:"budget",name:"Budget",metric:95,target:90,status:"optimal",unit:"%"},{id:"observe",name:"Observe",metric:98,target:95,status:"optimal",unit:"%"},{id:"learn",name:"Learn",metric:72,target:80,status:"warning",unit:"%"},{id:"lifecycle",name:"Lifecycle",metric:89,target:85,status:"optimal",unit:"%"}],Rs=[{id:"cross_discovery",name:"Cross-Enterprise Discovery",value:"847 endpoints",trend:"up",description:"Active API endpoints across federated systems"},{id:"federation_health",name:"Federation Health",value:"96.2%",trend:"stable",description:"Overall health of federated orchestration"},{id:"trust_score",name:"Trust Score",value:"8.7/10",trend:"up",description:"Inter-enterprise trust and reliability metric"},{id:"data_sovereignty",name:"Data Sovereignty",value:"100%",trend:"stable",description:"Compliance with regional data requirements"},{id:"cost_allocation",name:"Cost Allocation",value:"$124k/mo",trend:"down",description:"Distributed compute and resource costs"},{id:"sla_compliance",name:"SLA Compliance",value:"99.7%",trend:"stable",description:"Service level agreement adherence"},{id:"security_posture",name:"Security Posture",value:"A+",trend:"stable",description:"Federated security assessment score"},{id:"consensus_rate",name:"Consensus Rate",value:"94.3%",trend:"up",description:"Multi-party agreement on orchestration decisions"},{id:"latency_p95",name:"Cross-Enterprise Latency (P95)",value:"127ms",trend:"down",description:"95th percentile latency for federated operations"},{id:"shared_agents",name:"Shared Agents",value:"42 active",trend:"up",description:"Agents operating across enterprise boundaries"},{id:"interop_score",name:"Interoperability Score",value:"9.1/10",trend:"stable",description:"System compatibility and integration health"},{id:"dispute_resolution",name:"Dispute Resolution Time",value:"4.2min",trend:"down",description:"Average time to resolve orchestration conflicts"}],vt={aoaFunctions:Ts,xaoFunctions:Rs};function Fs(){const[t,l]=a.useState(vt.aoaFunctions);a.useEffect(()=>{const s=setInterval(()=>{l(m=>m.map(p=>{const n=Math.floor(Math.random()*10)-5,b=Math.max(0,Math.min(100,p.metric+n));let w="optimal";return b<p.target-10?w="critical":b<p.target&&(w="warning"),{...p,metric:b,status:w}}))},8e3);return()=>clearInterval(s)},[]);const o=s=>{switch(s){case"optimal":return"bg-green-500/20 text-green-400";case"warning":return"bg-yellow-500/20 text-yellow-400";case"critical":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},i=s=>({discover:{label:"Agent Registry Health",description:"% of known agents responding to heartbeat pings",fullDescription:"Discovers and registers all active domain agents and their capabilities across the organization."},sense:{label:"Event Classification Accuracy",description:"% of incoming events correctly identified and enriched",fullDescription:"Monitors real-time events, anomalies, and trigger patterns across all agents and connected systems."},policy:{label:"Policy Compliance",description:"% of actions executing within guardrails (scope, permissions, SLAs)",fullDescription:"Ensures compliance with internal and external governance rules during orchestration."},plan:{label:"Plan Generation Success",description:"% of triggers converted into executable plans",fullDescription:"Generates, adjusts, and simulates coordination plans based on agent readiness and data flow states."},prioritize:{label:"Conflict Resolution Rate",description:"% of plan conflicts resolved automatically",fullDescription:"Assigns execution order and resource priority across competing agentic workflows."},execute:{label:"Execution Success Rate",description:"% of plan steps completed without errors",fullDescription:"Carries out automated corrective or optimization actions orchestrated by AOA in live environments."},budget:{label:"Guardrail Integrity",description:"% of actions staying within cost/time/risk thresholds",fullDescription:"Manages financial control and cost integrity across autonomous compute and resource allocations."},observe:{label:"Trace Completeness",description:"% of plans producing full observability traces",fullDescription:"Continuously tracks operational signals, telemetry, and feedback loops to evaluate performance."},learn:{label:"Learning Impact",description:"% of recurring plans that improved results",fullDescription:"Continuously refines orchestration policies and mappings through reinforcement learning."},lifecycle:{label:"Agent Health Coverage",description:"% of agents updated and resource-balanced",fullDescription:"Oversees agent onboarding, updates, health, and retirement cycles across the federated network."}})[s]||{label:"Unknown",description:"No description available",fullDescription:"No description available"};return e.jsxs("div",{className:"bg-slate-800/60 rounded-xl border border-slate-700 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-medium text-cyan-400 mb-1",children:"AOA Functions"}),e.jsx("p",{className:"text-sm text-gray-400",children:"autonomOS Agent metrics"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:t.map(s=>{const{label:m,description:p,fullDescription:n}=i(s.id);return e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 border border-slate-700 hover:border-cyan-500/50 transition-colors group cursor-help",title:n,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-200",children:s.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${o(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1 group relative",children:[e.jsx("span",{className:"text-xs font-medium text-cyan-400",children:m}),e.jsx(Te,{className:"w-3 h-3 text-slate-500 hover:text-cyan-400 cursor-help"}),e.jsx("div",{className:"absolute left-0 top-full mt-2 w-48 bg-slate-950 border border-slate-700 rounded-lg p-3 text-xs text-slate-300 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 shadow-xl",children:p})]}),e.jsxs("div",{className:"text-3xl text-cyan-400",children:[s.metric,e.jsx("span",{className:"text-lg text-slate-500",children:s.unit})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Target: ",s.target,s.unit]})]}),e.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${s.status==="optimal"?"bg-green-500":s.status==="warning"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s.metric}%`}})})]},s.id)})}),e.jsx("div",{className:"mt-4 text-center py-3 px-6 bg-slate-800/30 rounded-lg border border-slate-700",children:e.jsx("p",{className:"text-sm text-slate-400",children:"Each % value represents real-time operational efficiency of that orchestration function vs its target SLO."})})]})}function $s({agents:t}){const l=i=>{switch(i){case"running":return"bg-green-500";case"warning":return"bg-yellow-500";case"error":return"bg-red-500";default:return"bg-gray-500"}},o=i=>{i.includes("FinOps")?window.open("https://autonomos.technology/","_blank"):i.includes("RevOps")&&window.open("https://autonomos.cloud/","_blank")};return e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-800 p-6 h-full flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-lg font-medium text-white cursor-help",title:"Displays real-time operational metrics for each domain agent. Each row represents execution throughput, CPU, and memory usage per active agent.",children:"Active Agent Performance"})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 tracking-wider pb-3",children:"Agent"}),e.jsx("th",{className:"text-center text-xs font-medium text-gray-500 tracking-wider pb-3",children:"Status"}),e.jsx("th",{className:"text-right text-xs font-medium text-gray-500 tracking-wider pb-3",children:"Exec/hr"}),e.jsx("th",{className:"text-right text-xs font-medium text-gray-500 tracking-wider pb-3",children:"CPU"}),e.jsx("th",{className:"text-right text-xs font-medium text-gray-500 tracking-wider pb-3",children:"Memory"})]})}),e.jsx("tbody",{children:t.map(i=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50 cursor-pointer transition-colors",onClick:()=>o(i.name),children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:i.name}),(i.name.includes("FinOps")||i.name.includes("RevOps"))&&e.jsx(Bt,{className:"w-3.5 h-3.5 text-blue-400"})]})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-2 h-2 rounded-full ${l(i.status)} ${i.status==="running"?"animate-pulse":""}`})})}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("span",{className:"text-sm text-gray-300",children:i.executionsPerHour})}),e.jsx("td",{className:"py-3 text-right",children:e.jsxs("span",{className:`text-sm font-medium ${i.cpuPercent>40?"text-red-400":i.cpuPercent>25?"text-yellow-400":"text-green-400"}`,children:[i.cpuPercent,"%"]})}),e.jsx("td",{className:"py-3 text-right",children:e.jsxs("span",{className:"text-sm text-gray-300",children:[i.memoryMB," MB"]})})]},i.id))})]})})]})}function qs({agents:t}){const[l]=a.useState(vt.xaoFunctions),o=s=>({cross_discovery:"Total number of active API endpoints discovered across all orchestrated agents (internal and 3rd party).",federation_health:"Synchronization and uptime status of all orchestrated agents.",trust_score:"Trust, reliability, and data fidelity score of agent interactions.",data_sovereignty:"Compliance with regional data residency and sovereignty requirements.",cost_allocation:"Distribution of compute and resource costs across orchestrated agents.",sla_compliance:"Service-level adherence of each orchestrated agent relative to SLAs.",security_posture:"Security assessment score across all orchestrated agents.",consensus_rate:"Agreement rate on orchestration decisions across agents.",latency_p95:"95th percentile latency for cross-agent operations.",shared_agents:"Number of agents operating across multiple domains.",interop_score:"System compatibility and integration health score for all agents.",dispute_resolution:"Average time to resolve orchestration conflicts between agents."})[s]||"",i=s=>{switch(s){case"up":return e.jsx(Re,{className:"w-4 h-4 text-green-400"});case"down":return e.jsx(pt,{className:"w-4 h-4 text-red-400"});case"stable":return e.jsx(Jt,{className:"w-4 h-4 text-gray-400"})}};return e.jsx("div",{className:"bg-black border-t border-b border-cyan-500/30 py-12 -mx-6 px-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{id:"agent-performance-monitor",children:e.jsx($s,{agents:t})}),e.jsx(Fs,{}),e.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-cyan-500/30 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-2xl font-medium text-cyan-400 mb-2 cursor-help",title:"Cross-Agentic Orchestration (xAO) orchestrates all agents—our own internal agents and 3rd party agents—providing unified coordination and governance.",children:"xAO Metrics"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Orchestration metrics for all agents (internal + 3rd party)"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(s=>e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 border border-slate-700 hover:border-cyan-500/50 transition-colors cursor-help",title:o(s.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-200",children:s.name}),i(s.trend)]})}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-xl font-bold text-cyan-400",children:s.value})})]}),e.jsx("p",{className:"text-xs text-slate-500",children:s.description})]},s.id))})]})]})})}const zs=[{id:"ap1",name:"RevOps Agent",status:"running",executionsPerHour:342,cpuPercent:23,memoryMB:512},{id:"ap2",name:"FinOps Agent",status:"running",executionsPerHour:189,cpuPercent:18,memoryMB:448},{id:"ap3",name:"Sales Forecasting",status:"warning",executionsPerHour:67,cpuPercent:45,memoryMB:892},{id:"ap4",name:"Churn Predictor",status:"running",executionsPerHour:124,cpuPercent:31,memoryMB:674},{id:"ap5",name:"Lead Scoring",status:"running",executionsPerHour:298,cpuPercent:19,memoryMB:423}];function Bs(){return e.jsxs("div",{className:"space-y-6 px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"bg-gray-800/40 border border-gray-700/50 rounded-lg px-4 py-2",children:e.jsxs("p",{className:"text-sm text-gray-400 text-center",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Demo Environment"})," • This interface demonstrates platform capabilities with static mock data"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Orchestration"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Meta-level agent coordination at scale. The Orchestration Layer observes, governs, and optimizes all domain agents in real time—enabling cross-agentic workflows, federated coordination, and autonomous system evolution."})]}),e.jsx(qs,{agents:zs})]})}function Ws(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Agents"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"AI-powered agents for domain-specific automation"})]}),e.jsx("div",{className:"bg-slate-800/40 rounded-xl border border-cyan-500/30 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/60 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900/50 px-4 py-3 border-b border-slate-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-blue-400",children:"FinOps Agent"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Financial operations optimization and cost management"})]}),e.jsx(ye,{...fe("finops-agent")})]}),e.jsx("div",{className:"relative",style:{height:"600px"},children:e.jsx("iframe",{src:"https://axiom-finops-demo.replit.app/",className:"w-full h-full",title:"FinOps Agent Demo",style:{border:"none"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})]}),e.jsxs("div",{className:"bg-slate-800/60 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900/50 px-4 py-3 border-b border-slate-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-purple-400",children:"RevOps Agent"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Revenue operations analytics and pipeline management"})]}),e.jsx(ye,{...fe("revops-agent")})]}),e.jsx("div",{className:"relative",style:{height:"600px"},children:e.jsx("iframe",{src:"https://autonomos-dcl-light.replit.app/",className:"w-full h-full",title:"RevOps Agent Demo",style:{border:"none"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})})]})]})})]})}function Hs(){const[t,l]=a.useState(0),[o,i]=a.useState("all"),[s,m]=a.useState("");a.useEffect(()=>{const c=()=>{const g=window.location.hash.slice(1);if(g){const j=n.findIndex(k=>k.id===g);if(j!==-1){const k=n[j];i(k.category),l(j),setTimeout(()=>{document.getElementById(g)?.scrollIntoView({behavior:"smooth",block:"center"})},100)}}};return c(),window.addEventListener("hashchange",c),()=>window.removeEventListener("hashchange",c)},[]);const p=c=>{l(t===c?null:c)},n=[{id:"what-is-autonomos",category:"Platform Overview",question:"What is AutonomOS?",searchableText:"AutonomOS is an AI-native enterprise-grade platform that turns your scattered company data into action. It autonomously connects to all your apps, databases, and files, learning how they fit together to create a single unified enterprise ontology. This allows our specialized AI agents to reason, act, and get work done. The Problem: Most companies are data-rich but action-poor. They can't bridge the Insight-to-Action Gap between their data and their business goals, leading to inefficiency and inaction. Our Solution: AutonomOS bridges this gap. It not only unifies your data but empowers pre-built AI agents to execute complex workflows. You remain in control with Human-in-the-Loop HITL guardrails. We deliver a complete secure and scalable solution combining technology with domain expertise to ensure you get results not just another proof-of-concept POC.",answer:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-300",children:["AutonomOS is an AI-native, ",e.jsx("strong",{className:"text-white",children:"enterprise-grade"})," platform that turns your scattered company data into action."]}),e.jsxs("p",{className:"text-gray-300",children:["It autonomously connects to all your apps, databases, and files, learning how they fit together to create a single, unified enterprise ",e.jsx("strong",{className:"text-white",children:"ontology"}),". This allows our specialized AI agents to reason, act, and get work done."]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-[#0BCAD9] font-medium text-lg mb-3",children:"The Problem"}),e.jsx("p",{className:"text-gray-300",children:`Most companies are data-rich but action-poor. They can't bridge the "Insight-to-Action Gap" between their data and their business goals, leading to inefficiency and inaction.`})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-[#0BCAD9] font-medium text-lg mb-3",children:"Our Solution"}),e.jsxs("p",{className:"text-gray-300",children:["AutonomOS bridges this gap. It not only unifies your data but empowers pre-built AI agents to execute complex workflows. You remain in control with Human-in-the-Loop (HITL) guardrails. We deliver a complete, ",e.jsx("strong",{className:"text-white",children:"secure"}),", and scalable solution—combining technology with the domain expertise to ensure you get results, not just another proof-of-concept (POC)."]})]})]})},{id:"live-status-badges",category:"Platform Overview",question:"What do the Live Status Badges mean?",answer:"Live Status Badges (green pulsing dots) indicate that a component is connected to real backend data sources and displaying actual live information. Components without these badges are demonstration/mock data for preview purposes. Hover over any badge to see details about the data source."},{id:"control-center-overview",category:"Control Center",question:"What is the AOS Control Center?",answer:"The Control Center is your main dashboard providing a comprehensive overview of your AutonomOS platform. It displays key performance indicators (KPIs), system health metrics, active connections, and real-time insights into your data orchestration activities."},{id:"total-connections",category:"Control Center",question:"Total Connections - What does this show?",answer:"This metric displays the total number of data source connections configured in your platform. Active connections are those currently synchronized and operational. This includes connections to databases, APIs, cloud services, and file sources managed through the Adaptive API Mesh (AAM)."},{id:"active-agents",category:"Control Center",question:"Active Agents - What are these?",answer:"Shows the number of AI agents currently running and processing tasks. These include FinOps agents for financial operations, RevOps agents for revenue operations, and custom agents orchestrated through the Agentic Orchestration Architecture (AOA)."},{id:"data-sources",category:"Control Center",question:"Data Sources - What counts as a data source?",answer:"Any external system providing data to AutonomOS: databases (PostgreSQL, MongoDB, Supabase), SaaS platforms (Salesforce, Slack), file storage (CSV, JSON, Excel), or APIs. Each data source is managed by a dedicated connector with schema monitoring and auto-repair capabilities."},{id:"aod-overview",category:"Discover (AOD)",question:"What is AOS Discover (AOD)?",answer:"AOS Discover is an external microservice that performs autonomous asset discovery across your infrastructure. It identifies databases, APIs, file systems, and cloud services, providing a comprehensive map of your data landscape. The dashboard shows real-time discovery metrics and newly identified assets."},{id:"aod-dashboard",category:"Discover (AOD)",question:"How do I read the AOD Dashboard?",answer:"The AOD Dashboard displays: (1) Total Assets Discovered - all identified data sources; (2) Active Scans - currently running discovery processes; (3) New This Week - recently identified assets; (4) Coverage Score - percentage of your infrastructure mapped. The asset list shows details including type, location, and last scan time."},{id:"aod-integration",category:"Discover (AOD)",question:"How does AOD integrate with AutonomOS?",answer:"AOD feeds discovered assets into the Adaptive API Mesh (AAM) for auto-onboarding. When AOD identifies a new data source, AAM can automatically create a connector in Safe Mode, allowing you to review and approve the connection before it begins processing data."},{id:"aam-overview",category:"Connections (AAM)",question:"What is the Adaptive API Mesh (AAM)?",answer:"The Adaptive API Mesh is an intelligent connectivity layer that uses AI to automatically build, maintain, and repair connections between disparate enterprise systems. It provides self-healing integration capabilities that adapt to changes in your data sources and APIs, ensuring your workflows remain resilient and operational without manual intervention."},{id:"aam-connectors",category:"Connections (AAM)",question:"AAM Connectors - What are they?",answer:"Connectors are production-ready integrations for specific data sources (Salesforce, Supabase, MongoDB, FileSource, etc.). Each connector handles authentication, schema detection, data extraction, and canonical event normalization. They include built-in drift detection and auto-repair capabilities."},{id:"aam-mappings",category:"Connections (AAM)",question:"Mappings Metric - How does this work?",answer:"Tracks field-level mappings between source data and your enterprise ontology. Shows total mappings, percentage resolved through Autofix (AI-powered automatic resolution), and percentage requiring HITL (Human-in-the-Loop) review. High autofix percentage indicates strong AI confidence in mapping accuracy."},{id:"aam-drift",category:"Connections (AAM)",question:"Drift Events - What triggers these?",answer:"Drift events occur when a data source schema changes (new fields, removed fields, type changes). AAM uses schema fingerprinting to detect drift automatically. The metric shows total drift events in the last 24 hours, broken down by source. Each event triggers the auto-repair agent to resolve mapping conflicts."},{id:"aam-rag",category:"Connections (AAM)",question:"RAG Suggestions - What is this?",answer:"RAG (Retrieval-Augmented Generation) Suggestions are AI-powered recommendations for resolving schema drift and mapping conflicts. The system uses semantic matching and historical patterns to suggest field mappings. Shows pending suggestions, accepted suggestions (applied to production), and rejected suggestions."},{id:"aam-confidence",category:"Connections (AAM)",question:"Repair Confidence - How is this calculated?",answer:"A percentage score indicating AI confidence in auto-repair decisions. Calculated from semantic similarity, historical pattern matching, and validation test results. Higher confidence (>80%) allows automatic application; lower confidence requires human review through HITL queue. Test Pass Rate shows how many repairs pass validation tests."},{id:"aam-safe-mode",category:"Connections (AAM)",question:"Safe Mode - What does this do?",answer:"Safe Mode is a security guardrail for new connections. When enabled, newly onboarded data sources operate in read-only mode with strict validation. No data is automatically processed until you explicitly approve the connection configuration. Designed to meet 90% day-one coverage SLO while maintaining security."},{id:"aam-auto-onboarding",category:"Connections (AAM)",question:"Auto-Onboarding - How does it work?",answer:"AAM accepts ConnectionIntent payloads (from AOD or manual input) and automatically creates connectors for new data sources. Process: (1) Receive connection details, (2) Create connector in Safe Mode, (3) Perform schema discovery, (4) Generate initial mappings, (5) Queue for human approval. Achieves 90% coverage SLO for supported source types."},{id:"aam-namespace",category:"Connections (AAM)",question:"Namespace Isolation - Autonomy vs Demo",answer:"AAM enforces strict namespace isolation. 'autonomy' namespace contains production connectors with live data. 'demo' namespace contains demonstration connectors for testing. The two namespaces never interact, ensuring demo activities don't affect production data. Connectors inherit namespace from tenant configuration."},{id:"dcl-overview",category:"Ontology (DCL)",question:"What is the Data Connectivity Layer (DCL)?",answer:"The DCL is the core data intelligence engine that autonomously maps disparate data sets into a Unified Enterprise Ontology. It uses AI to understand your data semantics, create contextual relationships, and generate AI-ready data streams. The DCL feeds a Contextual RAG engine that continuously learns from your data patterns, enabling intelligent agents to make informed decisions."},{id:"dcl-graph",category:"Ontology (DCL)",question:"Entity Graph - How do I read this?",answer:"The Entity Graph visualizes relationships between your data entities. Nodes represent entities (customers, products, transactions, etc.), edges represent relationships. Node size indicates data volume, edge thickness shows relationship strength. Color coding indicates entity type. Click nodes to see details; hover over edges to view relationship metadata."},{id:"dcl-sankey",category:"Ontology (DCL)",question:"Sankey Diagram - What does this show?",answer:"The Sankey diagram displays data flow through your platform. Left side shows source connectors, middle shows DCL processing layers, right shows output destinations (agents, views, APIs). Flow width represents data volume. Use this to understand how data moves from sources through transformations to final consumers."},{id:"dcl-mappings",category:"Ontology (DCL)",question:"Entity Mappings - How are these created?",answer:"DCL uses AI (Gemini/OpenAI) to analyze source schemas and map them to your enterprise ontology. Process: (1) Extract schema from source, (2) Semantic analysis of field names/types, (3) Match to existing entities, (4) Generate mapping with confidence score, (5) Human review if confidence < 80%. Mappings are versioned and auditable."},{id:"dcl-views",category:"Ontology (DCL)",question:"Materialized Views - What are these?",answer:"DCL creates materialized views in DuckDB for fast query access to unified data. These are pre-computed, optimized SQL views combining data from multiple sources according to your ontology. Views update incrementally as source data changes. Used by agents for low-latency data access without hitting source systems."},{id:"dcl-telemetry",category:"Ontology (DCL)",question:"LLM Telemetry - What is tracked?",answer:"Tracks LLM usage across DCL operations: total API calls, tokens consumed (input/output), cost per operation, model used (Gemini, OpenAI, etc.). Stored in Redis for real-time monitoring. Use this to understand AI costs and optimize model selection for different tasks (schema analysis vs. entity resolution)."},{id:"aoa-overview",category:"Orchestration (AOA)",question:"What is Agentic Orchestration Architecture (AOA)?",answer:"AOA is the high-level orchestration layer that manages all agent operations, both internal AutonomOS agents and third-party agents. It coordinates task distribution, monitors agent performance, handles inter-agent communication, and provides unified governance. AOA ensures agents work together efficiently while maintaining security and compliance boundaries."},{id:"aoa-status",category:"Orchestration (AOA)",question:"AOA Status Card - What do the metrics mean?",answer:"Shows real-time orchestration health: (1) Active Tasks - currently executing agent tasks, (2) Success Rate - percentage of successfully completed tasks, (3) Avg Response Time - average task completion time, (4) Queue Depth - tasks waiting for execution. Green status indicates healthy operation; yellow/red indicates bottlenecks or failures."},{id:"xao-metrics",category:"Orchestration (AOA)",question:"xAO Metrics - What is Cross-Agentic Orchestration?",answer:"xAO (Cross-Agentic Orchestration) orchestrates all agents—both internal AutonomOS agents and third-party agents—providing unified coordination and governance. Metrics include: Cross Discovery (API endpoints across agents), Federation Health (synchronization status), Trust Score (reliability and data fidelity), SLA Compliance, Security Posture, and Interoperability Score."},{id:"agent-performance",category:"Orchestration (AOA)",question:"Agent Performance Monitor - How to use this?",answer:"Displays performance metrics for each active agent: task completion rate, average execution time, error rate, resource utilization. Use this to identify underperforming agents, optimize task distribution, and monitor SLA compliance. Click on an agent to see detailed execution logs and task history."},{id:"aoa-functions",category:"Orchestration (AOA)",question:"AOA Functions Panel - What functions are available?",answer:"Provides control functions for orchestration: (1) Task Queue Management - view and prioritize pending tasks, (2) Agent Deployment - activate/deactivate agents, (3) Resource Allocation - adjust compute resources per agent, (4) Error Recovery - retry failed tasks, (5) Audit Logs - view orchestration history."},{id:"agents-overview",category:"Agents",question:"What are Prebuilt Domain Agents?",answer:"Prebuilt Domain Agents are productized domain expertise packages designed for specific business functions like FinOps and RevOps. These agents leverage the AI-prepared data fabric to autonomously execute complex, end-to-end business workflows. They use advanced LLM capabilities (supporting multiple providers like Gemini and OpenAI) to reason about your data, learn from patterns, and take intelligent actions."},{id:"finops-agent",category:"Agents",question:"FinOps Agent - What does it do?",answer:"The FinOps (Financial Operations) Agent optimizes cloud spending and financial operations. Capabilities: (1) Cost Analysis - identifies spending patterns and anomalies, (2) Budget Optimization - recommends resource allocation, (3) Waste Detection - finds unused resources, (4) Forecasting - predicts future costs, (5) Automated Actions - rightsizes instances, removes unused resources (with approval)."},{id:"revops-agent",category:"Agents",question:"RevOps Agent - What does it do?",answer:"The RevOps (Revenue Operations) Agent optimizes sales pipeline and revenue workflows. Capabilities: (1) Pipeline Analysis - identifies bottlenecks and conversion rates, (2) Lead Scoring - prioritizes high-value opportunities, (3) Forecasting - predicts revenue outcomes, (4) Process Automation - automates follow-ups and updates, (5) Performance Insights - surfaces trends and recommendations."},{id:"custom-agents",category:"Agents",question:"Can I build custom agents?",answer:"Yes, while we provide Prebuilt Domain Agents for common use cases, the platform supports custom agent deployment. You can leverage our AI-prepared data fabric and orchestration capabilities to build agents tailored to your specific business needs. The LLM service abstraction allows you to choose the best model for each task. Contact support for custom agent development."},{id:"nlp-gateway-overview",category:"NLP Gateway",question:"What is the NLP Gateway?",answer:"The NLP Gateway is a natural language processing service providing conversational access to platform features. It translates natural language queries into system actions, allowing users to interact with AutonomOS using plain English instead of technical interfaces. Supports queries about FinOps, RevOps, AAM status, DCL mappings, and more."},{id:"nlp-no-auth",category:"NLP Gateway",question:"NLP Gateway Authentication - Is it required?",answer:"No, the NLP Gateway operates without authentication for this demo. In production deployments, you can enable JWT authentication for secure access. The demo mode allows anyone to query non-sensitive platform information for evaluation purposes."},{id:"nlp-rag",category:"NLP Gateway",question:"NLP RAG Knowledge Base - How does this work?",answer:"The NLP Gateway uses a tenant-scoped RAG (Retrieval-Augmented Generation) knowledge base built with PostgreSQL + pgvector. It employs hybrid retrieval combining BM25 (keyword search) and vector embeddings with Reciprocal Rank Fusion for optimal results. The knowledge base continuously learns from platform data and user interactions."},{id:"nlp-pii",category:"NLP Gateway",question:"PII Redaction - How is sensitive data protected?",answer:"The NLP Gateway automatically redacts Personally Identifiable Information (PII) from responses. Detected PII includes: email addresses, phone numbers, SSNs, credit card numbers, and custom patterns. Redaction occurs before LLM processing and in responses. Audit logs track all PII detection events for compliance reporting."},{id:"nlp-queries",category:"NLP Gateway",question:"What can I ask the NLP Gateway?",searchableText:"Example queries supported: What's my total cloud spending this month FinOps, Show me top revenue opportunities RevOps, Which connectors have drift events AAM, How many entities are mapped in DCL Ontology, What agents are currently running Orchestration, Summarize my platform health Overview",answer:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-300",children:"Example queries supported:"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-1",children:[e.jsx("li",{children:`"What's my total cloud spending this month?" (FinOps)`}),e.jsx("li",{children:'"Show me top revenue opportunities" (RevOps)'}),e.jsx("li",{children:'"Which connectors have drift events?" (AAM)'}),e.jsx("li",{children:'"How many entities are mapped in DCL?" (Ontology)'}),e.jsx("li",{children:'"What agents are currently running?" (Orchestration)'}),e.jsx("li",{children:'"Summarize my platform health" (Overview)'})]})]})},{id:"security-overview",category:"Security",question:"What are your security standards?",searchableText:"Security Compliance Roadmap. Phase 0 Secure Core Today Implemented: Zero Data Retention Model ephemeral in-memory processing, Robust Multi-Tenant Isolation DB-level tenant-scoped queries, Zero-Trust Infrastructure VPC TLS 1.3 Secrets Management, Secure API Software Lifecycle Pydantic validation CI/CD scans, Immutable Audit Trail metadata-only logging. Phase 1 Enterprise Readiness 0-6 Months: SOC 2 Type I Certification fast-tracked, 3rd-Party Penetration Test, Single Sign-On SSO Okta Azure AD, Private Connectivity AWS PrivateLink, Public Trust Portal Incident Response Plan. Phase 2 Continuous Compliance 6-18 Months: SOC 2 Type II ISO 27001, Bring Your Own Key BYOK, Customer-Managed RBAC, Regional Data Residency Controls, AI-Driven Threat Detection",answer:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-[#0BCAD9] font-medium text-lg mb-4",children:"Security & Compliance Roadmap"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-[#0D2F3F]",children:[e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-3 text-left text-white font-medium",children:"Phase 0: Secure Core (Today)"}),e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-3 text-left text-white font-medium",children:"Phase 1: Enterprise Readiness (0–6 Months)"}),e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-3 text-left text-white font-medium",children:"Phase 2: Continuous Compliance (6–18 Months)"})]}),e.jsxs("tr",{className:"bg-[#0A2540]",children:[e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-2 text-left text-[#0BCAD9] font-normal text-sm",children:"Status: Implemented"}),e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-2 text-left text-[#0BCAD9] font-normal text-sm",children:"Goal: Pass Enterprise Security Assessments"}),e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-2 text-left text-[#0BCAD9] font-normal text-sm",children:"Goal: Operate with Automated Trust at Scale"})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Zero Data Retention Model"})," (Ephemeral in-memory processing)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"SOC 2 Type I Certification"})," (Fast-tracked)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"SOC 2 Type II + ISO 27001"})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Robust Multi-Tenant Isolation"})," (DB-level, tenant-scoped queries)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"3rd-Party Penetration Test"})})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"Bring Your Own Key (BYOK)"})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Zero-Trust Infrastructure"})," (VPC, TLS 1.3, Secrets Mgmt)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Single Sign-On (SSO)"})," (Okta, Azure AD)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"Customer-Managed RBAC"})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Secure API & Software Lifecycle"})," (Pydantic validation, CI/CD scans)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Private Connectivity"})," (AWS PrivateLink)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"Regional Data Residency Controls"})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Immutable Audit Trail"})," (Metadata-only logging)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"Public Trust Portal & Incident Response Plan"})})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"AI-Driven Threat Detection"})})]})})]})]})]})})]})})},{id:"hitl-workflow",category:"Security",question:"Human-in-the-Loop (HITL) - How does this work?",answer:"HITL is a governance mechanism requiring human approval for high-risk operations. When AI confidence is below threshold (typically 80%), the system queues the decision for human review. Applies to: schema mapping conflicts, auto-repair suggestions, agent actions affecting production data. Reviews are tracked in audit logs with full decision history."}],b=["all",...Array.from(new Set(n.map(c=>c.category)))],w=n.filter(c=>{const g=o==="all"||c.category===o;if(s==="")return g;const j=s.toLowerCase(),k=c.question.toLowerCase().includes(j),u=c.category.toLowerCase().includes(j),d=typeof c.answer=="string"?c.answer.toLowerCase().includes(j):c.searchableText?.toLowerCase().includes(j)??!1;return g&&(k||u||d)}),h=c=>{const g=w[c];return n.findIndex(j=>j.id===g.id)},A=c=>{const g=h(c);return t===g};return e.jsx("div",{className:"min-h-screen bg-[#0A1628] py-8 px-4 safe-area",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-medium text-white mb-4",children:"Help"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Complete guide to every feature and element in AutonomOS"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search help topics...",value:s,onChange:c=>m(c.target.value),className:"w-full px-4 py-3 bg-[#0D2F3F] border border-[#1A4D5E] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#0BCAD9] focus:ring-1 focus:ring-[#0BCAD9]"})}),e.jsx("div",{className:"mb-8 flex flex-wrap gap-2 justify-center",children:b.map(c=>e.jsx("button",{onClick:()=>i(c),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o===c?"bg-[#0BCAD9] text-white":"bg-[#0D2F3F] text-gray-400 hover:bg-[#0F3A4F]"}`,children:c==="all"?"All Topics":c},c))}),s&&e.jsxs("div",{className:"mb-4 text-sm text-gray-400",children:["Found ",w.length," result",w.length!==1?"s":"",' for "',s,'"']}),e.jsx("div",{className:"space-y-4",children:w.length===0?e.jsxs("div",{className:"bg-[#0D2F3F] border border-[#1A4D5E] rounded-xl p-12 text-center",children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"No help topics found matching your search."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try a different search term or browse all topics."})]}):w.map((c,g)=>e.jsxs("div",{id:c.id,className:"bg-[#0D2F3F] border border-[#1A4D5E] rounded-xl overflow-hidden scroll-mt-24",children:[e.jsxs("button",{onClick:()=>p(h(g)),className:"w-full px-6 py-5 flex items-center justify-between text-left hover:bg-[#0F3A4F] transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-[#0BCAD9] mb-1",children:c.category}),e.jsx("h3",{className:"text-lg font-medium text-white pr-4",children:c.question})]}),A(g)?e.jsx(qt,{className:"w-5 h-5 text-[#0BCAD9] flex-shrink-0"}):e.jsx(Pe,{className:"w-5 h-5 text-[#0BCAD9] flex-shrink-0"})]}),A(g)&&e.jsx("div",{className:"px-6 py-5 border-t border-[#1A4D5E] bg-[#0A2540]",children:typeof c.answer=="string"?e.jsx("p",{className:"text-gray-300 leading-relaxed",children:c.answer}):c.answer})]},c.id))}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"bg-[#0D2F3F] border border-[#0BCAD9]/30 rounded-xl p-8",children:[e.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:"Still have questions?"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Our team is here to help you understand how AutonomOS can transform your enterprise intelligence."}),e.jsx("button",{className:"px-6 py-3 bg-[#0BCAD9] hover:bg-[#0AA5B3] text-white rounded-lg font-medium transition-colors",children:"Contact Support"})]})})]})})}const st={success:"bg-green-500",failure:"bg-red-500",in_progress:"bg-purple-500",degraded:"bg-blue-500",pending:"bg-gray-500"},at={success:Oe,failure:be,in_progress:ee,degraded:ts,pending:ee},Gs=()=>{const[t,l]=a.useState([]),[o,i]=a.useState([]),[s,m]=a.useState([]),[p,n]=a.useState(!1),[b,w]=a.useState(null),[h,A]=a.useState(null),c=a.useRef(null);a.useEffect(()=>{(async()=>{try{const k=await fetch("/api/v1/flow-monitor?tenant_id=default&limit_per_layer=100");if(k.ok){const u=await k.json();l(u.aam_events||[]),i(u.dcl_events||[]),m(u.agent_events||[])}else w("Failed to fetch flow snapshot")}catch(k){console.error("Error fetching flow snapshot:",k),w("Failed to connect to Flow Monitor API")}})()},[]),a.useEffect(()=>{const k=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/v1/ws/flow-monitor?tenant_id=default`,u=()=>{try{const d=new WebSocket(k);d.onopen=()=>{console.log("Flow Monitor WebSocket connected"),n(!0),w(null)},d.onmessage=S=>{try{const v=JSON.parse(S.data);if(v.type==="flow_event"){const E=v.event,z=v.layer;z==="aam"?l(q=>[E,...q].slice(0,100)):z==="dcl"?i(q=>[E,...q].slice(0,100)):z==="agent"&&m(q=>[E,...q].slice(0,100))}else v.type==="error"&&(console.error("WebSocket error:",v.message),w(v.message))}catch(v){console.error("Failed to parse WebSocket message:",v)}},d.onerror=S=>{console.error("WebSocket error:",S),n(!1),w("WebSocket connection error")},d.onclose=()=>{console.log("WebSocket disconnected, reconnecting..."),n(!1),setTimeout(u,3e3)},c.current=d}catch(d){console.error("Failed to create WebSocket:",d),w("Failed to create WebSocket connection")}};return u(),()=>{c.current&&c.current.close()}},[]);const g=(j,k,u,d)=>{const S=u;return e.jsxs("div",{className:"flex-1 bg-gray-800 rounded-lg shadow-lg p-6 overflow-hidden flex flex-col border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-700 pb-3",children:[e.jsx(S,{className:`w-6 h-6 ${d}`}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:k}),e.jsxs("span",{className:"ml-auto bg-gray-700 px-3 py-1 rounded-full text-sm text-gray-300",children:[j.length," events"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",style:{maxHeight:"600px"},children:j.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(X,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No events yet"})]}):j.slice(0,20).map((v,E)=>{const z=at[v.status]||ee,q=st[v.status]||"bg-gray-500",P=typeof v.metadata=="string"?JSON.parse(v.metadata):v.metadata;return e.jsx("div",{className:"border border-gray-700 rounded-lg p-3 hover:border-gray-600 hover:bg-gray-800 transition-all bg-gray-900 cursor-pointer",onClick:()=>A(v),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`${q} rounded-full p-1.5 mt-0.5`,children:e.jsx(z,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-white truncate",children:v.entity_id}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${q} bg-opacity-20 text-gray-300`,children:v.stage.replace(/_/g," ")})]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(v.timestamp).toLocaleTimeString()}),v.duration_ms&&e.jsxs("span",{className:"ml-2",children:["(",v.duration_ms,"ms)"]})]}),P&&Object.keys(P).length>0&&e.jsx("div",{className:"mt-1 text-xs text-gray-300 bg-gray-800 rounded px-2 py-1 border border-gray-700",children:Object.entries(P).slice(0,3).map(([H,W])=>e.jsxs("div",{className:"truncate",children:[e.jsxs("span",{className:"font-medium",children:[H,":"]})," ",typeof W=="object"?JSON.stringify(W):String(W)]},H))})]})]})]})},v.stream_id||`${v.event_id}-${E}`)})})]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-6",children:[e.jsxs("div",{className:"max-w-[1800px] mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Live Flow Monitoring"}),e.jsx("p",{className:"text-gray-400",children:"Real-time telemetry across AAM → DCL → Agent pipeline"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border ${p?"bg-green-900/30 border-green-700 text-green-400":"bg-red-900/30 border-red-700 text-red-400"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${p?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-sm font-medium",children:p?"Connected":"Disconnected"})]}),b&&e.jsxs("div",{className:"bg-red-900/30 border border-red-700 text-red-400 px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),b]})]})]})}),e.jsxs("div",{className:"flex gap-6",style:{height:"calc(100vh - 180px)"},children:[g(t,"AAM Connections",te,"text-green-400"),g(o,"DCL Intelligence",mt,"text-purple-400"),g(s,"Agent Execution",xt,"text-blue-400")]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-6 z-50",onClick:()=>A(null),children:e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 max-w-3xl w-full max-h-[80vh] overflow-y-auto",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Event Details"}),e.jsx("button",{onClick:()=>A(null),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Fe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Event ID"}),e.jsx("div",{className:"mt-1 text-sm text-white font-mono bg-gray-900 p-2 rounded border border-gray-700",children:h.event_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Entity ID"}),e.jsx("div",{className:"mt-1 text-sm text-white font-mono bg-gray-900 p-2 rounded border border-gray-700",children:h.entity_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Layer"}),e.jsx("div",{className:"mt-1 text-sm text-white capitalize bg-gray-900 p-2 rounded border border-gray-700",children:h.layer})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Stage"}),e.jsx("div",{className:"mt-1 text-sm text-white bg-gray-900 p-2 rounded border border-gray-700",children:h.stage.replace(/_/g," ")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded ${st[h.status]} bg-opacity-20 text-white text-sm`,children:[ot.createElement(at[h.status]||ee,{className:"w-4 h-4"}),h.status]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Tenant ID"}),e.jsx("div",{className:"mt-1 text-sm text-white font-mono bg-gray-900 p-2 rounded border border-gray-700",children:h.tenant_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Timestamp"}),e.jsx("div",{className:"mt-1 text-sm text-white bg-gray-900 p-2 rounded border border-gray-700",children:new Date(h.timestamp).toLocaleString()})]}),h.duration_ms&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Duration"}),e.jsxs("div",{className:"mt-1 text-sm text-white bg-gray-900 p-2 rounded border border-gray-700",children:[h.duration_ms," ms"]})]}),h.stream_id&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Stream ID"}),e.jsx("div",{className:"mt-1 text-sm text-white font-mono bg-gray-900 p-2 rounded border border-gray-700",children:h.stream_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Metadata"}),e.jsx("div",{className:"mt-1 bg-gray-900 p-3 rounded border border-gray-700",children:e.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto",children:JSON.stringify(typeof h.metadata=="string"?JSON.parse(h.metadata):h.metadata,null,2)})})]})]})]})})]})};function Us({isOpen:t,onClose:l,initialMode:o="login"}){const[i,s]=a.useState(o==="signup"?"register":"login"),[m,p]=a.useState(!1),[n,b]=a.useState(""),[w,h]=a.useState(!1),[A,c]=a.useState(""),[g,j]=a.useState(""),[k,u]=a.useState(""),[d,S]=a.useState(""),[v,E]=a.useState(""),{login:z,register:q}=ft(),P=a.useRef(null);if(a.useEffect(()=>{t&&P.current&&setTimeout(()=>P.current?.focus(),100)},[t,i]),a.useEffect(()=>{b("")},[i]),!t)return null;const H=async R=>{R.preventDefault(),b(""),p(!0);try{await z(A,g),l()}catch(V){b(V.message||"Invalid credentials")}finally{p(!1)}},W=async R=>{R.preventDefault(),b(""),p(!0);try{await q(k,d,v),l()}catch(V){b(V.message||"Registration failed")}finally{p(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm animate-fadeIn",children:e.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl w-full max-w-md mx-4 animate-slideUp",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"A"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Welcome to autonomOS"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Sign in to continue"})]})]}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-white transition-colors",disabled:m,children:e.jsx(Fe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>s("login"),className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${i==="login"?"bg-cyan-600 text-white shadow-lg shadow-cyan-600/30":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,disabled:m,children:"Login"}),e.jsx("button",{onClick:()=>s("register"),className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${i==="register"?"bg-cyan-600 text-white shadow-lg shadow-cyan-600/30":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,disabled:m,children:"Register"})]}),n&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-400",children:n})}),i==="login"?e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("input",{ref:P,type:"email",value:A,onChange:R=>c(R.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors",placeholder:"your@email.com",required:!0,disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:g,onChange:R=>j(R.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors pr-12",placeholder:"••••••••",required:!0,disabled:m}),e.jsx("button",{type:"button",onClick:()=>h(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",disabled:m,children:w?e.jsx(Qe,{className:"w-5 h-5"}):e.jsx(xe,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-semibold rounded-lg transition-all shadow-lg shadow-cyan-600/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-5 h-5 animate-spin"}),"Logging in..."]}):"Log In"})]}):e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),e.jsx("input",{ref:P,type:"text",value:k,onChange:R=>u(R.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors",placeholder:"Your Name",required:!0,disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:d,onChange:R=>S(R.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors",placeholder:"your@email.com",required:!0,disabled:m})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w?"text":"password",value:v,onChange:R=>E(R.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors pr-12",placeholder:"••••••••",required:!0,minLength:6,disabled:m}),e.jsx("button",{type:"button",onClick:()=>h(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",disabled:m,children:w?e.jsx(Qe,{className:"w-5 h-5"}):e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-semibold rounded-lg transition-all shadow-lg shadow-cyan-600/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"w-5 h-5 animate-spin"}),"Creating account..."]}):"Create Account"})]})]})})})}function Vs(){const t=()=>{const A=window.location.pathname.slice(1);return["architecture","control-center","discover","connect","ontology","orchestration","agents","flow-monitor","faq"].includes(A)?A:"architecture"},[l,o]=a.useState(t()),[i,s]=a.useState(!1),[m,p]=a.useState("login"),{legacyMode:n}=_t();a.useEffect(()=>{const A=c=>{const j=c.detail?.page;j&&(o(j),window.history.pushState({},"",`/${j}`))};return window.addEventListener("navigate",A),()=>{window.removeEventListener("navigate",A)}},[]),a.useEffect(()=>{const A=()=>{const c=window.location.pathname.slice(1);["architecture","control-center","discover","connect","ontology","orchestration","agents","flow-monitor","faq"].includes(c)&&o(c)};return window.addEventListener("popstate",A),()=>{window.removeEventListener("popstate",A)}},[]);const b=A=>{p(A),s(!0)},w=()=>{s(!1)},h=()=>{switch(l){case"architecture":return e.jsx(Xe,{});case"control-center":return e.jsx(vs,{});case"discover":return e.jsx(js,{});case"connect":return e.jsx(Ns,{});case"ontology":return e.jsx(Ps,{});case"orchestration":return e.jsx(Bs,{});case"agents":return e.jsx(Ws,{});case"flow-monitor":return e.jsx(Gs,{});case"faq":return e.jsx(Hs,{});default:return e.jsx(Xe,{})}};return e.jsxs(e.Fragment,{children:[e.jsx(cs,{currentPage:l,onNavigate:o,onAuthOpen:b,children:h()}),i&&e.jsx(Us,{isOpen:i,onClose:w,initialMode:m})]})}function Js(){return e.jsx(It,{children:e.jsx(Et,{children:e.jsx(Vs,{})})})}const he={sources:[],agents:[],devMode:!1};function Ys(){console.log("[DCL Bridge] Initializing..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("[DCL Bridge] DOM loaded, setting up DCL controls"),rt()}):(console.log("[DCL Bridge] DOM already loaded, setting up DCL controls"),rt())}function rt(){window.dclConnect=async function(t,l){const o=t||"dynamics,salesforce,hubspot",i=l||"revops_pilot,finops_pilot";console.log(`[DCL] Connecting sources: ${o}, agents: ${i}`);const s=encodeURIComponent(o),m=encodeURIComponent(i);try{const n=await(await fetch(`/dcl/connect?sources=${s}&agents=${m}`)).json();return console.log("[DCL Connect Success]",n),n}catch(p){throw console.error("[DCL Connect Error]",p),p}},window.dclReset=async function(){console.log("[DCL] ⚠️ DEPRECATED: dclReset() is deprecated. Reset functionality removed - calling dclConnect() instead."),console.log("[DCL] Backend /dcl/connect is now idempotent and handles state clearing automatically.");try{const t=he.sources.length>0?he.sources.join(","):"dynamics,salesforce,hubspot",l=he.agents.length>0?he.agents.join(","):"revops_pilot,finops_pilot";return await window.dclConnect(t,l)}catch(t){throw console.error("[DCL] Error in deprecated dclReset():",t),t}},window.dclToggleDevMode=async function(){console.log("[DCL] Toggling dev mode...");try{const l=await(await fetch("/dcl/toggle_dev_mode")).json();return console.log("[DCL Toggle Dev Mode Success]",l),l}catch(t){throw console.error("[DCL Toggle Dev Mode Error]",t),t}},console.log("[DCL Bridge] Ready! Use:"),console.log("  - window.dclConnect() to connect sources"),console.log("  - window.dclReset() [DEPRECATED] calls dclConnect() - use dclConnect() instead"),console.log("  - window.dclToggleDevMode() to toggle dev mode"),console.log("  Note: State updates now use WebSocket instead of polling")}const Qs="2025-10-25T12:10:00Z";window.__BUILD_ID__=Qs;Lt.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(Js,{})}));Ys();
