import{j as e,f as D,W as R,T as k,g as E,r as m,a as $,R as I,H as M,e as A,h as _,i as F,k as G,l as W,C as B}from"./ui-vendor-BntBYa88.js";import"./react-vendor-BdZgHC1P.js";function q({status:t,tooltip:a,className:r=""}){return t==="live"?e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-500/10 border border-green-500/30 ${r}`,title:a||"Live data from backend services",role:"status","aria-label":"Live data indicator",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse","aria-hidden":"true"}),e.jsx("span",{className:"text-xs font-medium text-green-400",children:"Live"})]}):null}const z={"nlp-gateway":{status:"live",tooltip:"Connected to backend NLP services with real-time API responses"},"aam-monitor":{status:"live",tooltip:"Live AAM metrics from backend connectors and event streams"},"aam-connections":{status:"live",tooltip:"Real-time connection status from backend AAM service"},"aam-events":{status:"live",tooltip:"Live event stream from AAM monitoring"},"aam-intelligence":{status:"live",tooltip:"Real-time drift detection and repair metrics from AAM"},"dcl-graph":{status:"live",tooltip:"Live unified ontology from backend DCL engine"},"dcl-sankey":{status:"live",tooltip:"Real-time data flow visualization from DCL materialized views"},"aod-dashboard":{status:"live",tooltip:"Live external AOD Dashboard (aos-discover.replit.app)"},"finops-agent":{status:"live",tooltip:"Live FinOps agent demo (axiom-finops-demo.replit.app)"},"revops-agent":{status:"live",tooltip:"Live RevOps agent demo (autonomos-dcl-light.replit.app)"},"aoa-status":{status:"demo",tooltip:"Simulated orchestration metrics with client-side animations"},"agent-performance":{status:"demo",tooltip:"Mock agent performance data for demonstration purposes"},"xao-metrics":{status:"demo",tooltip:"Demo cross-agentic orchestration metrics"},"hitl-queue":{status:"demo",tooltip:"Static demonstration data for HITL workflow"},"discover-stats":{status:"demo",tooltip:"Fixed demo statistics for asset discovery pipeline"},"discover-pipeline":{status:"demo",tooltip:"Demo pipeline metrics showing typical processing flow"},"discover-triage":{status:"demo",tooltip:"Example HITL triage categories with static counts"},"discover-catalog":{status:"demo",tooltip:"Sample catalogued inventory data"},"discover-action-log":{status:"demo",tooltip:"Demo automated action log with sample events"}};function H(t){return z[t]}const J={cto:"CTO",cro:"CRO",coo:"COO",cfo:"CFO"},Q={cto:E,cro:k,coo:R,cfo:D},Y={cto:"blue",cro:"purple",coo:"green",cfo:"amber"};function b(t){return J[t]}function L(t){return Q[t]}function U(t){return Y[t]}const K={cto:["Any connector drift today?","Show dependencies for checkout-service","List degraded connectors","What apps are missing owners?"],cro:["Show this quarter's pipeline by stage","What's win rate vs last quarter?","Which deals are slipping?","Top 10 opportunities by value"],coo:["Cloud spend MTD vs budget","Renewals due in 30 days","Top cost centers MTD","Vendors > $50k last 30d"],cfo:["Revenue MTD / QTD / YTD","Gross margin trend","Cash, burn, runway","DSO / DPO last 90d"]};function V({persona:t}){const[a,r]=m.useState([]),[o,l]=m.useState(""),[g,u]=m.useState(!1),[s,i]=m.useState(null),c=K[t],x=async(n,f)=>{n&&n.preventDefault();const y=f||o;if(!y.trim()||g)return;const N={role:"user",content:y};r(h=>[...h,N]),l(""),u(!0);try{const h=localStorage.getItem("token"),d=await(await fetch("/nlp/v1/query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:h?`Bearer ${h}`:""},body:JSON.stringify({query:y,persona:t})})).json();d.resolved_persona&&i(d.resolved_persona);let v="",S=[];d.matches?(v=d.matches.map((p,T)=>`${T+1}. ${p.title}
${p.content}
Score: ${p.score.toFixed(3)}`).join(`

`),S=d.matches.map(p=>`${p.title}: ${p.section}`)):d.response?v=d.response:v=JSON.stringify(d,null,2);const O={role:"assistant",content:v,trace_id:d.trace_id,sources:S};r(p=>[...p,O])}catch(h){const w={role:"assistant",content:`Error: ${h instanceof Error?h.message:"Failed to connect to NLP Gateway"}`};r(d=>[...d,w])}finally{u(!1)}},j=n=>{l(n),x(void 0,n)},P=()=>{r([]),l("")};return e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-900 to-blue-900 px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{className:"w-5 h-5 text-white"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"AOS NLP Gateway"}),e.jsx(q,{...H("nlp-gateway")}),a.length>0&&e.jsxs("button",{onClick:P,className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors",title:"Clear conversation",children:[e.jsx(I,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-300 bg-gray-700 bg-opacity-50 px-2 py-1 rounded flex items-center gap-1.5",children:[e.jsx("span",{className:"text-gray-400",children:"Resolved:"}),e.jsx("span",{className:"font-medium text-white",children:b(s||t)}),e.jsx("span",{className:"text-gray-400",children:"(Auto)"})]}),e.jsx("button",{className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-300 hover:text-white transition-colors group",title:"Queries are automatically routed to the appropriate domain expertise based on detected persona",children:e.jsx(M,{className:"w-3.5 h-3.5 group-hover:text-blue-400"})})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("form",{onSubmit:x,className:"flex gap-3",children:[e.jsx("input",{type:"text",value:o,onChange:n=>l(n.target.value),placeholder:"Ask anything about AutonomOS services...",className:"flex-1 px-6 py-4 text-lg bg-gray-700 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:g,autoFocus:!0}),e.jsx("button",{type:"submit",disabled:g||!o.trim(),className:"px-6 py-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed rounded-lg text-white font-semibold transition-colors flex items-center gap-2 text-lg",children:g?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-5 h-5 animate-spin"}),"Thinking"]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-5 h-5"}),"Send"]})})]}),e.jsx("div",{className:"space-y-3 bg-gray-900 bg-opacity-50 rounded-lg p-4 border border-gray-700",children:a.length===0?e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"text-center space-y-4 max-w-2xl mx-auto",children:[e.jsxs("p",{className:"text-gray-400 text-sm mb-3",children:["Get started with these ",b(t)," prompts:"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:c.map((n,f)=>e.jsx("button",{onClick:()=>j(n),className:"p-2 bg-gray-800 hover:bg-gray-700 rounded text-left text-xs text-gray-300 transition-colors border border-gray-700",children:n},f))})]})}):a.map((n,f)=>e.jsxs("div",{className:`p-4 rounded-lg ${n.role==="user"?"bg-blue-900 bg-opacity-40 border border-blue-700":"bg-gray-800 border border-gray-600"}`,children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:n.role==="user"?"You":"NLP Gateway"}),n.trace_id&&e.jsx("span",{className:"font-mono text-gray-500",children:n.trace_id})]}),e.jsx("div",{className:"text-gray-200 whitespace-pre-wrap font-mono text-sm",children:n.content}),n.sources&&n.sources.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Sources:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:n.sources.map((y,N)=>e.jsx("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded text-gray-300",children:y},N))})]})]},f))}),e.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Tenant: demo-tenant | Env: prod | Auth: JWT"})]})]})}function X(t){const[a,r]=m.useState(null),[o,l]=m.useState(!0),[g,u]=m.useState(null);return m.useEffect(()=>{let s=!0;async function i(){l(!0),u(null);try{const c=localStorage.getItem("token"),x=await fetch(`/nlp/v1/persona/summary?persona=${t}`,{method:"GET",headers:{Authorization:c?`Bearer ${c}`:"","Content-Type":"application/json"}});if(!x.ok)throw new Error(`Failed to fetch persona summary: ${x.statusText}`);const j=await x.json();s&&r(j)}catch(c){s&&u(c instanceof Error?c.message:"Unknown error")}finally{s&&l(!1)}}return i(),()=>{s=!1}},[t]),{data:a,loading:o,error:g}}function Z({persona:t}){const{data:a,loading:r,error:o}=X(t);if(r)return e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-12",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[e.jsx(A,{className:"w-6 h-6 animate-spin"}),e.jsxs("span",{children:["Loading ",b(t)," dashboard..."]})]})});if(o)return e.jsx("div",{className:"bg-gray-800 rounded-lg border border-red-700 p-6",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsxs("span",{children:["Failed to load dashboard: ",o]})]})});if(!a)return null;const l={blue:"from-blue-900 to-cyan-900",purple:"from-purple-900 to-pink-900",green:"from-green-900 to-emerald-900",amber:"from-amber-900 to-orange-900"},g=l[U(t)]||l.blue,u=L(t);return e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx("div",{className:`bg-gradient-to-r ${g} px-6 py-4 border-b border-gray-700`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"w-8 h-8 text-white"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:[b(t)," Dashboard"]}),e.jsx("p",{className:"text-sm text-gray-300",children:"Role-specific KPIs and insights"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.tiles.map(s=>{const i=s.note==="stub",c=s.mock===!0,x=i?"div":"a";return e.jsxs(x,{href:i?void 0:s.href,className:`block p-4 rounded-lg border transition-colors ${i?"bg-gray-900 border-gray-700 opacity-60 cursor-not-allowed":"bg-gray-900 border-gray-700 hover:border-gray-600 hover:shadow-lg"}`,title:i?"Data source not connected yet":c?"Demo data (connect sources to replace)":s.title,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:s.title}),c&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-amber-900 bg-opacity-40 text-amber-400 border border-amber-700 rounded",children:"Demo"})]}),s.delta&&!i&&e.jsxs("span",{className:`text-xs flex items-center gap-1 ${s.delta.startsWith("+")?"text-green-400":"text-red-400"}`,children:[s.delta.startsWith("+")?e.jsx(k,{className:"w-3 h-3"}):e.jsx(G,{className:"w-3 h-3"}),s.delta]})]}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:s.value??e.jsx("span",{className:"text-gray-600",children:"—"})}),e.jsx("div",{className:"text-xs text-gray-500",children:s.timeframe}),i&&e.jsx("div",{className:"mt-2 text-xs text-amber-600 italic",children:"Coming soon"}),!i&&!c&&s.value===null&&e.jsx("div",{className:"mt-2 text-xs text-blue-400 italic",children:"Connecting..."})]},s.key)})}),e.jsxs("div",{className:`rounded-lg border p-4 ${a.table.note==="stub"?"bg-gray-900 border-gray-700 opacity-60":"bg-gray-900 border-gray-700"}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:a.table.title}),a.table.rows.length===0?e.jsx("div",{className:"text-center py-8",children:a.table.note==="stub"?e.jsxs("div",{className:"text-gray-500 flex flex-col items-center gap-2",children:[e.jsx(W,{className:"w-12 h-12 text-gray-600"}),e.jsx("p",{className:"text-lg mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This data source will be available in a future release"})]}):e.jsxs("div",{className:"text-gray-500 flex flex-col items-center gap-2",children:[e.jsx(B,{className:"w-12 h-12 text-blue-600"}),e.jsx("p",{className:"text-lg mb-2",children:"No data yet"}),e.jsx("p",{className:"text-sm text-blue-400",children:"Connect your data source to see insights here"})]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-700",children:a.table.columns.map((s,i)=>e.jsx("th",{className:"text-left p-3 text-gray-400 font-medium",children:s},i))})}),e.jsx("tbody",{children:a.table.rows.map((s,i)=>e.jsx("tr",{className:"border-b border-gray-800 hover:bg-gray-800",children:s.map((c,x)=>e.jsx("td",{className:"p-3 text-gray-200",children:c},x))},i))})]})})]}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["Trace ID: ",a.trace_id]})]})]})}const ee={data_engineer:"cto",revops:"cro",finops:"coo",finance:"cfo"};function C(){const t=localStorage.getItem("aos.persona");if(t){const r=ee[t];if(r)return localStorage.setItem("aos.persona",r),{persona:r,source:"localStorage (migrated)"};if(["cto","cro","coo","cfo"].includes(t))return{persona:t,source:"localStorage"}}const a=localStorage.getItem("token");if(a)try{const r=a.split(".");if(r.length===3){let o=r[1].replace(/-/g,"+").replace(/_/g,"/");for(;o.length%4;)o+="=";const l=JSON.parse(atob(o));if(l.role&&["cto","cro","coo","cfo"].includes(l.role))return{persona:l.role,source:"jwt"}}}catch{}return{persona:"coo",source:"default"}}function ae(){const[t,a]=m.useState(()=>C().persona),r=["cto","cro","coo","cfo"];return m.useEffect(()=>{const{persona:o,source:l}=C();console.info(`[ControlCenter] persona=${o} source=${l}`)},[]),m.useEffect(()=>{localStorage.setItem("aos.persona",t)},[t]),e.jsxs("div",{className:"space-y-8 px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"bg-gray-800/40 border border-gray-700/50 rounded-lg px-4 py-2",children:e.jsxs("p",{className:"text-sm text-gray-400 text-center",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Demo Environment"})," • This interface demonstrates platform capabilities with static mock data"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Control Center"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Natural language interface to all AutonomOS services. Query your data, manage finances, investigate incidents, and discover dependencies—all through conversational AI with RAG-powered knowledge retrieval."})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Select Role:"}),e.jsx("div",{className:"flex gap-2",children:r.map(o=>{const l=L(o);return e.jsxs("button",{onClick:()=>a(o),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${t===o?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(l,{className:"w-4 h-4"}),e.jsx("span",{children:b(o)})]},o)})})]})}),e.jsx(V,{persona:t}),e.jsx(Z,{persona:t})]})}export{ae as default};
