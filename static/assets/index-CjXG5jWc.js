import{r as Xt,g as Kn,a as Xn}from"./react-vendor-D3F3s8fL.js";import{s as Nt,i as rt,z as na,p as ra,d as oa}from"./d3-vendor-CBUeoLxW.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var os={exports:{}},xt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tn;function aa(){if(tn)return xt;tn=1;var t=Xt(),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,m){var d,g={},u=null,h=null;m!==void 0&&(u=""+m),c.key!==void 0&&(u=""+c.key),c.ref!==void 0&&(h=c.ref);for(d in c)r.call(c,d)&&!i.hasOwnProperty(d)&&(g[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)g[d]===void 0&&(g[d]=c[d]);return{$$typeof:s,type:l,key:u,ref:h,props:g,_owner:o.current}}return xt.Fragment=n,xt.jsx=a,xt.jsxs=a,xt}var sn;function ia(){return sn||(sn=1,os.exports=aa()),os.exports}var e=ia(),p=Xt();const E=Kn(p);var Pt={},nn;function la(){if(nn)return Pt;nn=1;var t=Xn();return Pt.createRoot=t.createRoot,Pt.hydrateRoot=t.hydrateRoot,Pt}var ca=la();const Qn=p.createContext(void 0);function da({children:t}){const[s,n]=p.useState("Auto (Guardrails)"),[r,o]=p.useState(!1),[i,a]=p.useState(!0);return e.jsx(Qn.Provider,{value:{autonomyMode:s,setAutonomyMode:n,isModalOpen:r,setIsModalOpen:o,legacyMode:i,setLegacyMode:a},children:t})}function ua(){const t=p.useContext(Qn);if(t===void 0)throw new Error("useAutonomy must be used within an AutonomyProvider");return t}const as=window.location.origin,ge={BASE_URL:as,buildApiUrl:t=>`${as}/api/v1${t}`,buildDclUrl:t=>`${as}/dcl${t}`},fe="aoa_jwt",ws=[{id:"1",name:"Dynamics CRM",value:"dynamics",type:"CRM",status:"connected",description:"Customer relationship management"},{id:"2",name:"Salesforce",value:"salesforce",type:"CRM",status:"connected",description:"Cloud-based CRM platform"},{id:"3",name:"HubSpot",value:"hubspot",type:"CRM",status:"connected",description:"Marketing and sales platform"},{id:"4",name:"SAP ERP",value:"sap",type:"ERP",status:"connected",description:"Enterprise resource planning"},{id:"5",name:"NetSuite",value:"netsuite",type:"ERP",status:"connected",description:"Cloud ERP system"},{id:"6",name:"Legacy SQL",value:"legacy_sql",type:"Database",status:"connected",description:"On-premise SQL database"},{id:"7",name:"Snowflake",value:"snowflake",type:"Warehouse",status:"connected",description:"Cloud data warehouse"},{id:"8",name:"Supabase",value:"supabase",type:"Database",status:"connected",description:"Open source database platform"},{id:"9",name:"MongoDB",value:"mongodb",type:"Database",status:"connected",description:"NoSQL document database"}],js=[{id:"2",name:"Salesforce",value:"salesforce",type:"CRM",status:"connected",description:"Cloud-based CRM platform"},{id:"8",name:"Supabase",value:"supabase",type:"Database",status:"connected",description:"Open source database platform"},{id:"9",name:"MongoDB",value:"mongodb",type:"Database",status:"connected",description:"NoSQL document database"},{id:"10",name:"FileSource",value:"filesource",type:"Database",status:"connected",description:"File-based data sources"}],Jn=[{id:"1",name:"RevOps Pilot",value:"revops_pilot",description:"Revenue operations intelligence agent"},{id:"2",name:"FinOps Pilot",value:"finops_pilot",description:"Financial operations intelligence agent"}],At=()=>ws.map(t=>t.value),rn=()=>js.map(t=>t.value),_s=()=>Jn.map(t=>t.value),is=()=>{let t=!1,s=!1;try{const n=localStorage.getItem("aos.selectedSources");if(!n)t=!0;else{const r=JSON.parse(n);(!Array.isArray(r)||r.length===0)&&(t=!0)}}catch{t=!0}try{const n=localStorage.getItem("aos.selectedAgents");if(!n)s=!0;else{const r=JSON.parse(n);(!Array.isArray(r)||r.length===0)&&(s=!0)}}catch{s=!0}if(t){const n=At();localStorage.setItem("aos.selectedSources",JSON.stringify(n)),console.log("[DCL Defaults] Initialized all sources:",n)}if(s){const n=_s();localStorage.setItem("aos.selectedAgents",JSON.stringify(n)),console.log("[DCL Defaults] Initialized all agents:",n)}},ma=()=>{try{const t=localStorage.getItem("aos.selectedSources");if(t){const s=JSON.parse(t);if(Array.isArray(s))return s}}catch(t){console.error("[DCL Defaults] Failed to parse saved sources:",t)}return At()},Ht=()=>{try{const t=localStorage.getItem("aos.selectedAgents");if(t){const s=JSON.parse(t);if(Array.isArray(s)&&s.length>0)return s}}catch(t){console.error("[DCL Defaults] Failed to parse saved agents:",t)}return _s()},ft="auth_token_expiry",on=480*60*1e3,er=p.createContext(void 0);function ha({children:t}){const[s,n]=p.useState(null),[r,o]=p.useState(null),[i,a]=p.useState(!0),l=p.useCallback(()=>{localStorage.removeItem(fe),localStorage.removeItem(ft),o(null),n(null)},[]),c=p.useCallback(()=>{const u=localStorage.getItem(fe),h=localStorage.getItem(ft);if(!u)return!1;if(!h)return console.log("[Auth] Legacy token without expiry found, logging out..."),l(),!1;const v=parseInt(h,10);return Date.now()>=v?(console.log("[Auth] Token expired after 30 minutes, logging out..."),l(),!1):!0},[l]);p.useEffect(()=>{const u=localStorage.getItem(fe);u&&c()?(is(),o(u),m(u)):a(!1);const h=()=>{console.log("[Auth] Received unauthorized event, logging out..."),l()};return window.addEventListener("auth:unauthorized",h),()=>{window.removeEventListener("auth:unauthorized",h)}},[c,l]);const m=async u=>{try{const h=await fetch(ge.buildApiUrl("/auth/me"),{headers:{Authorization:`Bearer ${u}`}});if(h.ok){const v=await h.json();n(v)}else h.status===401?(console.log("[Auth] 401 on profile fetch, logging out..."),l()):(localStorage.removeItem(fe),localStorage.removeItem(ft),o(null))}catch(h){console.error("Failed to fetch user profile:",h),l()}finally{a(!1)}},d=async(u,h)=>{const v=await fetch(ge.buildApiUrl("/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:h})});if(!v.ok){const f=await v.json();throw new Error(f.detail||"Invalid credentials")}const x=await v.json(),w=x.access_token||x.token,y=Date.now()+on;localStorage.setItem(fe,w),localStorage.setItem(ft,y.toString()),o(w),is(),await m(w)},g=async(u,h,v)=>{const x=await fetch(ge.buildApiUrl("/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u,email:h,password:v})});if(!x.ok){const j=await x.json();throw new Error(j.detail||"Registration failed")}const w=await x.json(),y=w.access_token||w.token,f=Date.now()+on;localStorage.setItem(fe,y),localStorage.setItem(ft,f.toString()),o(y),is(),await m(y)};return e.jsx(er.Provider,{value:{user:s,token:r,isAuthenticated:!!r,isLoading:i,login:d,register:g,logout:l},children:t})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ga={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(t,s)=>{const n=p.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...m},d)=>p.createElement("svg",{ref:d,...ga,width:o,height:o,stroke:r,strokeWidth:a?Number(i)*24/Number(o):i,className:["lucide",`lucide-${pa(t)}`,l].join(" "),...m},[...s.map(([g,u])=>p.createElement(g,u)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=Y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Y("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Y("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Y("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=Y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Y("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=Y("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Y("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Y("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Y("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=Y("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Y("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Y("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Y("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Y("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Y("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Y("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Y("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Y("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Y("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=Y("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Y("MonitorDot",[["circle",{cx:"19",cy:"6",r:"3",key:"108a5v"}],["path",{d:"M22 12v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h9",key:"1fet9y"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Y("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=Y("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Y("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Y("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Y("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Y("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Y("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Y("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=Y("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Y("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=Y("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ha="/assets/autonomos-logo-CqGBsnEG.png";function Ba({onAuthOpen:t,currentPage:s,onNavigate:n}){const[r,o]=p.useState(!1),[i]=p.useState(!0),a=[{id:"architecture",label:"Platform Guide",icon:e.jsx(tr,{className:"w-5 h-5"}),tooltip:"Interactive architecture documentation"},{id:"discover",label:"AOD (Discover)",icon:e.jsx(St,{className:"w-5 h-5"}),tooltip:"Asset discovery and cataloging"},{id:"demo-discovery",label:"Discovery Demo",icon:e.jsx(_t,{className:"w-5 h-5"}),tooltip:"Interactive demo: AOD → AAM → DCL → Agent pipeline"},{id:"connect",label:"AAM (Connect)",icon:e.jsx(nr,{className:"w-5 h-5"}),tooltip:"Self-healing data connectivity"},{id:"ontology",label:"DCL (Ontology)",icon:e.jsx(Rs,{className:"w-5 h-5"}),tooltip:"Data intelligence and mapping"},{id:"orchestration",label:"AOA (Orchestration)",icon:e.jsx(We,{className:"w-5 h-5"})},{id:"control-center",label:"Control Center",icon:e.jsx(Ca,{className:"w-5 h-5"})},{id:"faq",label:"Help",icon:e.jsx(Ls,{className:"w-5 h-5"})}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-16 bg-gray-900 border-b border-gray-800 flex items-center px-4 sm:px-6 gap-3 sm:gap-6 safe-x",children:[e.jsx("div",{className:"flex-shrink-0 -ml-[10px]",children:e.jsx("button",{onClick:()=>n("architecture"),className:"hover:opacity-80 transition-opacity cursor-pointer",children:e.jsx("img",{src:Ha,alt:"autonomOS",className:"h-[36px] sm:h-[42px] object-contain"})})}),e.jsx("nav",{className:"hidden sm:flex flex-1 items-center gap-1",children:a.map(l=>e.jsxs("button",{onClick:()=>n(l.id),title:l.tooltip,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all flex-shrink-0 touch-target-h ${s===l.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"} ${l.id==="faq"?"ring-2 ring-[#0BCAD9]/50 shadow-lg shadow-[#0BCAD9]/30 animate-pulse":""}`,children:[l.icon,e.jsx("span",{className:"font-medium text-sm whitespace-nowrap",children:l.label})]},l.id))}),e.jsx("div",{className:"flex-1 sm:hidden"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx("div",{className:"relative",children:e.jsxs("button",{className:"p-2 hover:bg-gray-800 rounded-lg transition-colors relative touch-target mobile-tap-highlight",children:[e.jsx(ya,{className:"w-5 h-5 text-gray-400"}),i&&e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]})}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>t("login"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-200 transition-colors touch-target-h mobile-tap-highlight",children:[e.jsx(ln,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Login"})]}),e.jsxs("button",{onClick:()=>t("signup"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-cyan-600 hover:bg-cyan-500 text-white transition-colors touch-target-h mobile-tap-highlight",children:[e.jsx(cn,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Sign Up"})]})]}),e.jsx("button",{onClick:()=>o(!r),className:"sm:hidden p-2 hover:bg-gray-800 rounded-lg transition-colors touch-target mobile-tap-highlight",children:r?e.jsx(Ts,{className:"w-6 h-6 text-gray-400"}):e.jsx(Aa,{className:"w-6 h-6 text-gray-400"})})]})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 sm:hidden",onClick:()=>o(!1)}),e.jsx("div",{className:"fixed top-16 right-0 bottom-0 w-64 bg-gray-900 border-l border-gray-800 z-50 sm:hidden safe-x safe-bottom",children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsx("nav",{className:"flex flex-col gap-2 mb-6",children:a.map(l=>e.jsxs("button",{onClick:()=>{n(l.id),o(!1)},className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all touch-target-h mobile-tap-highlight ${s===l.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"} ${l.id==="faq"?"ring-2 ring-[#0BCAD9]/50 shadow-lg shadow-[#0BCAD9]/30 animate-pulse":""}`,children:[l.icon,e.jsx("span",{className:"font-medium text-base",children:l.label})]},l.id))}),e.jsx("div",{className:"border-t border-gray-800 pt-4 mt-auto",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>{t("login"),o(!1)},className:"flex items-center gap-2 px-4 py-3 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-200 transition-colors touch-target-h mobile-tap-highlight justify-center",children:[e.jsx(ln,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Login"})]}),e.jsxs("button",{onClick:()=>{t("signup"),o(!1)},className:"flex items-center gap-2 px-4 py-3 rounded-lg bg-cyan-600 hover:bg-cyan-500 text-white transition-colors touch-target-h mobile-tap-highlight justify-center",children:[e.jsx(cn,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Sign Up"})]})]})})]})})]})]})}function Wa({children:t,currentPage:s,onNavigate:n,onAuthOpen:r}){return e.jsxs("div",{className:"h-screen flex flex-col bg-gray-950",children:[e.jsx(Ba,{onAuthOpen:r,currentPage:s,onNavigate:n}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-6",children:t})})]})}function dn(){return e.jsxs("div",{className:"platform-guide-container",children:[e.jsx("style",{children:`
        .platform-guide-container {
          background: #0d1117;
          color: #c9d1d9;
          line-height: 1.6;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
          margin: -1.5rem;
          min-height: 100vh;
        }

        .platform-guide-container * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        .pg-header {
          background: #1c2128;
          border-bottom: 1px solid #30363d;
          padding: 1.5rem 2rem;
          position: sticky;
          top: 0;
          z-index: 100;
          box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .pg-header h1 {
          font-size: 1.75rem;
          font-weight: 600;
          color: #58a6ff;
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .pg-header h1::before {
          content: "⚡";
          font-size: 2rem;
        }

        .pg-header .subtitle {
          color: #8b949e;
          font-size: 0.9rem;
          margin-top: 0.25rem;
        }

        .pg-container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 2rem;
        }

        .pg-nav {
          background: #161b22;
          border: 1px solid #30363d;
          border-radius: 8px;
          padding: 1.5rem;
          margin-bottom: 2rem;
        }

        .pg-nav h2 {
          font-size: 1.25rem;
          margin-bottom: 1rem;
          color: #3fb950;
        }

        .pg-nav-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 0.75rem;
        }

        .pg-nav-link {
          display: block;
          padding: 0.75rem 1rem;
          background: #0d1117;
          border: 1px solid #30363d;
          border-radius: 6px;
          color: #58a6ff;
          text-decoration: none;
          transition: all 0.2s;
          cursor: pointer;
        }

        .pg-nav-link:hover {
          background: #1c2128;
          border-color: #58a6ff;
          transform: translateX(4px);
        }

        .pg-section {
          background: #161b22;
          border: 1px solid #30363d;
          border-radius: 8px;
          padding: 2rem;
          margin-bottom: 2rem;
        }

        .pg-intro-section {
          background: linear-gradient(135deg, #161b22 0%, #1c2128 100%);
          border: 1px solid #30363d;
          border-radius: 8px;
          padding: 2rem;
          margin-bottom: 2rem;
        }

        .pg-section h2 {
          font-size: 1.75rem;
          color: #3fb950;
          margin-bottom: 1.5rem;
          border-bottom: 2px solid #30363d;
          padding-bottom: 0.5rem;
        }

        .pg-intro-section h2 {
          font-size: 1.75rem;
          color: #3fb950;
          margin-bottom: 1.5rem;
          border-bottom: 2px solid #30363d;
          padding-bottom: 0.5rem;
        }

        .pg-section h3 {
          font-size: 1.35rem;
          color: #58a6ff;
          margin: 1.5rem 0 1rem 0;
        }

        .pg-section h4 {
          font-size: 1.1rem;
          color: #bc8cff;
          margin: 1rem 0 0.75rem 0;
        }

        .pg-section h5 {
          font-size: 1rem;
          margin: 1rem 0 0.5rem 0;
        }

        .pg-section p {
          margin-bottom: 1rem;
          color: #c9d1d9;
        }

        .pg-intro-section p {
          margin-bottom: 1rem;
          color: #c9d1d9;
        }

        .pg-section ul {
          margin: 0.5rem 0 1rem 1.5rem;
        }

        .pg-intro-section ul {
          margin: 0.5rem 0 1rem 1.5rem;
        }

        .pg-section li {
          margin-bottom: 0.5rem;
          line-height: 1.6;
        }

        .pg-intro-section li {
          margin-bottom: 0.5rem;
          line-height: 1.6;
        }

        .pg-highlight-box {
          background: rgba(88, 166, 255, 0.1);
          border-left: 3px solid #58a6ff;
          padding: 1rem;
          margin: 1rem 0;
          border-radius: 4px;
        }

        .pg-highlight-box p {
          margin: 0;
        }

        .pg-table {
          width: 100%;
          border-collapse: collapse;
          margin: 1rem 0;
          background: #0d1117;
          border-radius: 6px;
          overflow: hidden;
        }

        .pg-table thead {
          background: #1c2128;
        }

        .pg-table th {
          padding: 1rem;
          text-align: left;
          font-weight: 600;
          color: #58a6ff;
          border-bottom: 2px solid #30363d;
        }

        .pg-table td {
          padding: 1rem;
          border-bottom: 1px solid #30363d;
        }

        .pg-table tbody tr:last-child td {
          border-bottom: none;
        }

        .pg-table tbody tr:hover {
          background: rgba(88, 166, 255, 0.05);
        }

        .pg-raci-a {
          display: inline-block;
          background: #3fb950;
          color: #0d1117;
          padding: 0.25rem 0.75rem;
          border-radius: 4px;
          font-weight: 600;
          font-size: 0.85rem;
        }

        .pg-raci-r {
          display: inline-block;
          background: #58a6ff;
          color: #0d1117;
          padding: 0.25rem 0.75rem;
          border-radius: 4px;
          font-weight: 600;
          font-size: 0.85rem;
        }

        .pg-status-badge {
          display: inline-block;
          padding: 0.25rem 0.75rem;
          border-radius: 4px;
          font-size: 0.85rem;
          font-weight: 600;
        }

        .pg-status-operational {
          background: #3fb950;
          color: #0d1117;
        }

        .pg-status-demo {
          background: #ffc107;
          color: #0d1117;
        }

        .pg-checkmark {
          color: #3fb950;
          font-weight: bold;
          margin-right: 0.5rem;
        }

        .text-gray-300 {
          color: #c9d1d9;
        }

        @media (max-width: 768px) {
          .pg-container {
            padding: 1rem;
          }

          .pg-section {
            padding: 1rem;
          }

          .pg-nav-grid {
            grid-template-columns: 1fr;
          }

          .pg-table {
            font-size: 0.85rem;
          }

          .pg-table th, .pg-table td {
            padding: 0.5rem;
          }
        }
      `}),e.jsxs("div",{className:"pg-header",children:[e.jsx("h1",{children:"AutonomOS Platform Guide"}),e.jsx("div",{className:"subtitle",children:"Multi-Tenant AI Orchestration Platform"})]}),e.jsxs("div",{className:"pg-container",children:[e.jsxs("div",{className:"pg-nav",children:[e.jsx("h2",{children:"Quick Navigation"}),e.jsxs("div",{className:"pg-nav-grid",children:[e.jsx("a",{href:"#what-is",className:"pg-nav-link",children:"What is AutonomOS?"}),e.jsx("a",{href:"#accountability",className:"pg-nav-link",children:"Component Ownership"}),e.jsx("a",{href:"#components",className:"pg-nav-link",children:"Platform Components"}),e.jsx("a",{href:"#connectors",className:"pg-nav-link",children:"Production Connectors"}),e.jsx("a",{href:"#roadmap",className:"pg-nav-link",children:"Platform Roadmap"})]})]}),e.jsxs("section",{id:"what-is",className:"pg-intro-section",children:[e.jsx("h2",{children:"What is AutonomOS?"}),e.jsxs("p",{className:"text-gray-300",children:["AutonomOS is an AI-native, ",e.jsx("strong",{style:{color:"#fff"},children:"enterprise-grade"})," platform that turns your scattered company data into action."]}),e.jsxs("p",{className:"text-gray-300",children:["It autonomously connects to all your apps, databases, and files, learning how they fit together to create a single, unified enterprise ",e.jsx("strong",{style:{color:"#fff"},children:"ontology"}),". This allows our specialized AI agents to reason, act, and get work done. Humans use that same ontology to get real-time, accurate, contextual information."]}),e.jsx("div",{className:"pg-highlight-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Our Core Tenet:"})," We abstract complexity away. We'll get you context regardless of how disparate, numerous, and complex your data sources are."]})}),e.jsx("div",{className:"pg-highlight-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"The Problem:"})," Most companies are data-rich but action-poor. They can't bridge the Insight-to-Action Gap between their data and their business goals, leading to inefficiency and inaction."]})}),e.jsx("div",{className:"pg-highlight-box",children:e.jsxs("p",{children:[e.jsx("strong",{children:"What Makes Us Different:"})," We create autonomous actions, not just insights. We abstract the complexity of disparate data stacks so you don't have to worry about integration headaches. AutonomOS is an end-to-end platform that autonomously connects, understands, and acts on your data—empowering pre-built AI agents to execute complex workflows while you remain in control with Human-in-the-Loop (HITL) guardrails."]})}),e.jsxs("p",{className:"text-gray-300",children:["We deliver a complete, secure, and scalable solution combining technology with domain expertise to ensure you get ",e.jsx("strong",{style:{color:"#fff"},children:"results"}),", not just another proof-of-concept (POC)."]}),e.jsx("h3",{style:{marginTop:"2rem",marginBottom:"1rem",color:"#58a6ff"},children:"Current Status"}),e.jsxs("div",{className:"pg-highlight-box",children:[e.jsx("strong",{children:"Phase 4 Complete"})," - Production Ready",e.jsx("br",{}),e.jsx("strong",{children:"Platform State:"})," All four phases operational with live telemetry monitoring"]}),e.jsx("h4",{style:{color:"#bc8cff"},children:"Platform Modules"}),e.jsx("p",{style:{marginBottom:"1rem",color:"#8b949e"},children:"The platform is built from six core modules, each responsible for specific capabilities."}),e.jsx("h5",{style:{color:"#3fb950",marginTop:"1rem",marginBottom:"0.5rem"},children:"Operational Modules"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"AOD (Autonomous Object Discovery):"})," Asset cataloging, Shadow IT detection, HITL triage - ",e.jsx("span",{style:{color:"#3fb950"},children:"Production Ready"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"AAM (Adaptive API Mesh):"})," Data connectivity, 4 production connectors, drift detection - ",e.jsx("span",{style:{color:"#3fb950"},children:"Production Ready"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"DCL (Data Connection Layer):"})," AI entity mapping, knowledge graphs, agent context - ",e.jsx("span",{style:{color:"#3fb950"},children:"Production Ready"})]})]}),e.jsx("h5",{style:{color:"#ffc107",marginTop:"1rem",marginBottom:"0.5rem"},children:"Work in Progress Modules"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"AOA (Agentic Orchestration Architecture):"})," High-level agent orchestration and workflow automation - ",e.jsx("span",{style:{color:"#ffc107"},children:"In Development"})]}),e.jsxs("li",{children:[e.jsxs("strong",{children:[e.jsx("a",{href:"https://autonomos.cloud",style:{color:"#58a6ff",textDecoration:"none"},children:"RevOps Agent"}),":"]})," Revenue operations automation and CRM intelligence - ",e.jsx("span",{style:{color:"#ffc107"},children:"In Development"})]}),e.jsxs("li",{children:[e.jsxs("strong",{children:[e.jsx("a",{href:"https://autonomos.technology",style:{color:"#58a6ff",textDecoration:"none"},children:"FinOps Agent"}),":"]})," Financial operations and cloud cost optimization - ",e.jsx("span",{style:{color:"#ffc107"},children:"In Development"})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"NLP Intent / Control Center:"})," Natural language interface for platform control - ",e.jsx("span",{style:{color:"#ffc107"},children:"In Development"})]})]})]}),e.jsxs("section",{id:"accountability",className:"pg-section",children:[e.jsx("h2",{children:"Component Accountability Matrix"}),e.jsxs("div",{className:"pg-highlight-box",children:[e.jsx("strong",{children:"Purpose:"})," Clear ownership boundaries ensure architectural integrity and prevent responsibility drift."]}),e.jsx("h3",{children:"Who Owns What"}),e.jsxs("table",{className:"pg-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"50%"},children:"Capability"}),e.jsx("th",{style:{width:"15%"},children:"Owner"}),e.jsx("th",{style:{width:"35%"},children:"Plain English Description"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:3,style:{background:"#1c2128",fontWeight:"bold",color:"#3fb950"},children:"Data Discovery & Collection"})}),e.jsxs("tr",{children:[e.jsx("td",{children:"Finding your data sources"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-a",children:"AOD"})}),e.jsx("td",{children:"Automatically discovers where your data lives across your company"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Connecting to your apps"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-a",children:"AAM"})}),e.jsx("td",{children:"Handles logins, passwords, and security for each data source"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Pulling data from sources"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-a",children:"AAM"})}),e.jsx("td",{children:"Fetches your actual data and keeps it synchronized"})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,style:{background:"#1c2128",fontWeight:"bold",color:"#58a6ff"},children:"Intelligence & Understanding"})}),e.jsxs("tr",{children:[e.jsx("td",{children:"Understanding your data structure"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-a",children:"DCL"})}),e.jsx("td",{children:"AI figures out what your data means and how it relates"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Detecting when data changes"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-a",children:"AAM"})}),e.jsx("td",{children:"Notices when your source systems add or change fields"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Fixing broken connections automatically"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-a",children:"DCL"})}),e.jsx("td",{children:"AI automatically repairs mappings when sources change"})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:3,style:{background:"#1c2128",fontWeight:"bold",color:"#bc8cff"},children:"Action & Execution"})}),e.jsxs("tr",{children:[e.jsx("td",{children:"Running AI agents with your data"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-r",children:"AOA"})}),e.jsx("td",{children:"Gives agents the right data context to take actions"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Orchestrating workflows"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-a",children:"AOA"})}),e.jsx("td",{children:"Coordinates complex business processes across systems"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Monitoring what's happening"}),e.jsx("td",{children:e.jsx("span",{className:"pg-raci-r",children:"Platform"})}),e.jsx("td",{children:"Shows you data flowing through the system in real-time"})]})]})]}),e.jsx("h3",{children:"Layer Hierarchy"}),e.jsxs("div",{className:"pg-highlight-box",children:[e.jsx("p",{style:{marginBottom:"0.75rem"},children:e.jsx("strong",{children:"Data flows through the system in this order:"})}),e.jsxs("p",{style:{fontFamily:"monospace",fontSize:"0.95rem"},children:[e.jsx("strong",{style:{color:"#3fb950"},children:"AOD (Discovery Layer)"})," - Finds data sources and catalogs assets",e.jsx("br",{}),"↓",e.jsx("br",{}),e.jsx("strong",{style:{color:"#3fb950"},children:"AAM (Transport Layer)"})," - Connects, fetches, and normalizes data",e.jsx("br",{}),"↓",e.jsx("br",{}),e.jsx("strong",{style:{color:"#3fb950"},children:"DCL (Intelligence Layer)"})," - Makes sense of data and powers AI agents",e.jsx("br",{}),"↓",e.jsx("br",{}),e.jsx("strong",{style:{color:"#ffc107"},children:"AOA (Orchestration Layer)"})," - Coordinates multi-step workflows",e.jsx("br",{}),"↓",e.jsx("br",{}),e.jsx("strong",{style:{color:"#ffc107"},children:"Agents (Action Layer)"})," - Execute business workflows"]})]})]}),e.jsxs("section",{id:"components",className:"pg-section",children:[e.jsx("h2",{children:"Platform Components (Plain English)"}),e.jsx("p",{style:{marginBottom:"1.5rem",color:"#8b949e"},children:"Here's what each part of the platform does, explained in simple terms."}),e.jsx("h3",{children:"AOD (Autonomous Object Discovery)"}),e.jsx("p",{style:{marginBottom:"1rem",color:"#8b949e"},children:`The "scout" that automatically finds all the places your company stores data—databases, spreadsheets, cloud apps, file servers—even ones IT doesn't know about (Shadow IT).`}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Asset Discovery:"})," Automatically scans your network and cloud to find data sources"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Shadow IT Detection:"})," Machine learning identifies risky unauthorized data sources (precision ≥60%, recall ≥60%)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"NLP Query Interface:"})," ",e.jsx("span",{className:"pg-status-badge pg-status-demo",children:"Demo"}),' Ask questions in plain English to find data sources (example: "show me all production databases")']}),e.jsxs("li",{children:[e.jsx("strong",{children:"Human Review Workflow:"})," Security analysts can approve, quarantine, or investigate discovered assets"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Auto-Connect to AAM:"})," Approved sources automatically connect to the data mesh"]})]}),e.jsx("h3",{children:"AAM (Adaptive API Mesh)"}),e.jsx("p",{style:{marginBottom:"1rem",color:"#8b949e"},children:'The "plumbing" that connects to all your data sources, pulls data, and keeps everything synchronized - even when source systems change.'}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"4 Production Connectors:"})," Salesforce (CRM), MongoDB (database), FileSource (CSV/Excel), Supabase (PostgreSQL)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Unified Data Format:"})," Converts different data formats into a standard structure your company can use"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Change Detection:"})," Automatically notices when a source system adds or removes fields"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Self-Healing:"})," AI automatically fixes broken connections when source systems change their structure"]})]}),e.jsx("h3",{children:"DCL (Data Connection Layer)"}),e.jsx("p",{style:{marginBottom:"1rem",color:"#8b949e"},children:'The "brain" that builds your enterprise ontology—a unified understanding of how all your data connects and relates across every system.'}),e.jsx("div",{className:"pg-highlight-box",style:{marginBottom:"1rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Why Ontology Matters:"}),` Without an ontology, each system speaks its own language. "customer_id" in Salesforce, "cust_id" in your database, and "client_num" in your spreadsheets all mean the same thing—but your tools don't know that. DCL creates a single source of truth that both AI agents and humans can use to get accurate, contextual answers across all your data sources.`]})}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Enterprise Ontology:"})," Single unified model of your business showing how entities relate (customers → orders → products → suppliers)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"AI-Powered Mapping:"})," LLM automatically understands how fields from different sources match up, eliminating manual data engineering"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Knowledge Graph Generation:"})," Visual representation of your ontology that updates in real-time as data changes"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Agent Context Provider:"})," Gives AI agents the full context they need to take accurate, informed actions"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Multi-Company Support:"})," Keeps different companies' data completely separate and secure with tenant isolation"]})]}),e.jsx("h3",{children:"Live Flow Monitoring"}),e.jsx("p",{style:{marginBottom:"1rem",color:"#8b949e"},children:"Real-time dashboard showing data flowing through the system: Discovery → Connection → Intelligence → AI Agents"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Real-Time Visualization:"})," See data move through the pipeline as it happens"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Event Tracking:"})," Monitor every step from discovery to AI agent execution"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Instant Updates:"})," WebSocket streaming with less than 1 second latency"]})]})]}),e.jsxs("section",{id:"connectors",className:"pg-section",children:[e.jsx("h2",{children:"Production Connectors (4 Operational)"}),e.jsx("p",{style:{marginBottom:"1.5rem",color:"#8b949e"},children:"These are the data sources we can connect to right now. Each connector handles authentication, data fetching, and automatic updates."}),e.jsxs("table",{className:"pg-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Connector"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"What It Does"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Salesforce"})}),e.jsx("td",{children:"CRM Platform"}),e.jsx("td",{children:e.jsx("span",{className:"pg-status-badge pg-status-operational",children:"Live"})}),e.jsx("td",{children:"Connects to your Salesforce accounts, contacts, and opportunities"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"MongoDB"})}),e.jsx("td",{children:"NoSQL Database"}),e.jsx("td",{children:e.jsx("span",{className:"pg-status-badge pg-status-operational",children:"Live"})}),e.jsx("td",{children:"Pulls data from MongoDB document databases"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"FileSource"})}),e.jsx("td",{children:"Spreadsheets"}),e.jsx("td",{children:e.jsx("span",{className:"pg-status-badge pg-status-operational",children:"Live"})}),e.jsx("td",{children:"Reads CSV and Excel files your team uses"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:"Supabase"})}),e.jsx("td",{children:"Cloud Database"}),e.jsx("td",{children:e.jsx("span",{className:"pg-status-badge pg-status-operational",children:"Live"})}),e.jsx("td",{children:"Connects to Supabase PostgreSQL databases with real-time sync"})]})]})]}),e.jsx("h3",{children:"What Each Connector Can Do"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("span",{className:"pg-checkmark",children:"✓"})," Secure authentication (OAuth 2.0 where available)"]}),e.jsxs("li",{children:[e.jsx("span",{className:"pg-checkmark",children:"✓"})," Automatic discovery of data structure"]}),e.jsxs("li",{children:[e.jsx("span",{className:"pg-checkmark",children:"✓"})," Converts data to unified format"]}),e.jsxs("li",{children:[e.jsx("span",{className:"pg-checkmark",children:"✓"})," Detects and auto-repairs when source changes"]}),e.jsxs("li",{children:[e.jsx("span",{className:"pg-checkmark",children:"✓"})," Production credentials stored securely"]})]})]}),e.jsxs("section",{id:"roadmap",className:"pg-section",children:[e.jsx("h2",{children:"Platform Roadmap"}),e.jsx("p",{style:{marginBottom:"1.5rem",color:"#8b949e"},children:"Here's what's built, what's in progress, and what's next for each module of the platform."}),e.jsx("h3",{children:"AOD (Autonomous Object Discovery)"}),e.jsxs("p",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:"#3fb950"},children:"MVP Complete - Production Ready"})]}),e.jsx("p",{style:{marginBottom:"1rem",color:"#8b949e",fontStyle:"italic"},children:"External microservice managing 415 assets with 62 currently in triage (F1 score 85-92%)"}),e.jsx("h4",{style:{color:"#3fb950"},children:"MVP Complete"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Hybrid discovery engine (Rules-only, ML-only, Hybrid modes)"}),e.jsx("li",{children:"Multi-signal ML models (GradientBoosting + IsolationForest)"}),e.jsx("li",{children:"HITL triage system with 4-queue risk categorization (HIGH, MEDIUM, SHADOW IT, DATA CONFLICTS)"}),e.jsx("li",{children:"10+ triage actions with full audit trail and state management"}),e.jsx("li",{children:"Professional SecOps dashboard with 5-tab navigation"}),e.jsx("li",{children:"Enterprise auto-connect to AAM for approved assets"}),e.jsxs("li",{children:["NLP query interface for asset discovery ",e.jsx("span",{className:"pg-status-badge pg-status-demo",children:"Demo"})]}),e.jsx("li",{children:"Digital twin synthetic data generation (10 archetypes)"})]}),e.jsx("h4",{style:{color:"#f85149"},children:"Current Limitations"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Single-tenant deployment only (no multi-tenancy yet)"}),e.jsx("li",{children:"Connection pool contention under 50+ concurrent users"}),e.jsx("li",{children:"Audit trail stored in files instead of database"})]}),e.jsx("h4",{style:{color:"#f85149"},children:"NOW - Critical Path"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Supabase Migration with Multi-Tenancy:"})," Schema evolution, Row-Level Security (RLS), tenant isolation, data migration from Neon"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Performance Optimization:"})," Connection pool tuning for 100+ concurrent users, query optimization, Redis caching strategy"]})]}),e.jsx("h4",{style:{color:"#ffc107"},children:"NEXT - Value-Adds"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Discovery Intelligence:"})," Active learning from HITL feedback, Explainable AI (SHAP/LIME), advanced detection patterns"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"API & Integration:"})," GraphQL endpoints, event streaming, platform integration hooks"]})]}),e.jsx("h4",{style:{color:"#58a6ff"},children:"LATER - Future"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"UX Enhancements:"})," Bulk triage actions, network graph visualizations, mobile-responsive design"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Advanced Automation:"})," Workflow hooks for platform orchestrator (defer to platform AOA)"]})]}),e.jsx("h3",{children:"AAM (Adaptive API Mesh)"}),e.jsxs("p",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:"#3fb950"},children:"Production Ready"})]}),e.jsx("h4",{style:{color:"#3fb950"},children:"Completed"}),e.jsxs("ul",{children:[e.jsx("li",{children:"4 production connectors (Salesforce, MongoDB, FileSource, Supabase)"}),e.jsx("li",{children:"Canonical event normalization with Pydantic validation"}),e.jsx("li",{children:"Schema drift detection with fingerprinting"}),e.jsx("li",{children:"LLM-powered auto-repair with confidence scoring"}),e.jsx("li",{children:"Safe Mode and 90% SLO targets"})]}),e.jsx("h4",{style:{color:"#58a6ff"},children:"Next Steps"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Scale to several dozen connectors to prove enterprise scalability"}),e.jsx("li",{children:"Enhanced drift repair with multi-model LLM selection"}),e.jsx("li",{children:"Connector marketplace for community-built integrations"})]}),e.jsx("h3",{children:"DCL (Data Connection Layer)"}),e.jsxs("p",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:"#3fb950"},children:"Production Ready"})]}),e.jsx("h4",{style:{color:"#3fb950"},children:"Completed"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Enterprise ontology creation and management"}),e.jsx("li",{children:"AI-powered entity mapping with LLM + RAG"}),e.jsx("li",{children:"Knowledge graph generation with real-time updates"}),e.jsx("li",{children:"Multi-tenant architecture with Redis-backed state"}),e.jsx("li",{children:"WebSocket streaming for live visualization"})]}),e.jsx("h4",{style:{color:"#58a6ff"},children:"Next Steps"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Enhanced graph visualization with filtering"}),e.jsx("li",{children:"Graph-based query language for complex relationships"}),e.jsx("li",{children:"Automated data lineage tracking"})]}),e.jsx("h3",{children:"AOA (Agentic Orchestration Architecture)"}),e.jsxs("p",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:"#ffc107"},children:"In Development"})]}),e.jsx("h4",{style:{color:"#3fb950"},children:"Completed"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Basic API endpoints (state, connect, reset)"}),e.jsx("li",{children:"Task queue integration with Redis RQ"}),e.jsx("li",{children:"Multi-tenant job enforcement (1 active job per tenant)"}),e.jsx("li",{children:"AOD discovery integration for asset handoff"}),e.jsx("li",{children:"Demo scan functionality"})]}),e.jsx("h4",{style:{color:"#ffc107"},children:"In Progress"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Multi-step workflow engine"}),e.jsx("li",{children:"Cross-domain playbook execution (data + compute + network)"}),e.jsx("li",{children:"Workflow state machine with error recovery"}),e.jsx("li",{children:"Business process automation templates"})]}),e.jsx("h4",{style:{color:"#58a6ff"},children:"Planned"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Visual workflow designer"}),e.jsx("li",{children:"Workflow versioning and rollback"}),e.jsx("li",{children:"Advanced scheduling and triggers"})]}),e.jsx("h3",{children:"Pre-Built AI Agents"}),e.jsxs("p",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:"#ffc107"},children:"In Development"})]}),e.jsx("h4",{style:{color:"#3fb950"},children:"Completed"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Agent execution framework via DCL"}),e.jsx("li",{children:"Agent context management with data access"}),e.jsx("li",{children:"Agent metadata support (Phase 4)"})]}),e.jsx("h4",{style:{color:"#ffc107"},children:"In Progress"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsxs("strong",{children:[e.jsx("a",{href:"https://autonomos.technology",style:{color:"#58a6ff",textDecoration:"none"},children:"FinOps Agent"}),":"]})," Cloud cost optimization, budget forecasting, and financial operations automation"]}),e.jsxs("li",{children:[e.jsxs("strong",{children:[e.jsx("a",{href:"https://autonomos.cloud",style:{color:"#58a6ff",textDecoration:"none"},children:"RevOps Agent"}),":"]})," Revenue intelligence, pipeline analysis, and CRM workflow automation"]}),e.jsx("li",{children:"Agent-to-agent communication protocols"}),e.jsx("li",{children:"HITL approval workflows for agent actions"})]}),e.jsx("h4",{style:{color:"#58a6ff"},children:"Planned"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Agent marketplace and custom agent builder"}),e.jsx("li",{children:"Agent performance analytics"}),e.jsx("li",{children:"Multi-agent swarm coordination"})]}),e.jsx("h3",{children:"NLP / Intent (Control Center)"}),e.jsxs("p",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:"#ffc107"},children:"In Development"})]}),e.jsx("h4",{style:{color:"#3fb950"},children:"Completed"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Persona classification (CTO, CRO, COO, CFO)"}),e.jsx("li",{children:"Query routing to appropriate systems"}),e.jsxs("li",{children:["Persona-specific dashboard summaries ",e.jsx("span",{className:"pg-status-badge pg-status-demo",children:"Demo"})]}),e.jsx("li",{children:"Knowledge base search stubs"})]}),e.jsx("h4",{style:{color:"#ffc107"},children:"In Progress"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Production RAG knowledge base with vector search"}),e.jsx("li",{children:"Real-time data integration for dashboard summaries"}),e.jsx("li",{children:"Advanced intent parsing and disambiguation"})]}),e.jsx("h4",{style:{color:"#58a6ff"},children:"Planned"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Multi-turn conversation support"}),e.jsx("li",{children:"Voice interface integration"}),e.jsx("li",{children:"Proactive insights and recommendations"}),e.jsx("li",{children:"Custom persona creation for domain-specific roles"})]}),e.jsx("h3",{children:"Security & Compliance"}),e.jsxs("p",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{style:{color:"#58a6ff"},children:"Planned"})]}),e.jsx("h4",{style:{color:"#3fb950"},children:"Completed"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Multi-tenant data isolation with tenant_id scoping"}),e.jsx("li",{children:"JWT-based authentication with Argon2 password hashing"}),e.jsx("li",{children:"Secure credential storage for production connectors"}),e.jsx("li",{children:"Shadow IT detection and HITL triage workflow"})]}),e.jsx("h4",{style:{color:"#58a6ff"},children:"Planned"}),e.jsxs("ul",{children:[e.jsx("li",{children:"SOC 2 Type II compliance certification"}),e.jsx("li",{children:"Role-based access control (RBAC) for team permissions"}),e.jsx("li",{children:"Audit logging and compliance reporting"}),e.jsx("li",{children:"Data encryption at rest and in transit"}),e.jsx("li",{children:"PII detection and redaction automation"}),e.jsx("li",{children:"Security agent for automated threat detection and response"})]}),e.jsx("div",{className:"pg-highlight-box",style:{marginTop:"2rem"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Roadmap items are prioritized based on customer feedback and platform needs. Timeline details are intentionally omitted as we use an agile, priority-based approach rather than fixed schedules."]})})]}),e.jsxs("div",{className:"pg-section",style:{textAlign:"center",color:"#8b949e"},children:[e.jsx("p",{children:"AutonomOS - Multi-Tenant AI Orchestration Platform"}),e.jsx("p",{style:{fontSize:"0.85rem",marginTop:"0.5rem"},children:"Last Updated: November 19, 2025 | Phase 4 Complete - Production Ready"})]})]})]})}function ir({status:t,tooltip:s,className:n=""}){return t==="live"?e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-500/10 border border-green-500/30 ${n}`,title:s||"Live data from backend services",role:"status","aria-label":"Live data indicator",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse","aria-hidden":"true"}),e.jsx("span",{className:"text-xs font-medium text-green-400",children:"Live"})]}):null}const Va={"nlp-gateway":{status:"live",tooltip:"Connected to backend NLP services with real-time API responses"},"aam-monitor":{status:"live",tooltip:"Live AAM metrics from backend connectors and event streams"},"aam-connections":{status:"live",tooltip:"Real-time connection status from backend AAM service"},"aam-events":{status:"live",tooltip:"Live event stream from AAM monitoring"},"aam-intelligence":{status:"live",tooltip:"Real-time drift detection and repair metrics from AAM"},"dcl-graph":{status:"live",tooltip:"Live unified ontology from backend DCL engine"},"dcl-sankey":{status:"live",tooltip:"Real-time data flow visualization from DCL materialized views"},"aod-dashboard":{status:"live",tooltip:"Live external AOD Dashboard (aos-discover.replit.app)"},"finops-agent":{status:"live",tooltip:"Live FinOps agent demo (axiom-finops-demo.replit.app)"},"revops-agent":{status:"live",tooltip:"Live RevOps agent demo (autonomos-dcl-light.replit.app)"},"aoa-status":{status:"demo",tooltip:"Simulated orchestration metrics with client-side animations"},"agent-performance":{status:"demo",tooltip:"Mock agent performance data for demonstration purposes"},"xao-metrics":{status:"demo",tooltip:"Demo cross-agentic orchestration metrics"},"hitl-queue":{status:"demo",tooltip:"Static demonstration data for HITL workflow"},"discover-stats":{status:"demo",tooltip:"Fixed demo statistics for asset discovery pipeline"},"discover-pipeline":{status:"demo",tooltip:"Demo pipeline metrics showing typical processing flow"},"discover-triage":{status:"demo",tooltip:"Example HITL triage categories with static counts"},"discover-catalog":{status:"demo",tooltip:"Sample catalogued inventory data"},"discover-action-log":{status:"demo",tooltip:"Demo automated action log with sample events"}};function lr(t){return Va[t]}const Ga={cto:"CTO",cro:"CRO",coo:"COO",cfo:"CFO"},qa={cto:wa,cro:Os,coo:za,cfo:xa},Ua={cto:"blue",cro:"purple",coo:"green",cfo:"amber"};function at(t){return Ga[t]}function cr(t){return qa[t]}function Ya(t){return Ua[t]}const Za={cto:["Any connector drift today?","Show dependencies for checkout-service","List degraded connectors","What apps are missing owners?"],cro:["Show this quarter's pipeline by stage","What's win rate vs last quarter?","Which deals are slipping?","Top 10 opportunities by value"],coo:["Cloud spend MTD vs budget","Renewals due in 30 days","Top cost centers MTD","Vendors > $50k last 30d"],cfo:["Revenue MTD / QTD / YTD","Gross margin trend","Cash, burn, runway","DSO / DPO last 90d"]};function Ka({persona:t}){const[s,n]=p.useState([]),[r,o]=p.useState(""),[i,a]=p.useState(!1),[l,c]=p.useState(null),m=Za[t],d=async(h,v)=>{h&&h.preventDefault();const x=v||r;if(!x.trim()||i)return;const w={role:"user",content:x};n(y=>[...y,w]),o(""),a(!0);try{const y=localStorage.getItem("token"),j=await(await fetch("/nlp/v1/query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:y?`Bearer ${y}`:""},body:JSON.stringify({query:x,persona:t})})).json();j.resolved_persona&&c(j.resolved_persona);let k="",_=[];j.matches?(k=j.matches.map((R,D)=>`${D+1}. ${R.title}
${R.content}
Score: ${R.score.toFixed(3)}`).join(`

`),_=j.matches.map(R=>`${R.title}: ${R.section}`)):j.response?k=j.response:k=JSON.stringify(j,null,2);const M={role:"assistant",content:k,trace_id:j.trace_id,sources:_};n(R=>[...R,M])}catch(y){const f={role:"assistant",content:`Error: ${y instanceof Error?y.message:"Failed to connect to NLP Gateway"}`};n(j=>[...j,f])}finally{a(!1)}},g=h=>{o(h),d(void 0,h)},u=()=>{n([]),o("")};return e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-900 to-blue-900 px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tr,{className:"w-5 h-5 text-white"}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:"AOS NLP Gateway"}),e.jsx(ir,{...lr("nlp-gateway")}),s.length>0&&e.jsxs("button",{onClick:u,className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-600 hover:bg-red-700 text-white rounded transition-colors",title:"Clear conversation",children:[e.jsx(Ia,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Clear"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-300 bg-gray-700 bg-opacity-50 px-2 py-1 rounded flex items-center gap-1.5",children:[e.jsx("span",{className:"text-gray-400",children:"Resolved:"}),e.jsx("span",{className:"font-medium text-white",children:at(l||t)}),e.jsx("span",{className:"text-gray-400",children:"(Auto)"})]}),e.jsx("button",{className:"flex items-center gap-1 px-2 py-1 text-xs text-gray-300 hover:text-white transition-colors group",title:"Queries are automatically routed to the appropriate domain expertise based on detected persona",children:e.jsx(Ls,{className:"w-3.5 h-3.5 group-hover:text-blue-400"})})]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("form",{onSubmit:d,className:"flex gap-3",children:[e.jsx("input",{type:"text",value:r,onChange:h=>o(h.target.value),placeholder:"Ask anything about AutonomOS services...",className:"flex-1 px-6 py-4 text-lg bg-gray-700 border-2 border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:i,autoFocus:!0}),e.jsx("button",{type:"submit",disabled:i||!r.trim(),className:"px-6 py-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed rounded-lg text-white font-semibold transition-colors flex items-center gap-2 text-lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5 animate-spin"}),"Thinking"]}):e.jsxs(e.Fragment,{children:[e.jsx(_a,{className:"w-5 h-5"}),"Send"]})})]}),e.jsx("div",{className:"space-y-3 bg-gray-900 bg-opacity-50 rounded-lg p-4 border border-gray-700",children:s.length===0?e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"text-center space-y-4 max-w-2xl mx-auto",children:[e.jsxs("p",{className:"text-gray-400 text-sm mb-3",children:["Get started with these ",at(t)," prompts:"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:m.map((h,v)=>e.jsx("button",{onClick:()=>g(h),className:"p-2 bg-gray-800 hover:bg-gray-700 rounded text-left text-xs text-gray-300 transition-colors border border-gray-700",children:h},v))})]})}):s.map((h,v)=>e.jsxs("div",{className:`p-4 rounded-lg ${h.role==="user"?"bg-blue-900 bg-opacity-40 border border-blue-700":"bg-gray-800 border border-gray-600"}`,children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-2 flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold",children:h.role==="user"?"You":"NLP Gateway"}),h.trace_id&&e.jsx("span",{className:"font-mono text-gray-500",children:h.trace_id})]}),e.jsx("div",{className:"text-gray-200 whitespace-pre-wrap font-mono text-sm",children:h.content}),h.sources&&h.sources.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Sources:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:h.sources.map((x,w)=>e.jsx("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded text-gray-300",children:x},w))})]})]},v))}),e.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Tenant: demo-tenant | Env: prod | Auth: JWT"})]})]})}function Xa(t){const[s,n]=p.useState(null),[r,o]=p.useState(!0),[i,a]=p.useState(null);return p.useEffect(()=>{let l=!0;async function c(){o(!0),a(null);try{const m=localStorage.getItem("token"),d=await fetch(`/nlp/v1/persona/summary?persona=${t}`,{method:"GET",headers:{Authorization:m?`Bearer ${m}`:"","Content-Type":"application/json"}});if(!d.ok)throw new Error(`Failed to fetch persona summary: ${d.statusText}`);const g=await d.json();l&&n(g)}catch(m){l&&a(m instanceof Error?m.message:"Unknown error")}finally{l&&o(!1)}}return c(),()=>{l=!1}},[t]),{data:s,loading:r,error:i}}function Qa({persona:t}){const{data:s,loading:n,error:r}=Xa(t);if(n)return e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-12",children:e.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[e.jsx(Et,{className:"w-6 h-6 animate-spin"}),e.jsxs("span",{children:["Loading ",at(t)," dashboard..."]})]})});if(r)return e.jsx("div",{className:"bg-gray-800 rounded-lg border border-red-700 p-6",children:e.jsxs("div",{className:"flex items-center gap-3 text-red-400",children:[e.jsx(Qt,{className:"w-5 h-5"}),e.jsxs("span",{children:["Failed to load dashboard: ",r]})]})});if(!s)return null;const o={blue:"from-blue-900 to-cyan-900",purple:"from-purple-900 to-pink-900",green:"from-green-900 to-emerald-900",amber:"from-amber-900 to-orange-900"},i=o[Ya(t)]||o.blue,a=cr(t);return e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsx("div",{className:`bg-gradient-to-r ${i} px-6 py-4 border-b border-gray-700`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a,{className:"w-8 h-8 text-white"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:[at(t)," Dashboard"]}),e.jsx("p",{className:"text-sm text-gray-300",children:"Role-specific KPIs and insights"})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.tiles.map(l=>{const c=l.note==="stub",m=l.mock===!0,d=c?"div":"a";return e.jsxs(d,{href:c?void 0:l.href,className:`block p-4 rounded-lg border transition-colors ${c?"bg-gray-900 border-gray-700 opacity-60 cursor-not-allowed":"bg-gray-900 border-gray-700 hover:border-gray-600 hover:shadow-lg"}`,title:c?"Data source not connected yet":m?"Demo data (connect sources to replace)":l.title,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400",children:l.title}),m&&e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-amber-900 bg-opacity-40 text-amber-400 border border-amber-700 rounded",children:"Demo"})]}),l.delta&&!c&&e.jsxs("span",{className:`text-xs flex items-center gap-1 ${l.delta.startsWith("+")?"text-green-400":"text-red-400"}`,children:[l.delta.startsWith("+")?e.jsx(Os,{className:"w-3 h-3"}):e.jsx(ar,{className:"w-3 h-3"}),l.delta]})]}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:l.value??e.jsx("span",{className:"text-gray-600",children:"—"})}),e.jsx("div",{className:"text-xs text-gray-500",children:l.timeframe}),c&&e.jsx("div",{className:"mt-2 text-xs text-amber-600 italic",children:"Coming soon"}),!c&&!m&&l.value===null&&e.jsx("div",{className:"mt-2 text-xs text-blue-400 italic",children:"Connecting..."})]},l.key)})}),e.jsxs("div",{className:`rounded-lg border p-4 ${s.table.note==="stub"?"bg-gray-900 border-gray-700 opacity-60":"bg-gray-900 border-gray-700"}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:s.table.title}),s.table.rows.length===0?e.jsx("div",{className:"text-center py-8",children:s.table.note==="stub"?e.jsxs("div",{className:"text-gray-500 flex flex-col items-center gap-2",children:[e.jsx(fa,{className:"w-12 h-12 text-gray-600"}),e.jsx("p",{className:"text-lg mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This data source will be available in a future release"})]}):e.jsxs("div",{className:"text-gray-500 flex flex-col items-center gap-2",children:[e.jsx(nr,{className:"w-12 h-12 text-blue-600"}),e.jsx("p",{className:"text-lg mb-2",children:"No data yet"}),e.jsx("p",{className:"text-sm text-blue-400",children:"Connect your data source to see insights here"})]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-gray-700",children:s.table.columns.map((l,c)=>e.jsx("th",{className:"text-left p-3 text-gray-400 font-medium",children:l},c))})}),e.jsx("tbody",{children:s.table.rows.map((l,c)=>e.jsx("tr",{className:"border-b border-gray-800 hover:bg-gray-800",children:l.map((m,d)=>e.jsx("td",{className:"p-3 text-gray-200",children:m},d))},c))})]})})]}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["Trace ID: ",s.trace_id]})]})]})}const Ja={data_engineer:"cto",revops:"cro",finops:"coo",finance:"cfo"};function un(){const t=localStorage.getItem("aos.persona");if(t){const n=Ja[t];if(n)return localStorage.setItem("aos.persona",n),{persona:n,source:"localStorage (migrated)"};if(["cto","cro","coo","cfo"].includes(t))return{persona:t,source:"localStorage"}}const s=localStorage.getItem("token");if(s)try{const n=s.split(".");if(n.length===3){let r=n[1].replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";const o=JSON.parse(atob(r));if(o.role&&["cto","cro","coo","cfo"].includes(o.role))return{persona:o.role,source:"jwt"}}}catch{}return{persona:"coo",source:"default"}}function ei(){const[t,s]=p.useState(()=>un().persona),n=["cto","cro","coo","cfo"];return p.useEffect(()=>{const{persona:r,source:o}=un();console.info(`[ControlCenter] persona=${r} source=${o}`)},[]),p.useEffect(()=>{localStorage.setItem("aos.persona",t)},[t]),e.jsxs("div",{className:"space-y-8 px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"bg-gray-800/40 border border-gray-700/50 rounded-lg px-4 py-2",children:e.jsxs("p",{className:"text-sm text-gray-400 text-center",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Demo Environment"})," • This interface demonstrates platform capabilities with static mock data"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Control Center"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Natural language interface to all AutonomOS services. Query your data, manage finances, investigate incidents, and discover dependencies—all through conversational AI with RAG-powered knowledge retrieval."})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg border border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Select Role:"}),e.jsx("div",{className:"flex gap-2",children:n.map(r=>{const o=cr(r);return e.jsxs("button",{onClick:()=>s(r),className:`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${t===r?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{children:at(r)})]},r)})})]})}),e.jsx(Ka,{persona:t}),e.jsx(Qa,{persona:t})]})}function ti(){const[t,s]=p.useState([{id:"1",asset_name:"aws-prod-db-01",asset_type:"Database",risk_level:"high",risk_score:.92,vendor:"AWS",discovered_at:new Date().toISOString(),reason:"Unencrypted database with public access detected",metadata:{region:"us-east-1",size:"2TB",connections:247}},{id:"2",asset_name:"shadow-saas-tool-42",asset_type:"SaaS",risk_level:"high",risk_score:.88,vendor:"Unknown",discovered_at:new Date().toISOString(),reason:"Unauthorized SaaS tool with company data access",metadata:{users:15,data_access:"full",cost_monthly:"$299"}},{id:"3",asset_name:"staging-api-gateway",asset_type:"Service",risk_level:"medium",risk_score:.65,vendor:"GCP",discovered_at:new Date().toISOString(),reason:"Staging environment with production credentials",metadata:{region:"us-central1",requests_per_day:1200}},{id:"4",asset_name:"legacy-payment-processor",asset_type:"Service",risk_level:"medium",risk_score:.58,vendor:"On-Premise",discovered_at:new Date().toISOString(),reason:"Outdated SSL certificate and deprecated API version",metadata:{ssl_expires:"2024-12-01",api_version:"1.2"}}]),[n,r]=p.useState(null),[o,i]=p.useState(""),[a,l]=p.useState("all"),c=u=>{n&&(console.log("[HITL] Decision made:",{asset_id:n.id,asset_name:n.asset_name,decision:u,notes:o}),s(t.filter(h=>h.id!==n.id)),r(null),i(""))},m=a==="all"?t:t.filter(u=>u.risk_level===a),d=t.filter(u=>u.risk_level==="high").length,g=t.filter(u=>u.risk_level==="medium").length;return e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-yellow-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center",children:e.jsx(Wt,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"HITL Review Queue"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Human-in-the-Loop decisions for edge case assets"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:d}),e.jsx("div",{className:"text-xs text-gray-400",children:"High Risk"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:g}),e.jsx("div",{className:"text-xs text-gray-400",children:"Medium Risk"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:t.length}),e.jsx("div",{className:"text-xs text-gray-400",children:"Total Queue"})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="all"?"bg-cyan-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["All (",t.length,")"]}),e.jsxs("button",{onClick:()=>l("high"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="high"?"bg-red-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["High Risk (",d,")"]}),e.jsxs("button",{onClick:()=>l("medium"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a==="medium"?"bg-yellow-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:["Medium Risk (",g,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 uppercase mb-2",children:"Pending Review"}),m.length===0?e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-8 text-center",children:[e.jsx(Vt,{className:"w-12 h-12 text-green-400 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-gray-400",children:"No assets in queue"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["All ",a," risk items reviewed"]})]}):m.map(u=>e.jsxs("div",{onClick:()=>r(u),className:`bg-gray-900/60 rounded-lg p-4 cursor-pointer transition-all border-l-4 ${u.risk_level==="high"?"border-red-500 hover:bg-red-900/20":"border-yellow-500 hover:bg-yellow-900/20"} ${n?.id===u.id?"ring-2 ring-cyan-500":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"text-base font-medium text-white",children:u.asset_name}),e.jsx("span",{className:"text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded",children:u.asset_type})]}),e.jsx("div",{className:"text-sm text-gray-400",children:u.vendor})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${u.risk_level==="high"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:u.risk_level.toUpperCase()}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Score: ",(u.risk_score*100).toFixed(0),"%"]})]})]}),e.jsx("div",{className:"text-sm text-gray-300 mt-2 line-clamp-2",children:u.reason}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-gray-500",children:[e.jsx(ot,{className:"w-3 h-3"}),new Date(u.discovered_at).toLocaleString()]})]},u.id))]}),e.jsx("div",{className:"bg-gray-900/50 rounded-lg p-6 border border-gray-700",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(qt,{className:"w-5 h-5 text-cyan-400"}),e.jsx("h4",{className:"text-lg font-medium text-white",children:"Asset Review"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Asset Name"}),e.jsx("div",{className:"text-white font-medium",children:n.asset_name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Type"}),e.jsx("div",{className:"text-white",children:n.asset_type})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Vendor"}),e.jsx("div",{className:"text-white",children:n.vendor})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Risk Assessment"}),e.jsxs("div",{className:`text-white font-medium ${n.risk_level==="high"?"text-red-400":"text-yellow-400"}`,children:[n.risk_level.toUpperCase()," - ",(n.risk_score*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Reason"}),e.jsx("div",{className:"text-white text-sm",children:n.reason})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Metadata"}),e.jsx("div",{className:"bg-gray-800 rounded p-3 text-xs font-mono text-gray-300 space-y-1",children:Object.entries(n.metadata).map(([u,h])=>e.jsxs("div",{children:[e.jsxs("span",{className:"text-cyan-400",children:[u,":"]})," ",JSON.stringify(h)]},u))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400 mb-2 block",children:"Decision Notes (Optional)"}),e.jsx("textarea",{value:o,onChange:u=>i(u.target.value),placeholder:"Add notes about your decision...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-cyan-500 transition-colors resize-none",rows:3})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>c("approve"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Vt,{className:"w-5 h-5"}),"Approve & Catalog"]}),e.jsxs("button",{onClick:()=>c("reject"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Fa,{className:"w-5 h-5"}),"Reject & Quarantine"]}),e.jsxs("button",{onClick:()=>c("flag"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-medium transition-colors",children:[e.jsx(Wt,{className:"w-5 h-5"}),"Flag for Further Review"]})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(qt,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Select an asset from the queue to review"}),e.jsx("p",{className:"text-sm mt-1",children:"Make decisions on high and medium risk items"})]})})]})]})}function si(){return e.jsxs("div",{className:"space-y-6 px-4 sm:px-6 py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Discover"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Autonomously fingerprints your entire tech stack. Catalogs 100s of apps, databases, and tools without manual configuration. Infers relationships instantly. Creates secure architectural views using metadata only."})]}),e.jsxs("div",{className:"mb-8 bg-gray-800 rounded-lg border border-cyan-500/30 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-600/20 to-purple-600/20 border-b border-cyan-500/30 px-4 py-3",children:e.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-cyan-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11 4a1 1 0 10-2 0v4a1 1 0 102 0V7zm-3 1a1 1 0 10-2 0v3a1 1 0 102 0V8zM8 9a1 1 0 00-2 0v2a1 1 0 102 0V9z",clipRule:"evenodd"})}),e.jsx(ir,{...lr("aod-dashboard")}),e.jsx("a",{href:"https://autonomos.network",target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-sm text-cyan-400 hover:text-cyan-300 underline font-normal",children:"Open in new tab ↗"})]})}),e.jsx("div",{className:"relative",style:{paddingBottom:"75%"},children:e.jsx("iframe",{src:"https://autonomos.network",className:"absolute inset-0 w-full h-full",title:"AOS Discover Dashboard",allow:"fullscreen",style:{border:"none",backgroundColor:"#1a1a1a"}})})]}),e.jsx(ti,{})]})}function dr(){const t=p.useContext(er);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const mn={success:"bg-green-500",failure:"bg-red-500",in_progress:"bg-purple-500",degraded:"bg-blue-500",pending:"bg-gray-500"},hn={success:Vt,failure:Qt,in_progress:ot,degraded:La,pending:ot},ni=()=>{const[t,s]=p.useState([]),[n,r]=p.useState([]),[o,i]=p.useState([]),[a,l]=p.useState(!1),[c,m]=p.useState(null),[d,g]=p.useState(null),u=p.useRef(null);p.useEffect(()=>{(async()=>{try{const x=await fetch("/api/v1/flow-monitor?tenant_id=default&limit_per_layer=100");if(x.ok){const w=await x.json();s(w.aam_events||[]),r(w.dcl_events||[]),i(w.agent_events||[])}else m("Failed to fetch flow snapshot")}catch(x){console.error("Error fetching flow snapshot:",x),m("Failed to connect to Flow Monitor API")}})()},[]),p.useEffect(()=>{const x=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/v1/ws/flow-monitor?tenant_id=default`,w=()=>{try{const y=new WebSocket(x);y.onopen=()=>{console.log("Flow Monitor WebSocket connected"),l(!0),m(null)},y.onmessage=f=>{try{const j=JSON.parse(f.data);if(j.type==="flow_event"){const k=j.event,_=j.layer;_==="aam"?s(M=>[k,...M].slice(0,100)):_==="dcl"?r(M=>[k,...M].slice(0,100)):_==="agent"&&i(M=>[k,...M].slice(0,100))}else j.type==="error"&&(console.error("WebSocket error:",j.message),m(j.message))}catch(j){console.error("Failed to parse WebSocket message:",j)}},y.onerror=f=>{console.error("WebSocket error:",f),l(!1),m("WebSocket connection error")},y.onclose=()=>{console.log("WebSocket disconnected, reconnecting..."),l(!1),setTimeout(w,3e3)},u.current=y}catch(y){console.error("Failed to create WebSocket:",y),m("Failed to create WebSocket connection")}};return w(),()=>{u.current&&u.current.close()}},[]);const h=(v,x,w,y)=>{const f=w;return e.jsxs("div",{className:"flex-1 bg-gray-800 rounded-lg shadow-lg p-6 overflow-hidden flex flex-col border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-700 pb-3",children:[e.jsx(f,{className:`w-6 h-6 ${y}`}),e.jsx("h2",{className:"text-lg font-semibold text-white",children:x}),e.jsxs("span",{className:"ml-auto bg-gray-700 px-3 py-1 rounded-full text-sm text-gray-300",children:[v.length," events"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",style:{maxHeight:"600px"},children:v.length===0?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(We,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No events yet"})]}):v.slice(0,20).map((j,k)=>{const _=hn[j.status]||ot,M=mn[j.status]||"bg-gray-500",R=typeof j.metadata=="string"?JSON.parse(j.metadata):j.metadata;return e.jsx("div",{className:"border border-gray-700 rounded-lg p-3 hover:border-gray-600 hover:bg-gray-800 transition-all bg-gray-900 cursor-pointer",onClick:()=>g(j),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`${M} rounded-full p-1.5 mt-0.5`,children:e.jsx(_,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-white truncate",children:j.entity_id}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${M} bg-opacity-20 text-gray-300`,children:j.stage.replace(/_/g," ")})]}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ot,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(j.timestamp).toLocaleTimeString()}),j.duration_ms&&e.jsxs("span",{className:"ml-2",children:["(",j.duration_ms,"ms)"]})]}),R&&Object.keys(R).length>0&&e.jsx("div",{className:"mt-1 text-xs text-gray-300 bg-gray-800 rounded px-2 py-1 border border-gray-700",children:Object.entries(R).slice(0,3).map(([D,I])=>e.jsxs("div",{className:"truncate",children:[e.jsxs("span",{className:"font-medium",children:[D,":"]})," ",typeof I=="object"?JSON.stringify(I):String(I)]},D))})]})]})]})},j.stream_id||`${j.event_id}-${k}`)})})]})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-6",children:[e.jsxs("div",{className:"max-w-[1800px] mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Live Flow Monitoring"}),e.jsx("p",{className:"text-gray-400",children:"Real-time telemetry across AAM → DCL → Agent pipeline"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border ${a?"bg-green-900/30 border-green-700 text-green-400":"bg-red-900/30 border-red-700 text-red-400"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:"text-sm font-medium",children:a?"Connected":"Disconnected"})]}),c&&e.jsxs("div",{className:"bg-red-900/30 border border-red-700 text-red-400 px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),c]})]})]})}),e.jsxs("div",{className:"flex gap-6",style:{height:"calc(100vh - 180px)"},children:[h(t,"AAM Connections",Ie,"text-green-400"),h(n,"DCL Intelligence",sr,"text-purple-400"),h(o,"Agent Execution",_t,"text-blue-400")]})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-6 z-50",onClick:()=>g(null),children:e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 max-w-3xl w-full max-h-[80vh] overflow-y-auto",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Event Details"}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Ts,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Event ID"}),e.jsx("div",{className:"mt-1 text-sm text-white font-mono bg-gray-900 p-2 rounded border border-gray-700",children:d.event_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Entity ID"}),e.jsx("div",{className:"mt-1 text-sm text-white font-mono bg-gray-900 p-2 rounded border border-gray-700",children:d.entity_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Layer"}),e.jsx("div",{className:"mt-1 text-sm text-white capitalize bg-gray-900 p-2 rounded border border-gray-700",children:d.layer})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Stage"}),e.jsx("div",{className:"mt-1 text-sm text-white bg-gray-900 p-2 rounded border border-gray-700",children:d.stage.replace(/_/g," ")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded ${mn[d.status]} bg-opacity-20 text-white text-sm`,children:[E.createElement(hn[d.status]||ot,{className:"w-4 h-4"}),d.status]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Tenant ID"}),e.jsx("div",{className:"mt-1 text-sm text-white font-mono bg-gray-900 p-2 rounded border border-gray-700",children:d.tenant_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Timestamp"}),e.jsx("div",{className:"mt-1 text-sm text-white bg-gray-900 p-2 rounded border border-gray-700",children:new Date(d.timestamp).toLocaleString()})]}),d.duration_ms&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Duration"}),e.jsxs("div",{className:"mt-1 text-sm text-white bg-gray-900 p-2 rounded border border-gray-700",children:[d.duration_ms," ms"]})]}),d.stream_id&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Stream ID"}),e.jsx("div",{className:"mt-1 text-sm text-white font-mono bg-gray-900 p-2 rounded border border-gray-700",children:d.stream_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"Metadata"}),e.jsx("div",{className:"mt-1 bg-gray-900 p-3 rounded border border-gray-700",children:e.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto",children:JSON.stringify(typeof d.metadata=="string"?JSON.parse(d.metadata):d.metadata,null,2)})})]})]})]})})]})};function ri(){const{isAuthenticated:t}=dr(),[s,n]=p.useState("connectors"),[r,o]=p.useState([]),[i,a]=p.useState(!1),[l,c]=p.useState(null),[m,d]=p.useState({activeConnections:287,healingEvents:12,driftAlerts:3,llmCalls:1234,llmTokens:21e5,ragMappings:14876});p.useEffect(()=>{const f=setInterval(()=>{d(j=>({activeConnections:j.activeConnections+Math.floor(Math.random()*3)-1,healingEvents:Math.max(0,j.healingEvents+Math.floor(Math.random()*3)-1),driftAlerts:Math.max(0,j.driftAlerts+Math.floor(Math.random()*2)-.5),llmCalls:j.llmCalls+Math.floor(Math.random()*5),llmTokens:j.llmTokens+Math.floor(Math.random()*1e3),ragMappings:j.ragMappings+Math.floor(Math.random()*10)}))},3e3);return()=>clearInterval(f)},[]);const g=()=>{const f=localStorage.getItem(fe);return f?{Authorization:`Bearer ${f}`}:{}},u=async()=>{a(!0);try{const f=await fetch(ge.buildApiUrl("/aam/connectors"),{headers:g()});if(f.status===401){console.log("No tenant context — sign in or select tenant."),o([]);return}if(!f.ok)throw new Error("Failed to fetch connectors");const j=await f.json();o(j.connectors||[])}catch(f){console.error("Error fetching connectors:",f)}finally{a(!1)}};p.useEffect(()=>{u();const f=setInterval(()=>{l&&u()},3e4);return()=>clearInterval(f)},[t,l]);const h=f=>{c(l===f?null:f)},v=f=>{const j={running:"bg-green-500/10 text-green-500 border-green-500/20",active:"bg-green-500/10 text-green-500 border-green-500/20",healing:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",pending:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",stopped:"bg-red-500/10 text-red-500 border-red-500/20",failed:"bg-red-500/10 text-red-500 border-red-500/20",error:"bg-red-500/10 text-red-500 border-red-500/20",inactive:"bg-gray-500/10 text-gray-500 border-gray-500/20"},k=j[f.toLowerCase()]||j.inactive;return e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium border ${k}`,children:f.toUpperCase()})},x=f=>f?new Date(f).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",w=f=>{if(!f||f===0)return"0 B";const j=1024,k=["B","KB","MB","GB"],_=Math.floor(Math.log(f)/Math.log(j));return Math.round(f/Math.pow(j,_)*100)/100+" "+k[_]},y=f=>{if(!f)return e.jsx("span",{className:"text-xs text-gray-500",children:"No sync data"});const k={succeeded:"bg-green-500/10 text-green-500 border-green-500/20",running:"bg-blue-500/10 text-blue-500 border-blue-500/20",failed:"bg-red-500/10 text-red-500 border-red-500/20",pending:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20"}[f.toLowerCase()]||"bg-gray-500/10 text-gray-500 border-gray-500/20";return e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium border ${k}`,children:f.toUpperCase()})};return e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"AOS AAM (Connect)"}),e.jsx("p",{className:"text-gray-400",children:"Adaptive API Mesh - Self-healing data connectivity and flow monitoring"})]})}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-700",children:[e.jsxs("button",{onClick:()=>n("connectors"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-all ${s==="connectors"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:[e.jsx(Ie,{className:"w-4 h-4"}),"Connector Details"]}),e.jsxs("button",{onClick:()=>n("flow-monitor"),className:`flex items-center gap-2 px-4 py-3 font-medium transition-all ${s==="flow-monitor"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-gray-300"}`,children:[e.jsx(Da,{className:"w-4 h-4"}),"Flow Monitor"]})]}),s==="flow-monitor"?e.jsx("div",{className:"-mx-6 -mb-6",children:e.jsx(ni,{})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-blue-900/20 to-green-900/20 rounded-xl border border-purple-500/30 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-purple-500/20 bg-black/40",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Rs,{className:"w-6 h-6 text-purple-400"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:["AAM Adaptive API Mesh",e.jsx("span",{className:"px-2 py-0.5 bg-amber-500/20 border border-amber-500/40 rounded text-xs font-medium text-amber-400",children:"DEMO"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Real-time orchestration intelligence and self-healing infrastructure"})]})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Active Connections"})]}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:m.activeConnections}),e.jsx("div",{className:"text-xs text-gray-400",children:"Across 47 data sources"})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ra,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Self-Healing Events"})]}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:m.healingEvents}),e.jsx("div",{className:"text-xs text-gray-400",children:"Auto-repairs last hour"})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wt,{className:"w-4 h-4 text-orange-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Schema Drift"})]}),e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"})]}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:m.driftAlerts}),e.jsx("div",{className:"text-xs text-gray-400",children:"Alerts detected"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(_t,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"LLM Intelligence"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Total Calls"}),e.jsx("span",{className:"text-lg font-bold text-white",children:m.llmCalls.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Tokens Processed"}),e.jsxs("span",{className:"text-lg font-bold text-white",children:[(m.llmTokens/1e6).toFixed(2),"M"]})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500 animate-pulse",style:{width:"73%"}})})]})]}),e.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(sr,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"RAG Learning"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Field Mappings"}),e.jsx("span",{className:"text-lg font-bold text-white",children:m.ragMappings.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Confidence Score"}),e.jsx("span",{className:"text-lg font-bold text-green-400",children:"86%"})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 animate-pulse",style:{width:"86%"}})})]})]})]})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-800",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"w-5 h-5 text-purple-400"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Connector Details"})]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[r.length," connection",r.length!==1?"s":""," configured"]})]}),i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(We,{className:"w-8 h-8 text-blue-400 animate-spin"})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ie,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No connectors found. Please sign in to view your connections."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-800/50 border-b border-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Connection Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Mappings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Drift"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:r.map(f=>{const j=l===f.id;return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-800/30 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:f.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",f.id.substring(0,8),"..."]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-500/10 border border-blue-500/30 rounded text-xs font-medium text-blue-400",children:f.source_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v(f.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:f.mapping_count})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.has_drift?e.jsxs("span",{className:"px-2 py-1 bg-orange-500/10 border border-orange-500/30 rounded text-xs font-medium text-orange-400 flex items-center gap-1 w-fit",children:[e.jsx(Wt,{className:"w-3 h-3"}),"DRIFT"]}):e.jsx("span",{className:"text-xs text-gray-500",children:"None"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>h(f.id),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors text-sm",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4"}),"Hide"]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4"}),"Details"]})})})]},f.id),j&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-950/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Connection ID"}),e.jsx("code",{className:"text-gray-300 bg-gray-800 px-2 py-1 rounded text-xs",children:f.id})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Source Type"}),e.jsx("div",{className:"text-white",children:f.source_type})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Mapping Count"}),e.jsxs("div",{className:"text-white",children:[f.mapping_count," field mappings"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Drift Status"}),e.jsx("div",{className:"text-white",children:f.has_drift?e.jsx("span",{className:"text-orange-400",children:"Drift Detected"}):e.jsx("span",{className:"text-green-400",children:"No Drift"})})]}),f.last_event_type&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Last Event"}),e.jsx("div",{className:"text-white",children:f.last_event_type})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Event Time"}),e.jsx("div",{className:"text-white",children:x(f.last_event_at)})]})]})]}),f.last_sync_status&&e.jsxs("div",{className:"border-t border-gray-800 pt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4 text-blue-400"}),"Last Sync Activity"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Sync Status"}),e.jsx("div",{children:y(f.last_sync_status)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Sync Time"}),e.jsx("div",{className:"text-white",children:x(f.last_sync_at)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Records Synced"}),e.jsx("div",{className:"text-white font-mono",children:f.last_sync_records!==null?f.last_sync_records.toLocaleString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Data Transferred"}),e.jsx("div",{className:"text-white font-mono",children:w(f.last_sync_bytes)})]})]})]})]})})})]})})})]})})]})]})]})}function oi(t,s,n){const r=new Map;for(let u=0;u<=3;u++)r.set(u,[]);t.forEach(u=>{const h=u.layer??1;r.has(h)||r.set(h,[]),r.get(h).push(u)});const o=4,a=(n.width-2*n.columnPadding)/(o-1),l=new Map;for(let u=0;u<o;u++)l.set(u,n.columnPadding+u*a);const c=[],m=new Map;r.forEach((u,h)=>{if(u.length===0)return;const v=l.get(h)??n.columnPadding,x=u.length,w=x*n.nodeWidth,y=Math.max(0,x-1)*n.nodePadding,f=w+y;let j=(n.height-f)/2;u.forEach(k=>{const _=n.nodeWidth,M={...k,x0:v,x1:v+n.nodeWidth,y0:j,y1:j+_,width:n.nodeWidth,height:_};c.push(M),m.set(k.id,M),j+=_+n.nodePadding})});const d=s.map(u=>{const h=m.get(u.source),v=m.get(u.target);if(!h||!v)return console.warn(`[Layout] Edge references missing node: ${u.source} → ${u.target}`),null;const x=ai(h,v);return{...u,sourceNode:h,targetNode:v,path:x}}).filter(u=>u!==null),g={minX:Math.min(...c.map(u=>u.x0)),maxX:Math.max(...c.map(u=>u.x1)),minY:Math.min(...c.map(u=>u.y0)),maxY:Math.max(...c.map(u=>u.y1))};return{nodes:c,edges:d,bounds:g}}function ai(t,s){const n=t.x1,r=t.y0+t.height/2,o=s.x0,i=s.y0+s.height/2,a=(n+o)/2;return`M ${n},${r} C ${a},${r} ${a},${i} ${o},${i}`}function ii(t){const s=[],n={};return t.forEach(r=>{const o=r.layer;o===void 0?s.push(`Node ${r.id} missing layer assignment`):(o<0||o>3)&&s.push(`Node ${r.id} has invalid layer ${o} (must be 0-3)`),n[o??-1]=(n[o??-1]??0)+1}),{valid:s.length===0,errors:s,distribution:n}}function li({isActive:t=!0,selectedSources:s=[],selectedAgents:n=[]}){const r=p.useRef(null),o=p.useRef(null),[i,a]=p.useState(null),[l,c]=p.useState({width:0,height:0}),[m,d]=p.useState(null),[g,u]=p.useState(null);return p.useEffect(()=>{if(!t)return;const h=async()=>{try{const w=await(await fetch(ge.buildDclUrl("/state"))).json();a(w)}catch(x){console.error("[Deterministic Graph] Error fetching state:",x)}};h();const v=()=>h();return window.addEventListener("dcl-state-changed",v),()=>window.removeEventListener("dcl-state-changed",v)},[t]),p.useEffect(()=>{if(!o.current)return;let h=null;const v=new ResizeObserver(x=>{h&&cancelAnimationFrame(h),h=requestAnimationFrame(()=>{for(const w of x){const{width:y,height:f}=w.contentRect;y>0&&c({width:y,height:f||400})}})});return v.observe(o.current),()=>{h&&cancelAnimationFrame(h),v.disconnect()}},[]),p.useLayoutEffect(()=>{!i||!r.current||!o.current||!i.nodes||i.nodes.length===0||l.width===0||l.height===0||ci(i,r.current,l,s,n,m,d,g,u)},[i,l,s,n,m,g]),!l.width||!l.height?e.jsx("div",{ref:o,className:"rounded-xl bg-gray-800/40 border border-gray-700 shadow-sm ring-1 ring-cyan-500/10 p-1 w-full md:min-h-[400px] flex items-center justify-center",children:e.jsx("div",{className:"flex items-center justify-center md:min-h-[400px]",children:e.jsx("div",{className:"text-sm text-gray-400 animate-pulse",children:"Loading graph..."})})}):e.jsx("div",{ref:o,className:"rounded-xl bg-gray-800/40 border border-gray-700 shadow-sm ring-1 ring-cyan-500/10 p-1 w-full md:min-h-[400px] flex items-center justify-center",children:e.jsx("svg",{ref:r,className:"w-full h-auto",style:{display:"block"}})})}function ci(t,s,n,r,o,i,a,l,c){const m=Nt(s);if(m.selectAll("*").remove(),!t.nodes||t.nodes.length===0){m.append("text").attr("x","50%").attr("y","50%").attr("text-anchor","middle").attr("fill","#94a3b8").attr("font-size","14px").text('No data available. Click "Connect & Map" to start.');return}const d={dynamics:{parent:"#3b82f6",child:"#60a5fa"},salesforce:{parent:"#8b5cf6",child:"#a78bfa"},sap:{parent:"#10b981",child:"#34d399"},netsuite:{parent:"#f59e0b",child:"#fbbf24"},legacy_sql:{parent:"#ef4444",child:"#f87171"},snowflake:{parent:"#06b6d4",child:"#22d3ee"},supabase:{parent:"#14b8a6",child:"#2dd4bf"},mongodb:{parent:"#10b981",child:"#34d399"}};console.log("[Deterministic Graph] Raw state from backend:",{totalNodes:t.nodes.length,nodeTypes:t.nodes.reduce((N,b)=>(N[b.type]=(N[b.type]||0)+1,N),{}),totalEdges:t.edges.length});const g=t.nodes.filter(N=>N.type==="source").slice(0,5);console.log("[Deterministic Graph] Sample source nodes:",g.map(N=>({id:N.id,label:N.label,sourceSystem:N.sourceSystem})));let u=t.nodes;if(r.length>0){const N=u.filter(S=>S.type==="source").length;u=u.filter(S=>{if(S.type!=="source")return!0;const L=S.sourceSystem&&r.includes(S.sourceSystem);return!L&&S.type==="source"&&console.log("[Deterministic Graph] Filtering OUT source node:",{id:S.id,sourceSystem:S.sourceSystem,selectedSources:r}),L});const b=u.filter(S=>S.type==="source").length;console.log("[Deterministic Graph] Source filtering result:",{before:N,after:b,removed:N-b})}o.length>0&&(u=u.filter(N=>{if(N.type!=="agent")return!0;const b=N.id.replace("agent_","");return o.includes(b)})),console.log("[Deterministic Graph] After filtering:",{filteredNodes:u.length,nodeTypes:u.reduce((N,b)=>(N[b.type]=(N[b.type]||0)+1,N),{}),selectedSources:r,selectedAgents:o});const h=new Set(u.map(N=>N.id)),v=t.edges.filter(N=>h.has(N.source)&&h.has(N.target));if(u.length===0){m.append("text").attr("x","50%").attr("y","50%").attr("text-anchor","middle").attr("fill","#94a3b8").attr("font-size","14px").text("No nodes match current filters.");return}const x={source_parent:0,source:1,ontology:2,agent:3},w=u.map(N=>({id:N.id,label:N.label,type:N.type,sourceSystem:N.sourceSystem,parentId:N.parentId,fields:N.fields,layer:x[N.type]??1})),y=v.map(N=>({source:N.source,target:N.target,value:1,edgeType:N.edgeType??"dataflow",fieldMappings:N.field_mappings,edgeLabel:N.label,entityFields:N.entity_fields,entityName:N.entity_name})),f=ii(w);console.log("[Deterministic Graph] Layer validation:",f),f.valid||console.error("[Deterministic Graph] Invalid layer assignments:",f.errors);const j={width:n.width,height:n.height,nodeWidth:8,nodePadding:18,columnPadding:40},k=oi(w,y,j);console.log("[Deterministic Graph] Layout calculated:",{totalNodes:k.nodes.length,distribution:f.distribution,bounds:k.bounds});const _=Math.min(n.height,100+k.nodes.length*40);m.attr("width",n.width).attr("height",_).attr("viewBox",`0 0 ${n.width} ${_}`);const M=(N,b,S)=>N.edgeType==="hierarchy"&&b?.type==="source_parent"?"#22c55e":N.edgeType==="hierarchy"?"#475569":S&&S.type==="agent"?"#9333ea":N.sourceSystem?d[N.sourceSystem]?.child||"#0bcad9":"#94a3b8",R=(N,b,S)=>S?N.edgeType==="hierarchy"?.6:.7:N.edgeType==="hierarchy"?.35:b&&(b.type==="source"||b.type==="source_parent")?.7:.4,D=N=>t.edges.some(b=>b.source===N&&(b.edgeType??"dataflow")==="dataflow"),I=(N,b)=>N.type==="ontology"?b?1:.9:N.type==="source"?D(N.id)?1:.5:N.type==="agent"?0:(N.type==="source_parent",.7),O=(N,b)=>b&&(N.type==="source"||N.type==="agent")?1:N.type==="source"?D(N.id)?1:.6:N.type==="agent"||N.type==="source_parent"?1:0,$=m.append("g").attr("class","edges"),z=Nt("body").selectAll(".sankey-edge-tooltip").data([null]).join("div").attr("class","sankey-edge-tooltip").style("position","fixed").style("background","rgba(15, 23, 42, 0.95)").style("color","#e2e8f0").style("padding","8px 12px").style("border-radius","6px").style("border","1px solid #475569").style("font-size","12px").style("pointer-events","none").style("z-index","10000").style("box-shadow","0 4px 6px rgba(0, 0, 0, 0.3)").style("max-width","400px").style("font-family","system-ui, -apple-system, sans-serif").style("opacity","0").style("display","none");$.selectAll("path").data(k.edges).join("path").attr("d",N=>N.path).attr("fill","none").attr("stroke",N=>{const b=k.nodes.find(L=>L.id===N.source),S=k.nodes.find(L=>L.id===N.target);return M(N,b,S)}).attr("stroke-width",N=>Math.min(Math.max(.5,N.value*2),20)).attr("opacity",N=>{const b=k.nodes.find(F=>F.id===N.source),S=`${N.source}-${N.target}`;return R(N,b,l===S)}).attr("stroke-linecap","round").style("cursor","pointer").on("mouseenter",function(N,b){const S=`${b.source}-${b.target}`;c(S);const L=k.nodes.find(H=>H.id===b.source),F=k.nodes.find(H=>H.id===b.target),B=di(L,F,b);z.html(B).style("left",N.pageX+10+"px").style("top",N.pageY-10+"px").style("opacity","1").style("display","block")}).on("mousemove",function(N){z.style("left",N.pageX+10+"px").style("top",N.pageY-10+"px")}).on("mouseleave",function(){c(null),z.style("opacity","0").style("display","none")});const A=m.append("g").attr("class","nodes"),C=Nt("body").selectAll(".sankey-tooltip").data([null]).join("div").attr("class","sankey-tooltip").style("position","absolute").style("background","rgba(15, 23, 42, 0.95)").style("color","#e2e8f0").style("padding","8px 12px").style("border-radius","6px").style("border","1px solid #475569").style("font-size","12px").style("pointer-events","none").style("opacity","0").style("z-index","1000").style("box-shadow","0 4px 6px rgba(0, 0, 0, 0.3)");A.selectAll("g").data(k.nodes).join("g").attr("class","node").attr("transform",N=>`translate(${N.x0},${N.y0})`).style("cursor","pointer").on("mouseenter",function(N,b){a(b.id);let S=`<strong>${b.label}</strong><br/>`;S+=`Type: ${b.type}`,(b.type==="source"||b.type==="source_parent")&&(S+=`<br/>System: ${b.sourceSystem||"Unknown"}`),C.html(S).style("opacity","1").style("left",N.pageX+10+"px").style("top",N.pageY-10+"px")}).on("mousemove",function(N){C.style("left",N.pageX+10+"px").style("top",N.pageY-10+"px")}).on("mouseleave",function(){a(null),C.style("opacity","0")}).append("rect").attr("width",N=>N.width).attr("height",N=>N.height).attr("fill","#1e293b").attr("fill-opacity",N=>I(N,i===N.id)).attr("stroke","#475569").attr("stroke-width",1).attr("stroke-opacity",N=>O(N,i===N.id)).attr("rx",2);const T=[];k.nodes.forEach(N=>{if(N.type==="source_parent"||N.type==="ontology"||N.type==="agent"){let b=N.label||"Unknown";N.type==="ontology"&&(b=b.replace(/\s*\(unified\)\s*/i,"").trim());const S=4,L=10,F=16,H=b.length*6+S*2;let G="#475569";N.type==="source_parent"?G="#22c55e":N.type==="ontology"?G="#60a5fa":N.type==="agent"&&(G="#9333ea"),T.push({node:N,label:b,fontSize:L,pillHeight:F,pillWidth:H,padding:S,borderColor:G})}}),T.forEach(N=>{const b=A.append("g").attr("class","node-label-group").attr("transform",`translate(${N.node.x0+N.node.width+8}, ${N.node.y0+N.node.height/2})`);b.append("rect").attr("x",0).attr("y",-N.pillHeight/2).attr("width",N.pillWidth).attr("height",N.pillHeight).attr("rx",N.pillHeight/2).attr("ry",N.pillHeight/2).attr("fill","#1e293b").attr("stroke",N.borderColor).attr("stroke-width",1.5).attr("fill-opacity",.9).attr("stroke-opacity",.9),b.append("text").attr("x",N.pillWidth/2).attr("y",0).attr("text-anchor","middle").attr("dominant-baseline","central").attr("fill","#e2e8f0").attr("font-size",N.fontSize).attr("font-family","system-ui, -apple-system, sans-serif").attr("font-weight","500").attr("pointer-events","none").text(N.label)}),console.log("[Deterministic Graph] Rendered successfully:",{nodes:k.nodes.length,edges:k.edges.length})}function di(t,s,n){if(!t||!s)return"Data Flow";const r=t.label||"Unknown",o=s.label||"Unknown";let i="";t.type==="source_parent"&&s.type==="source"?i="System to table connection":t.type==="source"&&s.type==="ontology"?i="Raw data mapped to unified schema":t.type==="ontology"&&s.type==="agent"?i="Ontology field consumed by agent":i="Data flow";let a=`
    <strong>Data Flow</strong><br>
    <span style="color: #94a3b8; font-size: 10px;">${i}</span><br>
    <div style="margin-top: 4px; padding-top: 4px; border-top: 1px solid #475569;">
      <span style="color: #60a5fa;">From:</span> ${r}<br>
      <span style="color: #34d399;">To:</span> ${o}
    </div>
  `;if(n.fieldMappings&&n.fieldMappings.length>0&&(a+=`
      <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #475569;">
        <strong style="color: #a78bfa; font-size: 10px;">Field Mappings:</strong><br>
        <div style="max-height: 120px; overflow-y: auto; margin-top: 4px;">
    `,n.fieldMappings.forEach(l=>{const c=l.source||"N/A",m=l.onto_field||"N/A",d=l.confidence?`(${Math.round(l.confidence*100)}%)`:"";a+=`
        <div style="font-size: 10px; margin: 2px 0; color: #cbd5e1;">
          <span style="color: #60a5fa;">${c}</span> → <span style="color: #34d399;">${m}</span> <span style="color: #94a3b8;">${d}</span>
        </div>
      `}),a+="</div></div>"),t.type==="ontology"&&s.type==="agent"&&n.entityFields&&n.entityFields.length>0){const l=n.entityName||"entity";a+=`
      <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #475569;">
        <strong style="color: #a78bfa; font-size: 10px;">Unified ${l.replace("_"," ").toUpperCase()} Fields:</strong><br>
        <div style="max-height: 120px; overflow-y: auto; margin-top: 4px;">
    `,n.entityFields.forEach(c=>{a+=`
        <div style="font-size: 10px; margin: 2px 0; color: #cbd5e1;">
          <span style="color: #34d399;">•</span> ${c}
        </div>
      `}),a+="</div></div>"}return a}function ui({selectedSources:t=[],selectedAgents:s=[]}){const[n,r]=p.useState(!1),o=p.useRef(null);p.useEffect(()=>{const a=o.current;if(!a)return;const l=new IntersectionObserver(c=>{c.forEach(m=>{m.isIntersecting&&!n&&(console.log("[DCL Graph] Now visible, activating lazy load..."),r(!0))})},{root:null,rootMargin:"100px",threshold:.01});return l.observe(a),()=>{a&&l.unobserve(a),l.disconnect()}},[n]);const i=li;return e.jsx("div",{ref:o,className:"w-full",children:n?e.jsx(i,{isActive:n,selectedSources:t,selectedAgents:s}):e.jsx("div",{className:"rounded-xl bg-gray-800/40 border border-gray-700 shadow-sm ring-1 ring-cyan-500/10 p-8 w-full md:min-h-[400px] flex items-center justify-center",children:e.jsx("p",{className:"text-sm text-gray-400",children:"Scroll to view interactive graph..."})})})}const mi="auth_token_expiry",kt="aos.dclState.v1",hi=600*1e3,ur=1;function ls(){try{const t=localStorage.getItem(kt);if(!t)return null;const s=JSON.parse(t);if(s.version!==ur)return console.log("[DCL Cache] Version mismatch, ignoring cache"),localStorage.removeItem(kt),null;if(!s.state?.nodes||s.state.nodes.length===0)return console.log("[DCL Cache] Empty graph in cache, ignoring"),null;const n=Date.now()-s.timestamp,r=n>hi;return console.log(`[DCL Cache] Loaded cached state (age: ${Math.round(n/1e3)}s, stale: ${r})`),{state:s.state,isStale:r}}catch(t){return console.error("[DCL Cache] Failed to load cache:",t),localStorage.removeItem(kt),null}}function gn(t){try{if(!t?.nodes||t.nodes.length===0)return;const s={state:t,timestamp:Date.now(),version:ur};localStorage.setItem(kt,JSON.stringify(s)),console.log("[DCL Cache] State cached successfully")}catch(s){console.error("[DCL Cache] Failed to save cache:",s)}}function gi(){try{localStorage.removeItem(kt),console.log("[DCL Cache] Cache cleared")}catch(t){console.error("[DCL Cache] Failed to clear cache:",t)}}function pi(){const[t,s]=p.useState(()=>{const y=ls();return y?(console.log("[DCL] Hydrated from cache"),y.state):null}),[n,r]=p.useState(()=>!ls()),[o,i]=p.useState(()=>{const y=ls();return y?y.isStale:!1}),[a,l]=p.useState(null),c=p.useRef(null),m=p.useRef(null),d=p.useRef(0),g=10,u=1e3,h=p.useRef(!1),v=p.useCallback(y=>{try{if(y.type==="rag_coverage_check"){console.log("[DCL] 🎯 RAG Coverage Check:",{source:y.source,coverage:`${y.coverage_pct}%`,matched:`${y.matched_count}/${y.total_count} fields`,recommendation:y.recommendation,savings:`$${y.estimated_cost_savings}`,missing_fields:y.missing_fields}),console.log(`💡 ${y.message}`),console.log(`   Recommendation: ${y.recommendation==="skip"?"Skip LLM (use RAG + heuristics)":"Proceed with LLM"}`),console.log(`   Cost savings if skipped: ~$${y.estimated_cost_savings}`);return}if(!y.data)return;const f={events:y.data.events||[],nodes:y.data.nodes||[],edges:y.data.edges||[],confidence:y.data.confidence||null,llm:{calls:y.data.llmCalls,tokens:y.data.llmTokens,calls_saved:y.data.llmCallsSaved||0},preview:{sources:{},ontology:{},connectionInfo:null},rag:y.data.ragContext,selected_sources:y.data.sources||[],selected_agents:y.data.agents||[],dev_mode:y.data.devMode,blended_confidence:y.data.blendedConfidence};s(f),gn(f),l(null),r(!1),i(!1)}catch(f){console.error("Error processing WebSocket message:",f),l(f instanceof Error?f:new Error("Failed to process message"))}},[]),x=p.useCallback(()=>{try{let y;if(ge.BASE_URL&&ge.BASE_URL.match(/^https?:\/\//))y=ge.buildDclUrl("/ws").replace(/^http/,"ws");else{const j=window.location.protocol==="https:"?"wss:":"ws:",k=window.location.host;y=`${j}//${k}/dcl/ws`}console.log("[DCL WebSocket] Connecting to:",y);const f=new WebSocket(y);c.current=f,f.onopen=()=>{console.log("[DCL WebSocket] Connected"),d.current=0;const j=localStorage.getItem(fe);if(j)try{f.send(JSON.stringify({type:"auth",token:j}))}catch(k){console.error("[DCL WebSocket] Failed to send auth token:",k)}},f.onmessage=j=>{try{const k=JSON.parse(j.data);console.log("[DCL WebSocket] Received message:",k.type),v(k)}catch(k){console.error("[DCL WebSocket] Failed to parse message:",k),console.error("[DCL WebSocket] Raw message data:",j.data?.substring(0,200))}},f.onerror=j=>{console.error("[DCL WebSocket] Error:",j),l(new Error("WebSocket connection error"))},f.onclose=j=>{if(console.log("[DCL WebSocket] Disconnected:",j.code,j.reason),c.current=null,d.current<g){const k=Math.min(u*Math.pow(2,d.current),3e4);console.log(`[DCL WebSocket] Reconnecting in ${k}ms (attempt ${d.current+1}/${g})`),m.current=setTimeout(()=>{d.current++,x()},k)}else console.error("[DCL WebSocket] Max reconnection attempts reached"),l(new Error("WebSocket connection lost. Please refresh the page."))}}catch(y){console.error("[DCL WebSocket] Failed to create WebSocket:",y),l(y instanceof Error?y:new Error("Failed to create WebSocket"))}},[v]),w=p.useCallback(async()=>{try{const y=localStorage.getItem(fe),f={};y&&(f.Authorization=`Bearer ${y}`);const j=await fetch(ge.buildDclUrl("/state"),{headers:f});if(!j.ok){if(j.status===401&&y){console.log("[DCL State] 401 Unauthorized - clearing auth and cache"),localStorage.removeItem(fe),localStorage.removeItem(mi),gi(),window.dispatchEvent(new CustomEvent("auth:unauthorized"));return}throw new Error(`Failed to fetch state: ${j.statusText}`)}const k=await j.json();s(k),gn(k),l(null),r(!1),i(!1)}catch(y){l(y instanceof Error?y:new Error("Unknown error")),console.error("Error fetching DCL state:",y)}},[]);return p.useEffect(()=>(x(),h.current||(h.current=!0,console.log("[DCL] Triggering initial state fetch for refresh"),w()),()=>{console.log("[DCL WebSocket] Cleaning up..."),m.current&&(clearTimeout(m.current),m.current=null),c.current&&(c.current.close(),c.current=null)}),[x,w]),{state:t,loading:n,error:a,isStale:o,refetch:w}}function xi({text:t,speed:s=30}){const[n,r]=p.useState(""),[o,i]=p.useState(0);return p.useEffect(()=>{if(o<t.length){const a=setTimeout(()=>{r(l=>l+t[o]),i(l=>l+1)},s);return()=>clearTimeout(a)}},[o,t,s]),p.useEffect(()=>{r(""),i(0)},[t]),e.jsx("span",{children:n})}function fi({useAamSource:t,onModeChange:s,selectedSources:n,selectedAgents:r}){const[o,i]=p.useState(!1),[a,l]=p.useState(!1),[c,m]=p.useState(!1),{state:d,isStale:g}=pi(),[u,h]=p.useState([]),[v,x]=p.useState("gemini-2.5-flash"),[w,y]=p.useState(0),[f,j]=p.useState(0),[k,_]=p.useState(!1),[M,R]=p.useState(0),[D,I]=p.useState(0),O=E.useRef(!1),$=()=>{const b=localStorage.getItem(fe);return b?{Authorization:`Bearer ${b}`}:{}},z=()=>{console.log("[DCL] 401 Unauthorized - clearing auth state"),localStorage.removeItem(fe),localStorage.removeItem("auth_token_expiry"),window.dispatchEvent(new CustomEvent("auth:unauthorized"))},A=()=>{const b=n.length>0?n:t?rn():At();return console.log("[DCL] Current sources from parent:",b),b.join(",")},C=()=>{const b=r.length>0?r:Ht();return console.log("[DCL] Current agents from parent:",b),b.join(",")},P=()=>{const b=t?rn():At(),S=["revops_pilot","finops_pilot"];localStorage.setItem("aos.selectedSources",JSON.stringify(b)),localStorage.setItem("aos.selectedAgents",JSON.stringify(S)),console.log("[DCL] ✅ Selected ALL sources and agents:",b,S)};p.useEffect(()=>{d&&i(d.dev_mode||!1)},[d?.dev_mode]),p.useEffect(()=>{const b=S=>{const F=S.detail?.source;console.log(`[DCL] Received trigger-run event from: ${F}`),console.log(`[DCL] Current selections: sources=${n.length}, agents=${r.length}`),a||T()};return window.addEventListener("dcl:trigger-run",b),()=>{window.removeEventListener("dcl:trigger-run",b)}},[a,n,r]),p.useEffect(()=>{if(!d)return;(d.events.length!==u.length||d.events.some((S,L)=>u[L]?.text!==S))&&(d.events.length===0?h([]):h(d.events.map((S,L)=>({text:S,isTyping:L===d.events.length-1,key:`${L}-${S.substring(0,20)}-${Date.now()}`}))))},[d?.events,u]),p.useEffect(()=>{g||(O.current=!1)},[g]),p.useEffect(()=>{let b;return k&&a&&(b=setInterval(()=>{y(S=>S+.01)},10)),()=>{b&&clearInterval(b)}},[k,a]),p.useEffect(()=>{let b;return a&&c&&(b=setInterval(async()=>{try{const S=await fetch(ge.buildDclUrl("/state"),{headers:{...$()}});if(S.ok){const F=(await S.json()).llm?.calls||0,B=Math.max(0,F-D);R(B)}}catch(S){console.error("[DCL] Error polling state for LLM count:",S)}},2e3)),()=>{b&&clearInterval(b)}},[a,c,D]),p.useEffect(()=>{let b;if(a&&c){j(0);let S=0;b=setInterval(()=>{S<30?S+=2:S<60?S+=1:S<90?S+=.5:S<95&&(S+=.2),j(Math.min(S,95))},100)}else!a&&f>0&&f<100&&j(100);return()=>{b&&clearInterval(b)}},[a,c,f]);const T=async()=>{y(0),j(0),R(0),_(!0),l(!0),m(!0);try{const b=await fetch(ge.buildDclUrl("/state"),{headers:{...$()}});if(b.ok){const L=(await b.json()).llm?.calls||0;I(L),console.log("[DCL] Starting LLM baseline:",L)}}catch(b){console.error("[DCL] Failed to fetch starting LLM count:",b),I(0)}try{const b=A(),S=C(),L=await fetch(ge.buildDclUrl(`/connect?sources=${b}&agents=${S}&llm_model=${v}`),{headers:{...$()}});if(L.status===401){z(),console.error("[DCL] Session expired. Please login again."),l(!1);return}if(!L.ok){const F=await L.json().catch(()=>({detail:"Request failed"}));throw new Error(F.detail||`HTTP error! status: ${L.status}`)}await L.json(),console.log("[DCL] Connection successful"),window.dispatchEvent(new Event("dcl-state-changed"))}catch(b){console.error("[DCL] Error running:",b)}finally{setTimeout(()=>{l(!1)},1500)}},N=async()=>{try{const b=!o,S=await fetch(ge.buildDclUrl(`/toggle_dev_mode?enabled=${b}`),{headers:{...$()}});if(S.status===401){z(),console.error("[DCL] Session expired. Please login again.");return}if(!S.ok){const F=await S.json().catch(()=>({detail:"Request failed"}));throw new Error(F.detail||`HTTP error! status: ${S.status}`)}const L=await S.json();i(L.dev_mode),console.log(`[DCL] Dev mode toggled: ${L.dev_mode?"ON":"OFF"}`),window.dispatchEvent(new Event("dcl-state-changed"))}catch(b){console.error("[DCL] Error toggling dev mode:",b)}};return e.jsxs("div",{id:"dcl-graph-container",className:"bg-gray-900 rounded-xl border border-gray-800 p-2 sm:p-3 -mt-[5px]",children:[c&&e.jsxs("div",{className:"relative -mx-2 sm:-mx-3 -mt-2 sm:-mt-3 mb-3 h-4 bg-gray-800 rounded-t-xl overflow-hidden",children:[e.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 transition-all duration-300 ease-out",style:{width:`${f}%`}}),e.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-transparent via-white/20 to-transparent",style:{width:`${f}%`,animation:"shimmer 1.5s linear infinite",backgroundSize:"200% 100%"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-white text-[10px] tracking-wide drop-shadow-lg",children:[Math.round(f),"% Complete"]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-cyan-400 cursor-help",title:"The Data Connectivity Layer (DCL) links heterogeneous data sources without migrations or ETL. It maps entities to a unified ontology for domain agents to act on.",children:"Data Connection Layer (DCL)"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Provides persistent, versioned entity mappings so AI Agents can reason with consistent, validated inputs."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_300px] gap-4 lg:gap-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"relative w-full bg-gradient-to-br from-blue-900/20 to-purple-900/20 rounded-lg border border-blue-500/30 p-2 sm:p-3 backdrop-blur-sm mb-4",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-500/5 rounded-lg animate-pulse"}),e.jsxs("div",{className:"relative z-10 flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-500/50 flex-shrink-0",children:e.jsx(We,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse"})}),e.jsxs("div",{className:"flex-1 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center sm:justify-between gap-2 sm:gap-3 mb-3 sm:mb-1",children:[e.jsx("h3",{className:"text-sm sm:text-sm font-medium text-white",children:"Ontology Graph"}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:N,className:`touch-target-h mobile-tap-highlight px-3 py-2 sm:px-2 sm:py-1 rounded text-xs sm:text-[10px] transition-all ${o?"bg-amber-600/20 border border-amber-500/40 text-amber-300 hover:bg-amber-600/30":"bg-emerald-600/20 border border-emerald-500/40 text-emerald-300 hover:bg-emerald-600/30"}`,title:"Toggle between Production Mode (heuristics only) and Dev Mode (AI + RAG active)",children:e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-amber-400 animate-pulse":"bg-emerald-400"}`}),e.jsx("span",{className:"whitespace-nowrap",children:o?"Dev Mode":"Prod Mode"})]})}),e.jsxs("select",{onChange:b=>{if(b.target.value==="select"){const S=document.getElementById("data-sources-section");S&&S.scrollIntoView({behavior:"smooth",block:"start"})}else b.target.value==="all"&&P();b.target.value="all"},disabled:a,className:"touch-target-h mobile-tap-highlight px-3 py-2 sm:px-2 sm:py-1 bg-gray-800 border border-gray-700 rounded text-xs sm:text-[10px] text-white focus:outline-none focus:border-blue-500 hover:border-gray-600 transition-colors disabled:opacity-50 cursor-pointer",title:"Select data sources",children:[e.jsx("option",{value:"all",children:"All Sources"}),e.jsx("option",{value:"select",children:"Select Sources..."})]}),e.jsxs("select",{value:v,onChange:b=>x(b.target.value),disabled:a,className:"touch-target-h mobile-tap-highlight px-3 py-2 sm:px-2 sm:py-1 bg-gray-800 border border-gray-700 rounded text-xs sm:text-[10px] text-white focus:outline-none focus:border-blue-500 hover:border-gray-600 transition-colors disabled:opacity-50 cursor-pointer",title:"Select LLM model for intelligent mapping",children:[e.jsx("option",{value:"gemini-2.5-flash",children:"Gemini 2.5 Flash"}),e.jsx("option",{value:"gpt-5-mini",children:"GPT-5 mini ⚡"}),e.jsx("option",{value:"gpt-5-nano",children:"GPT-5 nano 🚀"})]}),e.jsx("button",{onClick:T,disabled:a,className:"touch-target-h mobile-tap-highlight flex items-center gap-1.5 px-4 sm:px-2 py-2 sm:py-1 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 rounded-md text-xs sm:text-[10px] text-white shadow-lg shadow-emerald-500/30 transition-all disabled:opacity-50 justify-center",title:"Run mapping with selected configuration",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-3 w-3 sm:h-3 sm:w-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{className:"w-3 h-3 sm:w-3 sm:h-3"}),e.jsx("span",{children:"Run"})]})})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-[10px] sm:text-[10px] text-blue-300",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${o?"bg-purple-400 animate-pulse":"bg-gray-500"}`}),e.jsxs("span",{children:["LLM Calls: ",M]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3 text-blue-400"}),e.jsxs("span",{className:"whitespace-nowrap",children:[ma().length," sources → ",Ht().length," agent",Ht().length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"RAG mappings retrieved from inventory",children:[e.jsx("svg",{className:"w-3 h-3 text-teal-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsxs("span",{children:["RAG: ",d?.rag?.mappings_retrieved||0]})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"LLM calls saved via RAG inventory",children:[e.jsx("svg",{className:"w-3 h-3 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:["Saved: ",d?.llm?.calls_saved||0]})]}),e.jsxs("div",{className:"flex items-center gap-1",title:"Blended confidence from graph and RAG",children:[e.jsx("svg",{className:"w-3 h-3 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{children:["Confidence: ",d?.blended_confidence?Math.round(d.blended_confidence*100):"--","%"]})]}),(k||w>0)&&e.jsxs("div",{className:"flex items-center gap-1 bg-blue-900/30 px-2 py-0.5 rounded",children:[e.jsx("svg",{className:"w-3 h-3 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"font-mono",children:[w.toFixed(2),"s"]})]})]})]})]})]}),e.jsx("div",{className:"relative pb-2 md:min-h-[500px]",children:e.jsx(ui,{selectedSources:n,selectedAgents:r})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4 flex-1 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500 flex items-center justify-center text-white text-xs",children:"📝"}),e.jsx("span",{className:"text-white text-sm cursor-help",title:"Chronological event log showing every decision, mapping, and execution step. Functions as a transparent, auditable trail of autonomous system behavior.",children:"Narration"}),e.jsxs("span",{className:"ml-auto text-xs bg-purple-600 text-white px-2 py-0.5 rounded-full",children:[d?.events.length||0," events"]})]}),e.jsx("div",{className:"text-xs space-y-1 overflow-y-auto max-h-[200px]",children:u.length===0?e.jsx("div",{className:"text-gray-500 italic text-[11px]",children:"No events yet. Start mapping to see the narration."}):u.map((b,S)=>({...b,eventNumber:S+1})).reverse().map(b=>e.jsxs("div",{className:"text-gray-300 leading-relaxed",children:[e.jsxs("span",{className:"text-purple-400 mr-1",children:["[",b.eventNumber,"]"]}),b.isTyping?e.jsx(xi,{text:b.text,speed:30}):b.text]},b.key))})]}),e.jsxs("div",{className:"rounded-lg p-4 bg-gradient-to-br from-teal-950 to-cyan-950 border border-teal-700/30 max-w-md mx-auto w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-teal-500 flex items-center justify-center text-white text-xs",children:"🧠"}),e.jsx("span",{className:"text-white text-sm cursor-help",title:"Retrieval-Augmented Generation (RAG) component that enriches context for agent reasoning. It stores embeddings, retrieves related knowledge, and continuously self-tunes mappings.",children:"RAG Learning Engine"}),e.jsxs("span",{className:"ml-auto text-xs bg-teal-600 text-white px-2 py-0.5 rounded-full",children:[d?.rag?.total_mappings||0," stored"]})]}),e.jsx("div",{className:"text-xs space-y-2 overflow-y-auto overflow-x-hidden min-h-[150px] max-h-[400px]",children:!d?.rag?.retrievals||d.rag.retrievals.length===0?e.jsx("div",{className:"text-teal-300/70 italic text-[11px]",children:"No context retrieved yet. Connect a source to see RAG retrieve historical mappings."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-white mb-2 text-[11px]",children:["Retrieved ",d.rag.last_retrieval_count," similar mappings:"]}),d.rag.retrievals.map((b,S)=>e.jsxs("div",{className:"mb-2 pb-2 border-b border-teal-800/30 last:border-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("div",{className:"text-white text-[11px]",children:b.source_field}),e.jsxs("div",{className:"text-[10px] text-white",children:[(b.similarity*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-teal-300 text-[10px] mb-1",children:["→ ",b.ontology_entity]}),e.jsx("div",{className:"w-full bg-slate-900/50 rounded-sm h-1.5 overflow-hidden mb-1",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-teal-500 to-cyan-400 transition-all",style:{width:`${(b.similarity*100).toFixed(0)}%`}})}),e.jsxs("div",{className:"text-[9px] text-teal-400/70",children:["from: ",b.source_system||"unknown"]})]},S))]})})]})]})]})]})}const cs=Jn;function yi(t){switch(t){case"CRM":return e.jsx(Ta,{className:"w-5 h-5 text-blue-400"});case"ERP":return e.jsx(Pa,{className:"w-5 h-5 text-green-400"});case"Database":return e.jsx(Ie,{className:"w-5 h-5 text-red-400"});case"Warehouse":return e.jsx($a,{className:"w-5 h-5 text-cyan-400"});default:return e.jsx(or,{className:"w-5 h-5 text-gray-400"})}}function bi(t){switch(t){case"CRM":return"bg-blue-900/30 border-blue-700/50";case"ERP":return"bg-green-900/30 border-green-700/50";case"Database":return"bg-red-900/30 border-red-700/50";case"Warehouse":return"bg-cyan-900/30 border-cyan-700/50";default:return"bg-gray-900/30 border-gray-700/50"}}function vi(){const[t,s]=p.useState(At()),[n,r]=p.useState(_s()),[o,i]=p.useState(""),[a,l]=p.useState(!1),[c,m]=p.useState(!1),[d,g]=p.useState(null),[u,h]=p.useState(!0),[v,x]=p.useState(null),[w,y]=p.useState(""),[f,j]=p.useState(new Set),k=a?js:ws;p.useEffect(()=>{const A=a?js.map(C=>C.value):ws.map(C=>C.value);s(C=>{const P=C.filter(N=>A.includes(N)),T=P.length>0?P:A;return localStorage.setItem("aos.selectedSources",JSON.stringify(T)),console.log(`[Ontology] Smart merge for ${a?"AAM":"Legacy"} mode:`,T),T})},[a]),p.useEffect(()=>{c&&(console.log("[Ontology] ✅ Mode toggled, selections updated. User must click Run to execute."),m(!1))},[c]),p.useEffect(()=>{r(Ht())},[]),p.useEffect(()=>{localStorage.setItem("aos.selectedSources",JSON.stringify(t))},[t]),p.useEffect(()=>{localStorage.setItem("aos.selectedAgents",JSON.stringify(n))},[n]),p.useEffect(()=>{_()},[]);const _=async()=>{h(!0),x(null);try{const A=await fetch(ge.buildDclUrl("/ontology_schema"));if(!A.ok)throw new Error(`Failed to fetch ontology schema: ${A.statusText}`);const C=await A.json();g(C)}catch(A){console.error("Error fetching ontology schema:",A),x(A instanceof Error?A.message:"Failed to load ontology schema")}finally{h(!1)}},M=A=>{s(C=>C.includes(A)?C.filter(P=>P!==A):[...C,A])},R=A=>{r(C=>C.includes(A)?C.filter(P=>P!==A):[...C,A])},D=()=>{const A=k.map(C=>C.value);s(A),r(cs.map(C=>C.value))},I=()=>{o.trim()&&(window.location.hash="#/data-lineage",sessionStorage.setItem("lineageSearchQuery",o))},O=A=>{j(C=>{const P=new Set(C);return P.has(A)?P.delete(A):P.add(A),P})},$=A=>{l(A),m(!0)},z=d?Object.entries(d).filter(([A])=>A.toLowerCase().includes(w.toLowerCase())):[];return e.jsxs("div",{className:"space-y-6 px-4 sm:px-6 py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Ontology"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"AI-driven unified data model. Automatically maps disparate data sources into a canonical ontology, creating cross-system entity relationships and powering intelligent agents with a single source of truth."})]}),e.jsx(fi,{useAamSource:a,onModeChange:$,selectedSources:t,selectedAgents:n}),e.jsxs("div",{id:"data-sources-section",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Data Connectivity Layer (DCL)"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-400",children:"Select data sources and agents to create unified entity mappings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-3 sm:p-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-blue-400"}),"Data Sources (",t.length,"/",k.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:k.map(A=>e.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all min-h-[44px] active:opacity-80 ${t.includes(A.value)?"bg-blue-900/40 border-blue-500/50 ring-1 ring-blue-500/30":`${bi(A.type)} hover:border-gray-600`}`,children:[e.jsx("input",{type:"checkbox",checked:t.includes(A.value),onChange:()=>M(A.value),className:"mt-1 w-5 h-5 rounded border-gray-600 text-blue-500 focus:ring-blue-500 focus:ring-offset-gray-900"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[yi(A.type),e.jsx("span",{className:"font-semibold text-white text-sm",children:A.name})]}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:A.description})]})]},A.id))})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-3 sm:p-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5 text-orange-400"}),"Trace Data Lineage"]}),e.jsxs("div",{className:"relative",children:[e.jsx(St,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search for KPI, Report, or Unified Entity...",value:o,onChange:A=>i(A.target.value),onKeyDown:A=>A.key==="Enter"&&I(),className:"w-full bg-gray-900 text-gray-200 pl-10 pr-3 py-3 rounded-lg border border-gray-700 focus:outline-none focus:border-orange-500 transition-colors text-sm"})]}),e.jsx("button",{onClick:I,disabled:!o.trim(),className:"mt-3 w-full px-4 py-2.5 bg-orange-600 hover:bg-orange-700 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors text-sm",children:"Trace Lineage"})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("button",{onClick:D,className:"w-full flex items-center justify-center gap-2 px-4 py-3 min-h-[44px] bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 active:from-blue-800 active:to-purple-800 text-white font-semibold rounded-lg shadow-lg shadow-blue-500/30 transition-all",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Select All Sources & Agents"})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-3 sm:p-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-white mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-purple-400"}),"Intelligence Agents (",n.length,"/",cs.length,")"]}),e.jsx("div",{className:"space-y-2",children:cs.map(A=>e.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all min-h-[44px] active:opacity-80 ${n.includes(A.value)?"bg-purple-900/40 border-purple-500/50 ring-1 ring-purple-500/30":"bg-gray-900/30 border-gray-700/50 hover:border-gray-600"}`,children:[e.jsx("input",{type:"checkbox",checked:n.includes(A.value),onChange:()=>R(A.value),className:"mt-1 w-5 h-5 rounded border-gray-600 text-purple-500 focus:ring-purple-500 focus:ring-offset-gray-900"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-semibold text-white text-sm block mb-1",children:A.name}),e.jsx("p",{className:"text-xs text-gray-400",children:A.description})]})]},A.id))})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"px-6 py-4 space-y-1",children:[e.jsx("h1",{className:"text-2xl font-medium text-white",children:"Ontology Schema"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Define the canonical entities and their structure for unified data mapping"})]}),e.jsx("div",{className:"px-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(St,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search entities...",value:w,onChange:A=>y(A.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50"})]})}),e.jsxs("div",{className:"px-6",children:[u&&e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-12 text-center",children:[e.jsx(Et,{className:"w-12 h-12 text-blue-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading ontology schema..."})]}),v&&e.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 rounded-lg p-6 text-center",children:[e.jsx(Qt,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),e.jsx("p",{className:"text-red-400 font-semibold mb-2",children:"Error Loading Schema"}),e.jsx("p",{className:"text-gray-400 text-sm",children:v}),e.jsx("button",{onClick:_,className:"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"Retry"})]}),!u&&!v&&d&&e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-900/50 border-b border-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Entity Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Primary Key"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Unified Fields"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Data Sources"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Source Tables"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs text-gray-400 tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:z.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center",children:[e.jsx(rr,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400",children:w?"No entities match your search":"No entities defined in ontology"})]})}):z.map(([A,C])=>{const P=f.has(A),T=[...new Set(C.source_mappings.map(b=>b.source_system))],N=C.source_mappings.map(b=>`${b.source_system}/${b.source_table}`);return e.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),e.jsx("span",{className:"text-white",children:A})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("code",{className:"px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-sm text-cyan-400",children:C.pk})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400",children:[C.fields.length," ",C.fields.length===1?"field":"fields"]})}),e.jsx("td",{className:"px-6 py-4",children:T.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:T.map(b=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-900/30 border border-green-500/30 text-green-400",children:b},b))}):e.jsx("span",{className:"text-gray-500 text-sm",children:"No sources"})}),e.jsx("td",{className:"px-6 py-4",children:N.length>0?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-blue-900/30 border border-blue-500/30 text-blue-400",children:[N.length," ",N.length===1?"table":"tables"]}):e.jsx("span",{className:"text-gray-500 text-sm",children:"No tables"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>O(A),className:"flex items-center gap-1 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 border border-gray-600 rounded-lg text-sm text-gray-300 transition-colors",children:P?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4"}),"Collapse"]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4"}),"Expand"]})})})]},A)})})]})}),z.map(([A,C])=>f.has(A)?e.jsxs("div",{className:"border-t border-gray-700 bg-gray-900/30 px-6 py-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:["Unified Fields for ",e.jsx("span",{className:"text-white",children:A}),":"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.fields.map(T=>e.jsx("code",{className:"px-3 py-1.5 bg-gray-800 border border-gray-600 rounded text-sm text-gray-300",children:T},T))})]}),C.source_mappings.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Source Mappings (Field-Level Details):"}),e.jsx("div",{className:"space-y-3",children:C.source_mappings.map((T,N)=>e.jsxs("div",{className:"bg-gray-800/50 border border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-gray-900/30",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-900/30 border border-green-500/30 text-green-400",children:T.source_system}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("code",{className:"px-2 py-1 bg-gray-900/50 border border-gray-600 rounded text-xs text-blue-400",children:T.source_table}),e.jsxs("span",{className:"text-gray-500 text-xs ml-auto",children:[T.field_count," ",T.field_count===1?"field mapping":"field mappings"]})]}),T.field_mappings&&T.field_mappings.length>0?e.jsx("div",{className:"p-4 space-y-2",children:T.field_mappings.map((b,S)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-900/50 border border-gray-700 rounded-lg hover:bg-gray-700/30 transition-colors",children:[e.jsx("code",{className:"px-3 py-1.5 bg-gray-800 border border-gray-600 rounded text-sm text-gray-300 font-mono",children:b.source_field}),e.jsx("span",{className:"text-gray-500 font-bold",children:"→"}),e.jsx("code",{className:"px-3 py-1.5 bg-blue-900/30 border border-blue-500/30 rounded text-sm text-blue-400 font-mono",children:b.ontology_field}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${b.confidence>=.9?"bg-green-900/30 border border-green-500/30 text-green-400":b.confidence>=.7?"bg-yellow-900/30 border border-yellow-500/30 text-yellow-400":"bg-orange-900/30 border border-orange-500/30 text-orange-400"}`,children:[(b.confidence*100).toFixed(0),"% confident"]}),b.transform&&b.transform!=="direct"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-900/30 border border-purple-500/30 text-purple-400",children:b.transform})]},S))}):T.source_fields.length>0&&e.jsx("div",{className:"p-4 flex flex-wrap gap-1",children:T.source_fields.map((b,S)=>e.jsx("code",{className:"px-2 py-1 bg-gray-900 border border-gray-700 rounded text-xs text-gray-400",children:b},S))})]},N))})]})]},`${A}-details`):null)]}),!u&&!v&&d&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-400",children:[e.jsxs("span",{children:["Showing ",z.length," of ",Object.keys(d).length," ",Object.keys(d).length===1?"entity":"entities"]}),w&&e.jsx("button",{onClick:()=>y(""),className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Clear search"})]})]})]})]})}const wi=[{id:"discover",name:"Discover",metric:87,target:90,status:"optimal",unit:"%"},{id:"sense",name:"Sense",metric:94,target:85,status:"optimal",unit:"%"},{id:"policy",name:"Policy",metric:76,target:80,status:"warning",unit:"%"},{id:"plan",name:"Plan",metric:91,target:90,status:"optimal",unit:"%"},{id:"prioritize",name:"Prioritize",metric:88,target:85,status:"optimal",unit:"%"},{id:"execute",name:"Execute",metric:82,target:90,status:"warning",unit:"%"},{id:"budget",name:"Budget",metric:95,target:90,status:"optimal",unit:"%"},{id:"observe",name:"Observe",metric:98,target:95,status:"optimal",unit:"%"},{id:"learn",name:"Learn",metric:72,target:80,status:"warning",unit:"%"},{id:"lifecycle",name:"Lifecycle",metric:89,target:85,status:"optimal",unit:"%"}],ji=[{id:"cross_discovery",name:"Cross-Enterprise Discovery",value:"847 endpoints",trend:"up",description:"Active API endpoints across federated systems"},{id:"federation_health",name:"Federation Health",value:"96.2%",trend:"stable",description:"Overall health of federated orchestration"},{id:"trust_score",name:"Trust Score",value:"8.7/10",trend:"up",description:"Inter-enterprise trust and reliability metric"},{id:"data_sovereignty",name:"Data Sovereignty",value:"100%",trend:"stable",description:"Compliance with regional data requirements"},{id:"cost_allocation",name:"Cost Allocation",value:"$124k/mo",trend:"down",description:"Distributed compute and resource costs"},{id:"sla_compliance",name:"SLA Compliance",value:"99.7%",trend:"stable",description:"Service level agreement adherence"},{id:"security_posture",name:"Security Posture",value:"A+",trend:"stable",description:"Federated security assessment score"},{id:"consensus_rate",name:"Consensus Rate",value:"94.3%",trend:"up",description:"Multi-party agreement on orchestration decisions"},{id:"latency_p95",name:"Cross-Enterprise Latency (P95)",value:"127ms",trend:"down",description:"95th percentile latency for federated operations"},{id:"shared_agents",name:"Shared Agents",value:"42 active",trend:"up",description:"Agents operating across enterprise boundaries"},{id:"interop_score",name:"Interoperability Score",value:"9.1/10",trend:"stable",description:"System compatibility and integration health"},{id:"dispute_resolution",name:"Dispute Resolution Time",value:"4.2min",trend:"down",description:"Average time to resolve orchestration conflicts"}],mr={aoaFunctions:wi,xaoFunctions:ji};function Ni(){const[t,s]=p.useState(mr.aoaFunctions);p.useEffect(()=>{const o=setInterval(()=>{s(i=>i.map(a=>{const l=Math.floor(Math.random()*10)-5,c=Math.max(0,Math.min(100,a.metric+l));let m="optimal";return c<a.target-10?m="critical":c<a.target&&(m="warning"),{...a,metric:c,status:m}}))},8e3);return()=>clearInterval(o)},[]);const n=o=>{switch(o){case"optimal":return"bg-green-500/20 text-green-400";case"warning":return"bg-yellow-500/20 text-yellow-400";case"critical":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},r=o=>({discover:{label:"Agent Registry Health",description:"% of known agents responding to heartbeat pings",fullDescription:"Discovers and registers all active domain agents and their capabilities across the organization."},sense:{label:"Event Classification Accuracy",description:"% of incoming events correctly identified and enriched",fullDescription:"Monitors real-time events, anomalies, and trigger patterns across all agents and connected systems."},policy:{label:"Policy Compliance",description:"% of actions executing within guardrails (scope, permissions, SLAs)",fullDescription:"Ensures compliance with internal and external governance rules during orchestration."},plan:{label:"Plan Generation Success",description:"% of triggers converted into executable plans",fullDescription:"Generates, adjusts, and simulates coordination plans based on agent readiness and data flow states."},prioritize:{label:"Conflict Resolution Rate",description:"% of plan conflicts resolved automatically",fullDescription:"Assigns execution order and resource priority across competing agentic workflows."},execute:{label:"Execution Success Rate",description:"% of plan steps completed without errors",fullDescription:"Carries out automated corrective or optimization actions orchestrated by AOA in live environments."},budget:{label:"Guardrail Integrity",description:"% of actions staying within cost/time/risk thresholds",fullDescription:"Manages financial control and cost integrity across autonomous compute and resource allocations."},observe:{label:"Trace Completeness",description:"% of plans producing full observability traces",fullDescription:"Continuously tracks operational signals, telemetry, and feedback loops to evaluate performance."},learn:{label:"Learning Impact",description:"% of recurring plans that improved results",fullDescription:"Continuously refines orchestration policies and mappings through reinforcement learning."},lifecycle:{label:"Agent Health Coverage",description:"% of agents updated and resource-balanced",fullDescription:"Oversees agent onboarding, updates, health, and retirement cycles across the federated network."}})[o]||{label:"Unknown",description:"No description available",fullDescription:"No description available"};return e.jsxs("div",{className:"bg-slate-800/60 rounded-xl border border-slate-700 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-medium text-cyan-400 mb-1",children:"AOA Functions"}),e.jsx("p",{className:"text-sm text-gray-400",children:"autonomOS Agent metrics"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:t.map(o=>{const{label:i,description:a,fullDescription:l}=r(o.id);return e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 border border-slate-700 hover:border-cyan-500/50 transition-colors group cursor-help",title:l,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-200",children:o.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n(o.status)}`,children:o.status})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1 group relative",children:[e.jsx("span",{className:"text-xs font-medium text-cyan-400",children:i}),e.jsx(Ls,{className:"w-3 h-3 text-slate-500 hover:text-cyan-400 cursor-help"}),e.jsx("div",{className:"absolute left-0 top-full mt-2 w-48 bg-slate-950 border border-slate-700 rounded-lg p-3 text-xs text-slate-300 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 shadow-xl",children:a})]}),e.jsxs("div",{className:"text-3xl text-cyan-400",children:[o.metric,e.jsx("span",{className:"text-lg text-slate-500",children:o.unit})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Target: ",o.target,o.unit]})]}),e.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${o.status==="optimal"?"bg-green-500":o.status==="warning"?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o.metric}%`}})})]},o.id)})}),e.jsx("div",{className:"mt-4 text-center py-3 px-6 bg-slate-800/30 rounded-lg border border-slate-700",children:e.jsx("p",{className:"text-sm text-slate-400",children:"Each % value represents real-time operational efficiency of that orchestration function vs its target SLO."})})]})}function Si({agents:t}){const s=r=>{switch(r){case"running":return"bg-green-500";case"warning":return"bg-yellow-500";case"error":return"bg-red-500";default:return"bg-gray-500"}},n=r=>{r.includes("FinOps")?window.open("https://autonomos.technology/","_blank"):r.includes("RevOps")&&window.open("https://autonomos.cloud/","_blank")};return e.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-800 p-6 h-full flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-lg font-medium text-white cursor-help",title:"Displays real-time operational metrics for each domain agent. Each row represents execution throughput, CPU, and memory usage per active agent.",children:"Active Agent Performance"})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("th",{className:"text-left text-xs font-medium text-gray-500 tracking-wider pb-3",children:"Agent"}),e.jsx("th",{className:"text-center text-xs font-medium text-gray-500 tracking-wider pb-3",children:"Status"}),e.jsx("th",{className:"text-right text-xs font-medium text-gray-500 tracking-wider pb-3",children:"Exec/hr"}),e.jsx("th",{className:"text-right text-xs font-medium text-gray-500 tracking-wider pb-3",children:"CPU"}),e.jsx("th",{className:"text-right text-xs font-medium text-gray-500 tracking-wider pb-3",children:"Memory"})]})}),e.jsx("tbody",{children:t.map(r=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50 cursor-pointer transition-colors",onClick:()=>n(r.name),children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:r.name}),(r.name.includes("FinOps")||r.name.includes("RevOps"))&&e.jsx(ja,{className:"w-3.5 h-3.5 text-blue-400"})]})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-2 h-2 rounded-full ${s(r.status)} ${r.status==="running"?"animate-pulse":""}`})})}),e.jsx("td",{className:"py-3 text-right",children:e.jsx("span",{className:"text-sm text-gray-300",children:r.executionsPerHour})}),e.jsx("td",{className:"py-3 text-right",children:e.jsxs("span",{className:`text-sm font-medium ${r.cpuPercent>40?"text-red-400":r.cpuPercent>25?"text-yellow-400":"text-green-400"}`,children:[r.cpuPercent,"%"]})}),e.jsx("td",{className:"py-3 text-right",children:e.jsxs("span",{className:"text-sm text-gray-300",children:[r.memoryMB," MB"]})})]},r.id))})]})})]})}function ki({agents:t}){const[s]=p.useState(mr.xaoFunctions),n=o=>({cross_discovery:"Total number of active API endpoints discovered across all orchestrated agents (internal and 3rd party).",federation_health:"Synchronization and uptime status of all orchestrated agents.",trust_score:"Trust, reliability, and data fidelity score of agent interactions.",data_sovereignty:"Compliance with regional data residency and sovereignty requirements.",cost_allocation:"Distribution of compute and resource costs across orchestrated agents.",sla_compliance:"Service-level adherence of each orchestrated agent relative to SLAs.",security_posture:"Security assessment score across all orchestrated agents.",consensus_rate:"Agreement rate on orchestration decisions across agents.",latency_p95:"95th percentile latency for cross-agent operations.",shared_agents:"Number of agents operating across multiple domains.",interop_score:"System compatibility and integration health score for all agents.",dispute_resolution:"Average time to resolve orchestration conflicts between agents."})[o]||"",r=o=>{switch(o){case"up":return e.jsx(Os,{className:"w-4 h-4 text-green-400"});case"down":return e.jsx(ar,{className:"w-4 h-4 text-red-400"});case"stable":return e.jsx(Ea,{className:"w-4 h-4 text-gray-400"})}};return e.jsx("div",{className:"bg-black border-t border-b border-cyan-500/30 py-12 -mx-6 px-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{id:"agent-performance-monitor",children:e.jsx(Si,{agents:t})}),e.jsx(Ni,{}),e.jsxs("div",{className:"bg-slate-800/40 rounded-xl border border-cyan-500/30 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-2xl font-medium text-cyan-400 mb-2 cursor-help",title:"Cross-Agentic Orchestration (xAO) orchestrates all agents—our own internal agents and 3rd party agents—providing unified coordination and governance.",children:"xAO Metrics"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Orchestration metrics for all agents (internal + 3rd party)"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(o=>e.jsxs("div",{className:"bg-slate-800/60 rounded-xl p-4 border border-slate-700 hover:border-cyan-500/50 transition-colors cursor-help",title:n(o.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-200",children:o.name}),r(o.trend)]})}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-xl font-bold text-cyan-400",children:o.value})})]}),e.jsx("p",{className:"text-xs text-slate-500",children:o.description})]},o.id))})]})]})})}const Ci=[{id:"ap1",name:"RevOps Agent",status:"running",executionsPerHour:342,cpuPercent:23,memoryMB:512},{id:"ap2",name:"FinOps Agent",status:"running",executionsPerHour:189,cpuPercent:18,memoryMB:448},{id:"ap3",name:"Sales Forecasting",status:"warning",executionsPerHour:67,cpuPercent:45,memoryMB:892},{id:"ap4",name:"Churn Predictor",status:"running",executionsPerHour:124,cpuPercent:31,memoryMB:674},{id:"ap5",name:"Lead Scoring",status:"running",executionsPerHour:298,cpuPercent:19,memoryMB:423}];function Ai(){return e.jsxs("div",{className:"space-y-6 px-4 sm:px-6 py-6",children:[e.jsx("div",{className:"bg-gray-800/40 border border-gray-700/50 rounded-lg px-4 py-2",children:e.jsxs("p",{className:"text-sm text-gray-400 text-center",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Demo Environment"})," • This interface demonstrates platform capabilities with static mock data"]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"AOS Orchestration"}),e.jsx("p",{className:"text-lg text-gray-300 leading-relaxed",children:"Meta-level agent coordination at scale. The Orchestration Layer observes, governs, and optimizes all domain agents in real time—enabling cross-agentic workflows, federated coordination, and autonomous system evolution."})]}),e.jsx(ki,{agents:Ci})]})}function Ei(){const[t,s]=p.useState(0),[n,r]=p.useState("all"),[o,i]=p.useState("");p.useEffect(()=>{const u=()=>{const h=window.location.hash.slice(1);if(h){const v=l.findIndex(x=>x.id===h);if(v!==-1){const x=l[v];r(x.category),s(v),setTimeout(()=>{document.getElementById(h)?.scrollIntoView({behavior:"smooth",block:"center"})},100)}}};return u(),window.addEventListener("hashchange",u),()=>window.removeEventListener("hashchange",u)},[]);const a=u=>{s(t===u?null:u)},l=[{id:"what-is-autonomos",category:"Platform Overview",question:"What is AutonomOS?",searchableText:"AutonomOS is an AI-native enterprise-grade platform that turns your scattered company data into action. It autonomously connects to all your apps, databases, and files, learning how they fit together to create a single unified enterprise ontology. This allows our specialized AI agents to reason, act, and get work done. The Problem: Most companies are data-rich but action-poor. They can't bridge the Insight-to-Action Gap between their data and their business goals, leading to inefficiency and inaction. Our Solution: AutonomOS bridges this gap. It not only unifies your data but empowers pre-built AI agents to execute complex workflows. You remain in control with Human-in-the-Loop HITL guardrails. We deliver a complete secure and scalable solution combining technology with domain expertise to ensure you get results not just another proof-of-concept POC.",answer:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-300",children:["AutonomOS is an AI-native, ",e.jsx("strong",{className:"text-white",children:"enterprise-grade"})," platform that turns your scattered company data into action."]}),e.jsxs("p",{className:"text-gray-300",children:["It autonomously connects to all your apps, databases, and files, learning how they fit together to create a single, unified enterprise ",e.jsx("strong",{className:"text-white",children:"ontology"}),". This allows our specialized AI agents to reason, act, and get work done."]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-[#0BCAD9] font-medium text-lg mb-3",children:"The Problem"}),e.jsx("p",{className:"text-gray-300",children:`Most companies are data-rich but action-poor. They can't bridge the "Insight-to-Action Gap" between their data and their business goals, leading to inefficiency and inaction.`})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-[#0BCAD9] font-medium text-lg mb-3",children:"Our Solution"}),e.jsxs("p",{className:"text-gray-300",children:["AutonomOS bridges this gap. It not only unifies your data but empowers pre-built AI agents to execute complex workflows. You remain in control with Human-in-the-Loop (HITL) guardrails. We deliver a complete, ",e.jsx("strong",{className:"text-white",children:"secure"}),", and scalable solution—combining technology with the domain expertise to ensure you get results, not just another proof-of-concept (POC)."]})]})]})},{id:"live-status-badges",category:"Platform Overview",question:"What do the Live Status Badges mean?",answer:"Live Status Badges (green pulsing dots) indicate that a component is connected to real backend data sources and displaying actual live information. Components without these badges are demonstration/mock data for preview purposes. Hover over any badge to see details about the data source."},{id:"control-center-overview",category:"Control Center",question:"What is the AOS Control Center?",answer:"The Control Center is your main dashboard providing a comprehensive overview of your AutonomOS platform. It displays key performance indicators (KPIs), system health metrics, active connections, and real-time insights into your data orchestration activities."},{id:"total-connections",category:"Control Center",question:"Total Connections - What does this show?",answer:"This metric displays the total number of data source connections configured in your platform. Active connections are those currently synchronized and operational. This includes connections to databases, APIs, cloud services, and file sources managed through the Adaptive API Mesh (AAM)."},{id:"active-agents",category:"Control Center",question:"Active Agents - What are these?",answer:"Shows the number of AI agents currently running and processing tasks. These include FinOps agents for financial operations, RevOps agents for revenue operations, and custom agents orchestrated through the Agentic Orchestration Architecture (AOA)."},{id:"data-sources",category:"Control Center",question:"Data Sources - What counts as a data source?",answer:"Any external system providing data to AutonomOS: databases (PostgreSQL, MongoDB, Supabase), SaaS platforms (Salesforce, Slack), file storage (CSV, JSON, Excel), or APIs. Each data source is managed by a dedicated connector with schema monitoring and auto-repair capabilities."},{id:"aod-overview",category:"Discover (AOD)",question:"What is AOS Discover (AOD)?",answer:"AOS Discover is an external microservice that performs autonomous asset discovery across your infrastructure. It identifies databases, APIs, file systems, and cloud services, providing a comprehensive map of your data landscape. The dashboard shows real-time discovery metrics and newly identified assets."},{id:"aod-dashboard",category:"Discover (AOD)",question:"How do I read the AOD Dashboard?",answer:"The AOD Dashboard displays: (1) Total Assets Discovered - all identified data sources; (2) Active Scans - currently running discovery processes; (3) New This Week - recently identified assets; (4) Coverage Score - percentage of your infrastructure mapped. The asset list shows details including type, location, and last scan time."},{id:"aod-integration",category:"Discover (AOD)",question:"How does AOD integrate with AutonomOS?",answer:"AOD feeds discovered assets into the Adaptive API Mesh (AAM) for auto-onboarding. When AOD identifies a new data source, AAM can automatically create a connector in Safe Mode, allowing you to review and approve the connection before it begins processing data."},{id:"aam-overview",category:"Connections (AAM)",question:"What is the Adaptive API Mesh (AAM)?",answer:"The Adaptive API Mesh is an intelligent connectivity layer that uses AI to automatically build, maintain, and repair connections between disparate enterprise systems. It provides self-healing integration capabilities that adapt to changes in your data sources and APIs, ensuring your workflows remain resilient and operational without manual intervention."},{id:"aam-connectors",category:"Connections (AAM)",question:"AAM Connectors - What are they?",answer:"Connectors are production-ready integrations for specific data sources (Salesforce, Supabase, MongoDB, FileSource, etc.). Each connector handles authentication, schema detection, data extraction, and canonical event normalization. They include built-in drift detection and auto-repair capabilities."},{id:"aam-mappings",category:"Connections (AAM)",question:"Mappings Metric - How does this work?",answer:"Tracks field-level mappings between source data and your enterprise ontology. Shows total mappings, percentage resolved through Autofix (AI-powered automatic resolution), and percentage requiring HITL (Human-in-the-Loop) review. High autofix percentage indicates strong AI confidence in mapping accuracy."},{id:"aam-drift",category:"Connections (AAM)",question:"Drift Events - What triggers these?",answer:"Drift events occur when a data source schema changes (new fields, removed fields, type changes). AAM uses schema fingerprinting to detect drift automatically. The metric shows total drift events in the last 24 hours, broken down by source. Each event triggers the auto-repair agent to resolve mapping conflicts."},{id:"aam-rag",category:"Connections (AAM)",question:"RAG Suggestions - What is this?",answer:"RAG (Retrieval-Augmented Generation) Suggestions are AI-powered recommendations for resolving schema drift and mapping conflicts. The system uses semantic matching and historical patterns to suggest field mappings. Shows pending suggestions, accepted suggestions (applied to production), and rejected suggestions."},{id:"aam-confidence",category:"Connections (AAM)",question:"Repair Confidence - How is this calculated?",answer:"A percentage score indicating AI confidence in auto-repair decisions. Calculated from semantic similarity, historical pattern matching, and validation test results. Higher confidence (>80%) allows automatic application; lower confidence requires human review through HITL queue. Test Pass Rate shows how many repairs pass validation tests."},{id:"aam-safe-mode",category:"Connections (AAM)",question:"Safe Mode - What does this do?",answer:"Safe Mode is a security guardrail for new connections. When enabled, newly onboarded data sources operate in read-only mode with strict validation. No data is automatically processed until you explicitly approve the connection configuration. Designed to meet 90% day-one coverage SLO while maintaining security."},{id:"aam-auto-onboarding",category:"Connections (AAM)",question:"Auto-Onboarding - How does it work?",answer:"AAM accepts ConnectionIntent payloads (from AOD or manual input) and automatically creates connectors for new data sources. Process: (1) Receive connection details, (2) Create connector in Safe Mode, (3) Perform schema discovery, (4) Generate initial mappings, (5) Queue for human approval. Achieves 90% coverage SLO for supported source types."},{id:"aam-namespace",category:"Connections (AAM)",question:"Namespace Isolation - Autonomy vs Demo",answer:"AAM enforces strict namespace isolation. 'autonomy' namespace contains production connectors with live data. 'demo' namespace contains demonstration connectors for testing. The two namespaces never interact, ensuring demo activities don't affect production data. Connectors inherit namespace from tenant configuration."},{id:"dcl-overview",category:"Ontology (DCL)",question:"What is the Data Connectivity Layer (DCL)?",answer:"The DCL is the core data intelligence engine that autonomously maps disparate data sets into a Unified Enterprise Ontology. It uses AI to understand your data semantics, create contextual relationships, and generate AI-ready data streams. The DCL feeds a Contextual RAG engine that continuously learns from your data patterns, enabling intelligent agents to make informed decisions."},{id:"dcl-graph",category:"Ontology (DCL)",question:"Entity Graph - How do I read this?",answer:"The Entity Graph visualizes relationships between your data entities. Nodes represent entities (customers, products, transactions, etc.), edges represent relationships. Node size indicates data volume, edge thickness shows relationship strength. Color coding indicates entity type. Click nodes to see details; hover over edges to view relationship metadata."},{id:"dcl-sankey",category:"Ontology (DCL)",question:"Sankey Diagram - What does this show?",answer:"The Sankey diagram displays data flow through your platform. Left side shows source connectors, middle shows DCL processing layers, right shows output destinations (agents, views, APIs). Flow width represents data volume. Use this to understand how data moves from sources through transformations to final consumers."},{id:"dcl-mappings",category:"Ontology (DCL)",question:"Entity Mappings - How are these created?",answer:"DCL uses AI (Gemini/OpenAI) to analyze source schemas and map them to your enterprise ontology. Process: (1) Extract schema from source, (2) Semantic analysis of field names/types, (3) Match to existing entities, (4) Generate mapping with confidence score, (5) Human review if confidence < 80%. Mappings are versioned and auditable."},{id:"dcl-views",category:"Ontology (DCL)",question:"Materialized Views - What are these?",answer:"DCL creates materialized views in DuckDB for fast query access to unified data. These are pre-computed, optimized SQL views combining data from multiple sources according to your ontology. Views update incrementally as source data changes. Used by agents for low-latency data access without hitting source systems."},{id:"dcl-telemetry",category:"Ontology (DCL)",question:"LLM Telemetry - What is tracked?",answer:"Tracks LLM usage across DCL operations: total API calls, tokens consumed (input/output), cost per operation, model used (Gemini, OpenAI, etc.). Stored in Redis for real-time monitoring. Use this to understand AI costs and optimize model selection for different tasks (schema analysis vs. entity resolution)."},{id:"aoa-overview",category:"Orchestration (AOA)",question:"What is Agentic Orchestration Architecture (AOA)?",answer:"AOA is the high-level orchestration layer that manages all agent operations, both internal AutonomOS agents and third-party agents. It coordinates task distribution, monitors agent performance, handles inter-agent communication, and provides unified governance. AOA ensures agents work together efficiently while maintaining security and compliance boundaries."},{id:"aoa-status",category:"Orchestration (AOA)",question:"AOA Status Card - What do the metrics mean?",answer:"Shows real-time orchestration health: (1) Active Tasks - currently executing agent tasks, (2) Success Rate - percentage of successfully completed tasks, (3) Avg Response Time - average task completion time, (4) Queue Depth - tasks waiting for execution. Green status indicates healthy operation; yellow/red indicates bottlenecks or failures."},{id:"xao-metrics",category:"Orchestration (AOA)",question:"xAO Metrics - What is Cross-Agentic Orchestration?",answer:"xAO (Cross-Agentic Orchestration) orchestrates all agents—both internal AutonomOS agents and third-party agents—providing unified coordination and governance. Metrics include: Cross Discovery (API endpoints across agents), Federation Health (synchronization status), Trust Score (reliability and data fidelity), SLA Compliance, Security Posture, and Interoperability Score."},{id:"agent-performance",category:"Orchestration (AOA)",question:"Agent Performance Monitor - How to use this?",answer:"Displays performance metrics for each active agent: task completion rate, average execution time, error rate, resource utilization. Use this to identify underperforming agents, optimize task distribution, and monitor SLA compliance. Click on an agent to see detailed execution logs and task history."},{id:"aoa-functions",category:"Orchestration (AOA)",question:"AOA Functions Panel - What functions are available?",answer:"Provides control functions for orchestration: (1) Task Queue Management - view and prioritize pending tasks, (2) Agent Deployment - activate/deactivate agents, (3) Resource Allocation - adjust compute resources per agent, (4) Error Recovery - retry failed tasks, (5) Audit Logs - view orchestration history."},{id:"agents-overview",category:"Agents",question:"What are Prebuilt Domain Agents?",answer:"Prebuilt Domain Agents are productized domain expertise packages designed for specific business functions like FinOps and RevOps. These agents leverage the AI-prepared data fabric to autonomously execute complex, end-to-end business workflows. They use advanced LLM capabilities (supporting multiple providers like Gemini and OpenAI) to reason about your data, learn from patterns, and take intelligent actions."},{id:"finops-agent",category:"Agents",question:"FinOps Agent - What does it do?",answer:"The FinOps (Financial Operations) Agent optimizes cloud spending and financial operations. Capabilities: (1) Cost Analysis - identifies spending patterns and anomalies, (2) Budget Optimization - recommends resource allocation, (3) Waste Detection - finds unused resources, (4) Forecasting - predicts future costs, (5) Automated Actions - rightsizes instances, removes unused resources (with approval)."},{id:"revops-agent",category:"Agents",question:"RevOps Agent - What does it do?",answer:"The RevOps (Revenue Operations) Agent optimizes sales pipeline and revenue workflows. Capabilities: (1) Pipeline Analysis - identifies bottlenecks and conversion rates, (2) Lead Scoring - prioritizes high-value opportunities, (3) Forecasting - predicts revenue outcomes, (4) Process Automation - automates follow-ups and updates, (5) Performance Insights - surfaces trends and recommendations."},{id:"custom-agents",category:"Agents",question:"Can I build custom agents?",answer:"Yes, while we provide Prebuilt Domain Agents for common use cases, the platform supports custom agent deployment. You can leverage our AI-prepared data fabric and orchestration capabilities to build agents tailored to your specific business needs. The LLM service abstraction allows you to choose the best model for each task. Contact support for custom agent development."},{id:"nlp-gateway-overview",category:"NLP Gateway",question:"What is the NLP Gateway?",answer:"The NLP Gateway is a natural language processing service providing conversational access to platform features. It translates natural language queries into system actions, allowing users to interact with AutonomOS using plain English instead of technical interfaces. Supports queries about FinOps, RevOps, AAM status, DCL mappings, and more."},{id:"nlp-no-auth",category:"NLP Gateway",question:"NLP Gateway Authentication - Is it required?",answer:"No, the NLP Gateway operates without authentication for this demo. In production deployments, you can enable JWT authentication for secure access. The demo mode allows anyone to query non-sensitive platform information for evaluation purposes."},{id:"nlp-rag",category:"NLP Gateway",question:"NLP RAG Knowledge Base - How does this work?",answer:"The NLP Gateway uses a tenant-scoped RAG (Retrieval-Augmented Generation) knowledge base built with PostgreSQL + pgvector. It employs hybrid retrieval combining BM25 (keyword search) and vector embeddings with Reciprocal Rank Fusion for optimal results. The knowledge base continuously learns from platform data and user interactions."},{id:"nlp-pii",category:"NLP Gateway",question:"PII Redaction - How is sensitive data protected?",answer:"The NLP Gateway automatically redacts Personally Identifiable Information (PII) from responses. Detected PII includes: email addresses, phone numbers, SSNs, credit card numbers, and custom patterns. Redaction occurs before LLM processing and in responses. Audit logs track all PII detection events for compliance reporting."},{id:"nlp-queries",category:"NLP Gateway",question:"What can I ask the NLP Gateway?",searchableText:"Example queries supported: What's my total cloud spending this month FinOps, Show me top revenue opportunities RevOps, Which connectors have drift events AAM, How many entities are mapped in DCL Ontology, What agents are currently running Orchestration, Summarize my platform health Overview",answer:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-300",children:"Example queries supported:"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-300 space-y-1",children:[e.jsx("li",{children:`"What's my total cloud spending this month?" (FinOps)`}),e.jsx("li",{children:'"Show me top revenue opportunities" (RevOps)'}),e.jsx("li",{children:'"Which connectors have drift events?" (AAM)'}),e.jsx("li",{children:'"How many entities are mapped in DCL?" (Ontology)'}),e.jsx("li",{children:'"What agents are currently running?" (Orchestration)'}),e.jsx("li",{children:'"Summarize my platform health" (Overview)'})]})]})},{id:"security-overview",category:"Security",question:"What are your security standards?",searchableText:"Security Compliance Roadmap. Phase 0 Secure Core Today Implemented: Zero Data Retention Model ephemeral in-memory processing, Robust Multi-Tenant Isolation DB-level tenant-scoped queries, Zero-Trust Infrastructure VPC TLS 1.3 Secrets Management, Secure API Software Lifecycle Pydantic validation CI/CD scans, Immutable Audit Trail metadata-only logging. Phase 1 Enterprise Readiness 0-6 Months: SOC 2 Type I Certification fast-tracked, 3rd-Party Penetration Test, Single Sign-On SSO Okta Azure AD, Private Connectivity AWS PrivateLink, Public Trust Portal Incident Response Plan. Phase 2 Continuous Compliance 6-18 Months: SOC 2 Type II ISO 27001, Bring Your Own Key BYOK, Customer-Managed RBAC, Regional Data Residency Controls, AI-Driven Threat Detection",answer:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-[#0BCAD9] font-medium text-lg mb-4",children:"Security & Compliance Roadmap"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"bg-[#0D2F3F]",children:[e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-3 text-left text-white font-medium",children:"Phase 0: Secure Core (Today)"}),e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-3 text-left text-white font-medium",children:"Phase 1: Enterprise Readiness (0–6 Months)"}),e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-3 text-left text-white font-medium",children:"Phase 2: Continuous Compliance (6–18 Months)"})]}),e.jsxs("tr",{className:"bg-[#0A2540]",children:[e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-2 text-left text-[#0BCAD9] font-normal text-sm",children:"Status: Implemented"}),e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-2 text-left text-[#0BCAD9] font-normal text-sm",children:"Goal: Pass Enterprise Security Assessments"}),e.jsx("th",{className:"border border-[#1A4D5E] px-4 py-2 text-left text-[#0BCAD9] font-normal text-sm",children:"Goal: Operate with Automated Trust at Scale"})]})]}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Zero Data Retention Model"})," (Ephemeral in-memory processing)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"SOC 2 Type I Certification"})," (Fast-tracked)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"SOC 2 Type II + ISO 27001"})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Robust Multi-Tenant Isolation"})," (DB-level, tenant-scoped queries)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"3rd-Party Penetration Test"})})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"Bring Your Own Key (BYOK)"})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Zero-Trust Infrastructure"})," (VPC, TLS 1.3, Secrets Mgmt)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Single Sign-On (SSO)"})," (Okta, Azure AD)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"Customer-Managed RBAC"})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Secure API & Software Lifecycle"})," (Pydantic validation, CI/CD scans)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Private Connectivity"})," (AWS PrivateLink)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"Regional Data Residency Controls"})})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:"Immutable Audit Trail"})," (Metadata-only logging)"]})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"Public Trust Portal & Incident Response Plan"})})]})}),e.jsx("td",{className:"border border-[#1A4D5E] px-4 py-3 text-gray-300 align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500",children:"🔲"}),e.jsx("span",{children:e.jsx("strong",{className:"text-white",children:"AI-Driven Threat Detection"})})]})})]})]})]})})]})})},{id:"hitl-workflow",category:"Security",question:"Human-in-the-Loop (HITL) - How does this work?",answer:"HITL is a governance mechanism requiring human approval for high-risk operations. When AI confidence is below threshold (typically 80%), the system queues the decision for human review. Applies to: schema mapping conflicts, auto-repair suggestions, agent actions affecting production data. Reviews are tracked in audit logs with full decision history."}],c=["all",...Array.from(new Set(l.map(u=>u.category)))],m=l.filter(u=>{const h=n==="all"||u.category===n;if(o==="")return h;const v=o.toLowerCase(),x=u.question.toLowerCase().includes(v),w=u.category.toLowerCase().includes(v),y=typeof u.answer=="string"?u.answer.toLowerCase().includes(v):u.searchableText?.toLowerCase().includes(v)??!1;return h&&(x||w||y)}),d=u=>{const h=m[u];return l.findIndex(v=>v.id===h.id)},g=u=>{const h=d(u);return t===h};return e.jsx("div",{className:"min-h-screen bg-[#0A1628] py-8 px-4 safe-area",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-medium text-white mb-4",children:"Help"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Complete guide to every feature and element in AutonomOS"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search help topics...",value:o,onChange:u=>i(u.target.value),className:"w-full px-4 py-3 bg-[#0D2F3F] border border-[#1A4D5E] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#0BCAD9] focus:ring-1 focus:ring-[#0BCAD9]"})}),e.jsx("div",{className:"mb-8 flex flex-wrap gap-2 justify-center",children:c.map(u=>e.jsx("button",{onClick:()=>r(u),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n===u?"bg-[#0BCAD9] text-white":"bg-[#0D2F3F] text-gray-400 hover:bg-[#0F3A4F]"}`,children:u==="all"?"All Topics":u},u))}),o&&e.jsxs("div",{className:"mb-4 text-sm text-gray-400",children:["Found ",m.length," result",m.length!==1?"s":"",' for "',o,'"']}),e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsxs("div",{className:"bg-[#0D2F3F] border border-[#1A4D5E] rounded-xl p-12 text-center",children:[e.jsx("p",{className:"text-gray-400 text-lg",children:"No help topics found matching your search."}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Try a different search term or browse all topics."})]}):m.map((u,h)=>e.jsxs("div",{id:u.id,className:"bg-[#0D2F3F] border border-[#1A4D5E] rounded-xl overflow-hidden scroll-mt-24",children:[e.jsxs("button",{onClick:()=>a(d(h)),className:"w-full px-6 py-5 flex items-center justify-between text-left hover:bg-[#0F3A4F] transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-[#0BCAD9] mb-1",children:u.category}),e.jsx("h3",{className:"text-lg font-medium text-white pr-4",children:u.question})]}),g(h)?e.jsx(va,{className:"w-5 h-5 text-[#0BCAD9] flex-shrink-0"}):e.jsx(Ps,{className:"w-5 h-5 text-[#0BCAD9] flex-shrink-0"})]}),g(h)&&e.jsx("div",{className:"px-6 py-5 border-t border-[#1A4D5E] bg-[#0A2540]",children:typeof u.answer=="string"?e.jsx("p",{className:"text-gray-300 leading-relaxed",children:u.answer}):u.answer})]},u.id))}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"bg-[#0D2F3F] border border-[#0BCAD9]/30 rounded-xl p-8",children:[e.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:"Still have questions?"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Our team is here to help you understand how AutonomOS can transform your enterprise intelligence."}),e.jsx("button",{className:"px-6 py-3 bg-[#0BCAD9] hover:bg-[#0AA5B3] text-white rounded-lg font-medium transition-colors",children:"Contact Support"})]})})]})})}const hr=[{id:"sf-001",name:"Salesforce Production Instance",vendor:"salesforce",kind:"saas",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"sarah.chen@example.com"},{id:"sf-002",name:"Salesforce Accounts API",vendor:"salesforce",kind:"service",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"sarah.chen@example.com"},{id:"sf-003",name:"Salesforce Opportunities DB",vendor:"salesforce",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"mark.johnson@example.com"},{id:"sf-004",name:"Salesforce Contacts API",vendor:"salesforce",kind:"service",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"sarah.chen@example.com"},{id:"sf-005",name:"Salesforce Sandbox",vendor:"salesforce",kind:"saas",environment:"staging",state:"PARKED",ownerEmail:"dev-team@example.com"},{id:"sf-006",name:"Salesforce Custom Objects",vendor:"salesforce",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"mark.johnson@example.com"},{id:"sf-007",name:"Salesforce Reports Engine",vendor:"salesforce",kind:"service",environment:"prod",state:"CONNECTED",ownerEmail:"analytics@example.com"},{id:"sf-008",name:"Salesforce Marketing Cloud",vendor:"salesforce",kind:"saas",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"marketing@example.com"},{id:"sf-009",name:"Salesforce Dev Environment",vendor:"salesforce",kind:"saas",environment:"dev",state:"UNKNOWN",ownerEmail:"dev-team@example.com"},{id:"sf-010",name:"Salesforce Integration API",vendor:"salesforce",kind:"service",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"integration@example.com"},{id:"mg-001",name:"MongoDB Production Cluster",vendor:"mongodb",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"db-admin@example.com"},{id:"mg-002",name:"MongoDB User Events Collection",vendor:"mongodb",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"analytics@example.com"},{id:"mg-003",name:"MongoDB Analytics DB",vendor:"mongodb",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"analytics@example.com"},{id:"mg-004",name:"MongoDB Staging Cluster",vendor:"mongodb",kind:"db",environment:"staging",state:"PARKED",ownerEmail:"dev-team@example.com"},{id:"mg-005",name:"MongoDB Logs Collection",vendor:"mongodb",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"ops@example.com"},{id:"mg-006",name:"MongoDB Metrics API",vendor:"mongodb",kind:"service",environment:"prod",state:"CONNECTED",ownerEmail:"ops@example.com"},{id:"mg-007",name:"MongoDB Archive Cluster",vendor:"mongodb",kind:"db",environment:"prod",state:"PARKED",ownerEmail:"db-admin@example.com"},{id:"mg-008",name:"MongoDB Cache Layer",vendor:"mongodb",kind:"service",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"backend@example.com"},{id:"sb-001",name:"Supabase Production DB",vendor:"supabase",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"backend@example.com"},{id:"sb-002",name:"Supabase Auth Service",vendor:"supabase",kind:"service",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"backend@example.com"},{id:"sb-003",name:"Supabase Storage API",vendor:"supabase",kind:"service",environment:"prod",state:"CONNECTED",ownerEmail:"storage@example.com"},{id:"sb-004",name:"Supabase Realtime Service",vendor:"supabase",kind:"service",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"backend@example.com"},{id:"sb-005",name:"Supabase Edge Functions",vendor:"supabase",kind:"service",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"serverless@example.com"},{id:"sb-006",name:"Supabase Staging DB",vendor:"supabase",kind:"db",environment:"staging",state:"PARKED",ownerEmail:"dev-team@example.com"},{id:"sb-007",name:"Supabase Vector Store",vendor:"supabase",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"ai-team@example.com"},{id:"lg-001",name:"Legacy Customer CSV Files",vendor:"legacy",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"migration@example.com"},{id:"lg-002",name:"Legacy Excel Reports",vendor:"legacy",kind:"service",environment:"prod",state:"PARKED",ownerEmail:"finance@example.com"},{id:"lg-003",name:"Legacy FTP Server",vendor:"legacy",kind:"host",environment:"prod",state:"UNKNOWN",ownerEmail:"ops@example.com"},{id:"lg-004",name:"Legacy Oracle DB Export",vendor:"legacy",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"migration@example.com"},{id:"lg-005",name:"Legacy File Storage",vendor:"legacy",kind:"service",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"storage@example.com"},{id:"lg-006",name:"Legacy Backup Server",vendor:"legacy",kind:"host",environment:"prod",state:"PARKED",ownerEmail:"ops@example.com"},{id:"lg-007",name:"Legacy API Gateway",vendor:"legacy",kind:"service",environment:"prod",state:"UNKNOWN",ownerEmail:"legacy-team@example.com"},{id:"lg-008",name:"Legacy Data Warehouse",vendor:"legacy",kind:"db",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"analytics@example.com"},{id:"lg-009",name:"Legacy Sharepoint Files",vendor:"legacy",kind:"service",environment:"prod",state:"PARKED",ownerEmail:"hr@example.com"},{id:"lg-010",name:"Legacy Network Share",vendor:"legacy",kind:"host",environment:"prod",state:"READY_FOR_CONNECT",ownerEmail:"ops@example.com"}];function Di(t){return{total:t.length,ready:t.filter(s=>s.state==="READY_FOR_CONNECT").length,parked:t.filter(s=>s.state==="PARKED").length,shadowIT:t.filter(s=>s.state==="UNKNOWN").length}}const Mi=[{canonicalField:"customer_id",type:"string",sources:[{vendor:"salesforce",fieldPath:"Account.Id",confidence:.97},{vendor:"mongodb",fieldPath:"users._id",confidence:.93},{vendor:"supabase",fieldPath:"customers.customer_id",confidence:.96},{vendor:"legacy",fieldPath:"legacy_customers.customer_id",confidence:.9}]},{canonicalField:"customer_name",type:"string",sources:[{vendor:"salesforce",fieldPath:"Account.Name",confidence:.98},{vendor:"supabase",fieldPath:"customers.full_name",confidence:.94},{vendor:"legacy",fieldPath:"legacy_customers.name",confidence:.91}]},{canonicalField:"arr",type:"number",sources:[{vendor:"salesforce",fieldPath:"Opportunity.Amount",confidence:.95},{vendor:"supabase",fieldPath:"invoices.total_amount",confidence:.9}]},{canonicalField:"last_activity_at",type:"date",sources:[{vendor:"mongodb",fieldPath:"events.timestamp",confidence:.95},{vendor:"salesforce",fieldPath:"Task.LastModifiedDate",confidence:.88}]},{canonicalField:"churn_flag",type:"boolean",sources:[{vendor:"legacy",fieldPath:"churn_flags.flag",confidence:.99}]},{canonicalField:"risk_score",type:"number",sources:[{vendor:"mongodb",fieldPath:"events.error_rate",confidence:.86},{vendor:"supabase",fieldPath:"invoices.overdue_balance",confidence:.89}]},{canonicalField:"email",type:"string",sources:[{vendor:"salesforce",fieldPath:"Contact.Email",confidence:.99},{vendor:"mongodb",fieldPath:"users.email",confidence:.96},{vendor:"supabase",fieldPath:"customers.email_address",confidence:.94}]},{canonicalField:"account_status",type:"string",sources:[{vendor:"salesforce",fieldPath:"Account.Status__c",confidence:.92},{vendor:"supabase",fieldPath:"customers.status",confidence:.91},{vendor:"mongodb",fieldPath:"users.account_state",confidence:.88}]},{canonicalField:"created_at",type:"date",sources:[{vendor:"salesforce",fieldPath:"Account.CreatedDate",confidence:.98},{vendor:"mongodb",fieldPath:"users.created_at",confidence:.97},{vendor:"supabase",fieldPath:"customers.created_at",confidence:.96},{vendor:"legacy",fieldPath:"legacy_customers.signup_date",confidence:.89}]}];function gr(t){return{salesforce:"Salesforce",mongodb:"MongoDB",supabase:"Supabase",legacy:"Legacy Files"}[t]}function Bt(t){return{salesforce:"#0BCAD9",mongodb:"#10B981",supabase:"#A855F7",legacy:"#F97316"}[t]}function he(t){if(typeof t=="string"||typeof t=="number")return""+t;let s="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=he(t[n]))!==""&&(s+=(s&&" ")+r);else for(let n in t)t[n]&&(s+=(s&&" ")+n);return s}var ds={exports:{}},us={},ms={exports:{}},hs={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pn;function Ii(){if(pn)return hs;pn=1;var t=Xt();function s(g,u){return g===u&&(g!==0||1/g===1/u)||g!==g&&u!==u}var n=typeof Object.is=="function"?Object.is:s,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function l(g,u){var h=u(),v=r({inst:{value:h,getSnapshot:u}}),x=v[0].inst,w=v[1];return i(function(){x.value=h,x.getSnapshot=u,c(x)&&w({inst:x})},[g,h,u]),o(function(){return c(x)&&w({inst:x}),g(function(){c(x)&&w({inst:x})})},[g]),a(h),h}function c(g){var u=g.getSnapshot;g=g.value;try{var h=u();return!n(g,h)}catch{return!0}}function m(g,u){return u()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:l;return hs.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,hs}var xn;function _i(){return xn||(xn=1,ms.exports=Ii()),ms.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fn;function Pi(){if(fn)return us;fn=1;var t=Xt(),s=_i();function n(m,d){return m===d&&(m!==0||1/m===1/d)||m!==m&&d!==d}var r=typeof Object.is=="function"?Object.is:n,o=s.useSyncExternalStore,i=t.useRef,a=t.useEffect,l=t.useMemo,c=t.useDebugValue;return us.useSyncExternalStoreWithSelector=function(m,d,g,u,h){var v=i(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=l(function(){function y(M){if(!f){if(f=!0,j=M,M=u(M),h!==void 0&&x.hasValue){var R=x.value;if(h(R,M))return k=R}return k=M}if(R=k,r(j,M))return R;var D=u(M);return h!==void 0&&h(R,D)?(j=M,R):(j=M,k=D)}var f=!1,j,k,_=g===void 0?null:g;return[function(){return y(d())},_===null?void 0:function(){return y(_())}]},[d,g,u,h]);var w=o(m,v[0],v[1]);return a(function(){x.hasValue=!0,x.value=w},[w]),c(w),w},us}var yn;function Li(){return yn||(yn=1,ds.exports=Pi()),ds.exports}var Ri=Li();const Oi=Kn(Ri),Ti={},bn=t=>{let s;const n=new Set,r=(d,g)=>{const u=typeof d=="function"?d(s):d;if(!Object.is(u,s)){const h=s;s=g??(typeof u!="object"||u===null)?u:Object.assign({},s,u),n.forEach(v=>v(s,h))}},o=()=>s,c={setState:r,getState:o,getInitialState:()=>m,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Ti?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},m=s=t(r,o,c);return c},zi=t=>t?bn(t):bn,{useDebugValue:$i}=E,{useSyncExternalStoreWithSelector:Fi}=Oi,Hi=t=>t;function pr(t,s=Hi,n){const r=Fi(t.subscribe,t.getState,t.getServerState||t.getInitialState,s,n);return $i(r),r}const vn=(t,s)=>{const n=zi(t),r=(o,i=s)=>pr(n,o,i);return Object.assign(r,n),r},Bi=(t,s)=>t?vn(t,s):vn;function ue(t,s){if(Object.is(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;if(t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(const[r,o]of t)if(!Object.is(o,s.get(r)))return!1;return!0}if(t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(const r of t)if(!s.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(s).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(s,r)||!Object.is(t[r],s[r]))return!1;return!0}Xn();const Jt=p.createContext(null),Wi=Jt.Provider,Ce={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,s)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?s.targetHandle:s.sourceHandle}", edge id: ${s.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},xr=Ce.error001();function ne(t,s){const n=p.useContext(Jt);if(n===null)throw new Error(xr);return pr(n,t,s)}const le=()=>{const t=p.useContext(Jt);if(t===null)throw new Error(xr);return p.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Vi=t=>t.userSelectionActive?"none":"all";function fr({position:t,children:s,className:n,style:r,...o}){const i=ne(Vi),a=`${t}`.split("-");return E.createElement("div",{className:he(["react-flow__panel",n,...a]),style:{...r,pointerEvents:i},...o},s)}function Gi({proOptions:t,position:s="bottom-right"}){return t?.hideAttribution?null:E.createElement(fr,{position:s,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},E.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const qi=({x:t,y:s,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:a=[2,4],labelBgBorderRadius:l=2,children:c,className:m,...d})=>{const g=p.useRef(null),[u,h]=p.useState({x:0,y:0,width:0,height:0}),v=he(["react-flow__edge-textwrapper",m]);return p.useEffect(()=>{if(g.current){const x=g.current.getBBox();h({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:E.createElement("g",{transform:`translate(${t-u.width/2} ${s-u.height/2})`,className:v,visibility:u.width?"visible":"hidden",...d},o&&E.createElement("rect",{width:u.width+2*a[0],x:-a[0],y:-a[1],height:u.height+2*a[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),E.createElement("text",{className:"react-flow__edge-text",y:u.height/2,dy:"0.3em",ref:g,style:r},n),c)};var Ui=p.memo(qi);const zs=t=>({width:t.offsetWidth,height:t.offsetHeight}),ct=(t,s=0,n=1)=>Math.min(Math.max(t,s),n),$s=(t={x:0,y:0},s)=>({x:ct(t.x,s[0][0],s[1][0]),y:ct(t.y,s[0][1],s[1][1])}),wn=(t,s,n)=>t<s?ct(Math.abs(t-s),1,50)/50:t>n?-ct(Math.abs(t-n),1,50)/50:0,yr=(t,s)=>{const n=wn(t.x,35,s.width-35)*20,r=wn(t.y,35,s.height-35)*20;return[n,r]},br=t=>t.getRootNode?.()||window?.document,Yi=(t,s)=>({x:Math.min(t.x,s.x),y:Math.min(t.y,s.y),x2:Math.max(t.x2,s.x2),y2:Math.max(t.y2,s.y2)}),Fs=({x:t,y:s,width:n,height:r})=>({x:t,y:s,x2:t+n,y2:s+r}),Zi=({x:t,y:s,x2:n,y2:r})=>({x:t,y:s,width:n-t,height:r-s}),jn=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Ss=(t,s)=>{const n=Math.max(0,Math.min(t.x+t.width,s.x+s.width)-Math.max(t.x,s.x)),r=Math.max(0,Math.min(t.y+t.height,s.y+s.height)-Math.max(t.y,s.y));return Math.ceil(n*r)},Ki=t=>ye(t.width)&&ye(t.height)&&ye(t.x)&&ye(t.y),ye=t=>!isNaN(t)&&isFinite(t),re=Symbol.for("internals"),vr=["Enter"," ","Escape"],Xi=(t,s)=>{},Qi=t=>"nativeEvent"in t;function ks(t){const n=(Qi(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const wr=t=>"clientX"in t,_e=(t,s)=>{const n=wr(t),r=n?t.clientX:t.touches?.[0].clientX,o=n?t.clientY:t.touches?.[0].clientY;return{x:r-(s?.left??0),y:o-(s?.top??0)}},Ut=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,dt=({id:t,path:s,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:m,style:d,markerEnd:g,markerStart:u,interactionWidth:h=20})=>E.createElement(E.Fragment,null,E.createElement("path",{id:t,style:d,d:s,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:u}),h&&E.createElement("path",{d:s,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),o&&ye(n)&&ye(r)?E.createElement(Ui,{x:n,y:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:m}):null);dt.displayName="BaseEdge";function yt(t,s,n){return n===void 0?n:r=>{const o=s().edges.find(i=>i.id===t);o&&n(r,{...o})}}function jr({sourceX:t,sourceY:s,targetX:n,targetY:r}){const o=Math.abs(n-t)/2,i=n<t?n+o:n-o,a=Math.abs(r-s)/2,l=r<s?r+a:r-a;return[i,l,o,a]}function Nr({sourceX:t,sourceY:s,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:a,targetControlY:l}){const c=t*.125+o*.375+a*.375+n*.125,m=s*.125+i*.375+l*.375+r*.125,d=Math.abs(c-t),g=Math.abs(m-s);return[c,m,d,g]}var Ve;(function(t){t.Strict="strict",t.Loose="loose"})(Ve||(Ve={}));var Be;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Be||(Be={}));var Dt;(function(t){t.Partial="partial",t.Full="full"})(Dt||(Dt={}));var Me;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Me||(Me={}));var Mt;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Mt||(Mt={}));var q;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(q||(q={}));function Nn({pos:t,x1:s,y1:n,x2:r,y2:o}){return t===q.Left||t===q.Right?[.5*(s+r),n]:[s,.5*(n+o)]}function Sr({sourceX:t,sourceY:s,sourcePosition:n=q.Bottom,targetX:r,targetY:o,targetPosition:i=q.Top}){const[a,l]=Nn({pos:n,x1:t,y1:s,x2:r,y2:o}),[c,m]=Nn({pos:i,x1:r,y1:o,x2:t,y2:s}),[d,g,u,h]=Nr({sourceX:t,sourceY:s,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:m});return[`M${t},${s} C${a},${l} ${c},${m} ${r},${o}`,d,g,u,h]}const Hs=p.memo(({sourceX:t,sourceY:s,targetX:n,targetY:r,sourcePosition:o=q.Bottom,targetPosition:i=q.Top,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:m,labelBgPadding:d,labelBgBorderRadius:g,style:u,markerEnd:h,markerStart:v,interactionWidth:x})=>{const[w,y,f]=Sr({sourceX:t,sourceY:s,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return E.createElement(dt,{path:w,labelX:y,labelY:f,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:m,labelBgPadding:d,labelBgBorderRadius:g,style:u,markerEnd:h,markerStart:v,interactionWidth:x})});Hs.displayName="SimpleBezierEdge";const Sn={[q.Left]:{x:-1,y:0},[q.Right]:{x:1,y:0},[q.Top]:{x:0,y:-1},[q.Bottom]:{x:0,y:1}},Ji=({source:t,sourcePosition:s=q.Bottom,target:n})=>s===q.Left||s===q.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},kn=(t,s)=>Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2));function el({source:t,sourcePosition:s=q.Bottom,target:n,targetPosition:r=q.Top,center:o,offset:i}){const a=Sn[s],l=Sn[r],c={x:t.x+a.x*i,y:t.y+a.y*i},m={x:n.x+l.x*i,y:n.y+l.y*i},d=Ji({source:c,sourcePosition:s,target:m}),g=d.x!==0?"x":"y",u=d[g];let h=[],v,x;const w={x:0,y:0},y={x:0,y:0},[f,j,k,_]=jr({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(a[g]*l[g]===-1){v=o.x??f,x=o.y??j;const R=[{x:v,y:c.y},{x:v,y:m.y}],D=[{x:c.x,y:x},{x:m.x,y:x}];a[g]===u?h=g==="x"?R:D:h=g==="x"?D:R}else{const R=[{x:c.x,y:m.y}],D=[{x:m.x,y:c.y}];if(g==="x"?h=a.x===u?D:R:h=a.y===u?R:D,s===r){const A=Math.abs(t[g]-n[g]);if(A<=i){const C=Math.min(i-1,i-A);a[g]===u?w[g]=(c[g]>t[g]?-1:1)*C:y[g]=(m[g]>n[g]?-1:1)*C}}if(s!==r){const A=g==="x"?"y":"x",C=a[g]===l[A],P=c[A]>m[A],T=c[A]<m[A];(a[g]===1&&(!C&&P||C&&T)||a[g]!==1&&(!C&&T||C&&P))&&(h=g==="x"?R:D)}const I={x:c.x+w.x,y:c.y+w.y},O={x:m.x+y.x,y:m.y+y.y},$=Math.max(Math.abs(I.x-h[0].x),Math.abs(O.x-h[0].x)),z=Math.max(Math.abs(I.y-h[0].y),Math.abs(O.y-h[0].y));$>=z?(v=(I.x+O.x)/2,x=h[0].y):(v=h[0].x,x=(I.y+O.y)/2)}return[[t,{x:c.x+w.x,y:c.y+w.y},...h,{x:m.x+y.x,y:m.y+y.y},n],v,x,k,_]}function tl(t,s,n,r){const o=Math.min(kn(t,s)/2,kn(s,n)/2,r),{x:i,y:a}=s;if(t.x===i&&i===n.x||t.y===a&&a===n.y)return`L${i} ${a}`;if(t.y===a){const m=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${i+o*m},${a}Q ${i},${a} ${i},${a+o*d}`}const l=t.x<n.x?1:-1,c=t.y<n.y?-1:1;return`L ${i},${a+o*c}Q ${i},${a} ${i+o*l},${a}`}function Yt({sourceX:t,sourceY:s,sourcePosition:n=q.Bottom,targetX:r,targetY:o,targetPosition:i=q.Top,borderRadius:a=5,centerX:l,centerY:c,offset:m=20}){const[d,g,u,h,v]=el({source:{x:t,y:s},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:l,y:c},offset:m});return[d.reduce((w,y,f)=>{let j="";return f>0&&f<d.length-1?j=tl(d[f-1],y,d[f+1],a):j=`${f===0?"M":"L"}${y.x} ${y.y}`,w+=j,w},""),g,u,h,v]}const es=p.memo(({sourceX:t,sourceY:s,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:m,style:d,sourcePosition:g=q.Bottom,targetPosition:u=q.Top,markerEnd:h,markerStart:v,pathOptions:x,interactionWidth:w})=>{const[y,f,j]=Yt({sourceX:t,sourceY:s,sourcePosition:g,targetX:n,targetY:r,targetPosition:u,borderRadius:x?.borderRadius,offset:x?.offset});return E.createElement(dt,{path:y,labelX:f,labelY:j,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:m,style:d,markerEnd:h,markerStart:v,interactionWidth:w})});es.displayName="SmoothStepEdge";const Bs=p.memo(t=>E.createElement(es,{...t,pathOptions:p.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Bs.displayName="StepEdge";function sl({sourceX:t,sourceY:s,targetX:n,targetY:r}){const[o,i,a,l]=jr({sourceX:t,sourceY:s,targetX:n,targetY:r});return[`M ${t},${s}L ${n},${r}`,o,i,a,l]}const Ws=p.memo(({sourceX:t,sourceY:s,targetX:n,targetY:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:m,style:d,markerEnd:g,markerStart:u,interactionWidth:h})=>{const[v,x,w]=sl({sourceX:t,sourceY:s,targetX:n,targetY:r});return E.createElement(dt,{path:v,labelX:x,labelY:w,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:m,style:d,markerEnd:g,markerStart:u,interactionWidth:h})});Ws.displayName="StraightEdge";function Lt(t,s){return t>=0?.5*t:s*25*Math.sqrt(-t)}function Cn({pos:t,x1:s,y1:n,x2:r,y2:o,c:i}){switch(t){case q.Left:return[s-Lt(s-r,i),n];case q.Right:return[s+Lt(r-s,i),n];case q.Top:return[s,n-Lt(n-o,i)];case q.Bottom:return[s,n+Lt(o-n,i)]}}function kr({sourceX:t,sourceY:s,sourcePosition:n=q.Bottom,targetX:r,targetY:o,targetPosition:i=q.Top,curvature:a=.25}){const[l,c]=Cn({pos:n,x1:t,y1:s,x2:r,y2:o,c:a}),[m,d]=Cn({pos:i,x1:r,y1:o,x2:t,y2:s,c:a}),[g,u,h,v]=Nr({sourceX:t,sourceY:s,targetX:r,targetY:o,sourceControlX:l,sourceControlY:c,targetControlX:m,targetControlY:d});return[`M${t},${s} C${l},${c} ${m},${d} ${r},${o}`,g,u,h,v]}const Zt=p.memo(({sourceX:t,sourceY:s,targetX:n,targetY:r,sourcePosition:o=q.Bottom,targetPosition:i=q.Top,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:m,labelBgPadding:d,labelBgBorderRadius:g,style:u,markerEnd:h,markerStart:v,pathOptions:x,interactionWidth:w})=>{const[y,f,j]=kr({sourceX:t,sourceY:s,sourcePosition:o,targetX:n,targetY:r,targetPosition:i,curvature:x?.curvature});return E.createElement(dt,{path:y,labelX:f,labelY:j,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:m,labelBgPadding:d,labelBgBorderRadius:g,style:u,markerEnd:h,markerStart:v,interactionWidth:w})});Zt.displayName="BezierEdge";const Vs=p.createContext(null),nl=Vs.Provider;Vs.Consumer;const rl=()=>p.useContext(Vs),ol=t=>"id"in t&&"source"in t&&"target"in t,al=({source:t,sourceHandle:s,target:n,targetHandle:r})=>`reactflow__edge-${t}${s||""}-${n}${r||""}`,Cs=(t,s)=>typeof t>"u"?"":typeof t=="string"?t:`${s?`${s}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,il=(t,s)=>s.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),ll=(t,s)=>{if(!t.source||!t.target)return s;let n;return ol(t)?n={...t}:n={...t,id:al(t)},il(n,s)?s:s.concat(n)},As=({x:t,y:s},[n,r,o],i,[a,l])=>{const c={x:(t-n)/o,y:(s-r)/o};return i?{x:a*Math.round(c.x/a),y:l*Math.round(c.y/l)}:c},Cr=({x:t,y:s},[n,r,o])=>({x:t*o+n,y:s*o+r}),it=(t,s=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*s[0],r=(t.height??0)*s[1],o={x:t.position.x-n,y:t.position.y-r};return{...o,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:o}},Gs=(t,s=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,o)=>{const{x:i,y:a}=it(o,s).positionAbsolute;return Yi(r,Fs({x:i,y:a,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Zi(n)},Ar=(t,s,[n,r,o]=[0,0,1],i=!1,a=!1,l=[0,0])=>{const c={x:(s.x-n)/o,y:(s.y-r)/o,width:s.width/o,height:s.height/o},m=[];return t.forEach(d=>{const{width:g,height:u,selectable:h=!0,hidden:v=!1}=d;if(a&&!h||v)return!1;const{positionAbsolute:x}=it(d,l),w={x:x.x,y:x.y,width:g||0,height:u||0},y=Ss(c,w),f=typeof g>"u"||typeof u>"u"||g===null||u===null,j=i&&y>0,k=(g||0)*(u||0);(f||j||y>=k||d.dragging)&&m.push(d)}),m},Er=(t,s)=>{const n=t.map(r=>r.id);return s.filter(r=>n.includes(r.source)||n.includes(r.target))},Dr=(t,s,n,r,o,i=.1)=>{const a=s/(t.width*(1+i)),l=n/(t.height*(1+i)),c=Math.min(a,l),m=ct(c,r,o),d=t.x+t.width/2,g=t.y+t.height/2,u=s/2-d*m,h=n/2-g*m;return{x:u,y:h,zoom:m}},He=(t,s=0)=>t.transition().duration(s);function An(t,s,n,r){return(s[n]||[]).reduce((o,i)=>(`${t.id}-${i.id}-${n}`!==r&&o.push({id:i.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+i.x+i.width/2,y:(t.positionAbsolute?.y??0)+i.y+i.height/2}),o),[])}function cl(t,s,n,r,o,i){const{x:a,y:l}=_e(t),m=s.elementsFromPoint(a,l).find(v=>v.classList.contains("react-flow__handle"));if(m){const v=m.getAttribute("data-nodeid");if(v){const x=qs(void 0,m),w=m.getAttribute("data-handleid"),y=i({nodeId:v,id:w,type:x});if(y){const f=o.find(j=>j.nodeId===v&&j.type===x&&j.id===w);return{handle:{id:w,type:x,nodeId:v,x:f?.x||n.x,y:f?.y||n.y},validHandleResult:y}}}}let d=[],g=1/0;if(o.forEach(v=>{const x=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(x<=r){const w=i(v);x<=g&&(x<g?d=[{handle:v,validHandleResult:w}]:x===g&&d.push({handle:v,validHandleResult:w}),g=x)}}),!d.length)return{handle:null,validHandleResult:Mr()};if(d.length===1)return d[0];const u=d.some(({validHandleResult:v})=>v.isValid),h=d.some(({handle:v})=>v.type==="target");return d.find(({handle:v,validHandleResult:x})=>h?v.type==="target":u?x.isValid:!0)||d[0]}const dl={source:null,target:null,sourceHandle:null,targetHandle:null},Mr=()=>({handleDomNode:null,isValid:!1,connection:dl,endHandle:null});function Ir(t,s,n,r,o,i,a){const l=o==="target",c=a.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),m={...Mr(),handleDomNode:c};if(c){const d=qs(void 0,c),g=c.getAttribute("data-nodeid"),u=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),v=c.classList.contains("connectableend"),x={source:l?g:n,sourceHandle:l?u:r,target:l?n:g,targetHandle:l?r:u};m.connection=x,h&&v&&(s===Ve.Strict?l&&d==="source"||!l&&d==="target":g!==n||u!==r)&&(m.endHandle={nodeId:g,handleId:u,type:d},m.isValid=i(x))}return m}function ul({nodes:t,nodeId:s,handleId:n,handleType:r}){return t.reduce((o,i)=>{if(i[re]){const{handleBounds:a}=i[re];let l=[],c=[];a&&(l=An(i,a,"source",`${s}-${n}-${r}`),c=An(i,a,"target",`${s}-${n}-${r}`)),o.push(...l,...c)}return o},[])}function qs(t,s){return t||(s?.classList.contains("target")?"target":s?.classList.contains("source")?"source":null)}function gs(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ml(t,s){let n=null;return s?n="valid":t&&!s&&(n="invalid"),n}function _r({event:t,handleId:s,nodeId:n,onConnect:r,isTarget:o,getState:i,setState:a,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:m}){const d=br(t.target),{connectionMode:g,domNode:u,autoPanOnConnect:h,connectionRadius:v,onConnectStart:x,panBy:w,getNodes:y,cancelConnection:f}=i();let j=0,k;const{x:_,y:M}=_e(t),R=d?.elementFromPoint(_,M),D=qs(c,R),I=u?.getBoundingClientRect();if(!I||!D)return;let O,$=_e(t,I),z=!1,A=null,C=!1,P=null;const T=ul({nodes:y(),nodeId:n,handleId:s,handleType:D}),N=()=>{if(!h)return;const[L,F]=yr($,I);w({x:L,y:F}),j=requestAnimationFrame(N)};a({connectionPosition:$,connectionStatus:null,connectionNodeId:n,connectionHandleId:s,connectionHandleType:D,connectionStartHandle:{nodeId:n,handleId:s,type:D},connectionEndHandle:null}),x?.(t,{nodeId:n,handleId:s,handleType:D});function b(L){const{transform:F}=i();$=_e(L,I);const{handle:B,validHandleResult:H}=cl(L,d,As($,F,!1,[1,1]),v,T,G=>Ir(G,g,n,s,o?"target":"source",l,d));if(k=B,z||(N(),z=!0),P=H.handleDomNode,A=H.connection,C=H.isValid,a({connectionPosition:k&&C?Cr({x:k.x,y:k.y},F):$,connectionStatus:ml(!!k,C),connectionEndHandle:H.endHandle}),!k&&!C&&!P)return gs(O);A.source!==A.target&&P&&(gs(O),O=P,P.classList.add("connecting","react-flow__handle-connecting"),P.classList.toggle("valid",C),P.classList.toggle("react-flow__handle-valid",C))}function S(L){(k||P)&&A&&C&&r?.(A),i().onConnectEnd?.(L),c&&m?.(L),gs(O),f(),cancelAnimationFrame(j),z=!1,C=!1,A=null,P=null,d.removeEventListener("mousemove",b),d.removeEventListener("mouseup",S),d.removeEventListener("touchmove",b),d.removeEventListener("touchend",S)}d.addEventListener("mousemove",b),d.addEventListener("mouseup",S),d.addEventListener("touchmove",b),d.addEventListener("touchend",S)}const En=()=>!0,hl=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),gl=(t,s,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:a}=r;return{connecting:o?.nodeId===t&&o?.handleId===s&&o?.type===n||i?.nodeId===t&&i?.handleId===s&&i?.type===n,clickConnecting:a?.nodeId===t&&a?.handleId===s&&a?.type===n}},Pr=p.forwardRef(({type:t="source",position:s=q.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:a,onConnect:l,children:c,className:m,onMouseDown:d,onTouchStart:g,...u},h)=>{const v=a||null,x=t==="target",w=le(),y=rl(),{connectOnClick:f,noPanClassName:j}=ne(hl,ue),{connecting:k,clickConnecting:_}=ne(gl(y,v,t),ue);y||w.getState().onError?.("010",Ce.error010());const M=I=>{const{defaultEdgeOptions:O,onConnect:$,hasDefaultEdges:z}=w.getState(),A={...O,...I};if(z){const{edges:C,setEdges:P}=w.getState();P(ll(A,C))}$?.(A),l?.(A)},R=I=>{if(!y)return;const O=wr(I);o&&(O&&I.button===0||!O)&&_r({event:I,handleId:v,nodeId:y,onConnect:M,isTarget:x,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||En}),O?d?.(I):g?.(I)},D=I=>{const{onClickConnectStart:O,onClickConnectEnd:$,connectionClickStartHandle:z,connectionMode:A,isValidConnection:C}=w.getState();if(!y||!z&&!o)return;if(!z){O?.(I,{nodeId:y,handleId:v,handleType:t}),w.setState({connectionClickStartHandle:{nodeId:y,type:t,handleId:v}});return}const P=br(I.target),T=n||C||En,{connection:N,isValid:b}=Ir({nodeId:y,id:v,type:t},A,z.nodeId,z.handleId||null,z.type,T,P);b&&M(N),$?.(I),w.setState({connectionClickStartHandle:null})};return E.createElement("div",{"data-handleid":v,"data-nodeid":y,"data-handlepos":s,"data-id":`${y}-${v}-${t}`,className:he(["react-flow__handle",`react-flow__handle-${s}`,"nodrag",j,m,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:i,connecting:_,connectionindicator:r&&(o&&!k||i&&k)}]),onMouseDown:R,onTouchStart:R,onClick:f?D:void 0,ref:h,...u},c)});Pr.displayName="Handle";var Ge=p.memo(Pr);const Lr=({data:t,isConnectable:s,targetPosition:n=q.Top,sourcePosition:r=q.Bottom})=>E.createElement(E.Fragment,null,E.createElement(Ge,{type:"target",position:n,isConnectable:s}),t?.label,E.createElement(Ge,{type:"source",position:r,isConnectable:s}));Lr.displayName="DefaultNode";var Es=p.memo(Lr);const Rr=({data:t,isConnectable:s,sourcePosition:n=q.Bottom})=>E.createElement(E.Fragment,null,t?.label,E.createElement(Ge,{type:"source",position:n,isConnectable:s}));Rr.displayName="InputNode";var Or=p.memo(Rr);const Tr=({data:t,isConnectable:s,targetPosition:n=q.Top})=>E.createElement(E.Fragment,null,E.createElement(Ge,{type:"target",position:n,isConnectable:s}),t?.label);Tr.displayName="OutputNode";var zr=p.memo(Tr);const Us=()=>null;Us.displayName="GroupNode";const pl=t=>({selectedNodes:t.getNodes().filter(s=>s.selected),selectedEdges:t.edges.filter(s=>s.selected).map(s=>({...s}))}),Rt=t=>t.id;function xl(t,s){return ue(t.selectedNodes.map(Rt),s.selectedNodes.map(Rt))&&ue(t.selectedEdges.map(Rt),s.selectedEdges.map(Rt))}const $r=p.memo(({onSelectionChange:t})=>{const s=le(),{selectedNodes:n,selectedEdges:r}=ne(pl,xl);return p.useEffect(()=>{const o={nodes:n,edges:r};t?.(o),s.getState().onSelectionChange.forEach(i=>i(o))},[n,r,t]),null});$r.displayName="SelectionListener";const fl=t=>!!t.onSelectionChange;function yl({onSelectionChange:t}){const s=ne(fl);return t||s?E.createElement($r,{onSelectionChange:t}):null}const bl=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Qe(t,s){p.useEffect(()=>{typeof t<"u"&&s(t)},[t])}function K(t,s,n){p.useEffect(()=>{typeof s<"u"&&n({[t]:s})},[s])}const vl=({nodes:t,edges:s,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:i,onConnectEnd:a,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:m,nodesConnectable:d,nodesFocusable:g,edgesFocusable:u,edgesUpdatable:h,elevateNodesOnSelect:v,minZoom:x,maxZoom:w,nodeExtent:y,onNodesChange:f,onEdgesChange:j,elementsSelectable:k,connectionMode:_,snapGrid:M,snapToGrid:R,translateExtent:D,connectOnClick:I,defaultEdgeOptions:O,fitView:$,fitViewOptions:z,onNodesDelete:A,onEdgesDelete:C,onNodeDrag:P,onNodeDragStart:T,onNodeDragStop:N,onSelectionDrag:b,onSelectionDragStart:S,onSelectionDragStop:L,noPanClassName:F,nodeOrigin:B,rfId:H,autoPanOnConnect:G,autoPanOnNodeDrag:Q,onError:te,connectionRadius:X,isValidConnection:oe,nodeDragThreshold:se})=>{const{setNodes:J,setEdges:me,setDefaultNodesAndEdges:ce,setMinZoom:be,setMaxZoom:xe,setTranslateExtent:ae,setNodeExtent:we,reset:ee}=ne(bl,ue),U=le();return p.useEffect(()=>{const pe=r?.map(Pe=>({...Pe,...O}));return ce(n,pe),()=>{ee()}},[]),K("defaultEdgeOptions",O,U.setState),K("connectionMode",_,U.setState),K("onConnect",o,U.setState),K("onConnectStart",i,U.setState),K("onConnectEnd",a,U.setState),K("onClickConnectStart",l,U.setState),K("onClickConnectEnd",c,U.setState),K("nodesDraggable",m,U.setState),K("nodesConnectable",d,U.setState),K("nodesFocusable",g,U.setState),K("edgesFocusable",u,U.setState),K("edgesUpdatable",h,U.setState),K("elementsSelectable",k,U.setState),K("elevateNodesOnSelect",v,U.setState),K("snapToGrid",R,U.setState),K("snapGrid",M,U.setState),K("onNodesChange",f,U.setState),K("onEdgesChange",j,U.setState),K("connectOnClick",I,U.setState),K("fitViewOnInit",$,U.setState),K("fitViewOnInitOptions",z,U.setState),K("onNodesDelete",A,U.setState),K("onEdgesDelete",C,U.setState),K("onNodeDrag",P,U.setState),K("onNodeDragStart",T,U.setState),K("onNodeDragStop",N,U.setState),K("onSelectionDrag",b,U.setState),K("onSelectionDragStart",S,U.setState),K("onSelectionDragStop",L,U.setState),K("noPanClassName",F,U.setState),K("nodeOrigin",B,U.setState),K("rfId",H,U.setState),K("autoPanOnConnect",G,U.setState),K("autoPanOnNodeDrag",Q,U.setState),K("onError",te,U.setState),K("connectionRadius",X,U.setState),K("isValidConnection",oe,U.setState),K("nodeDragThreshold",se,U.setState),Qe(t,J),Qe(s,me),Qe(x,be),Qe(w,xe),Qe(D,ae),Qe(y,we),null},Dn={display:"none"},wl={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Fr="react-flow__node-desc",Hr="react-flow__edge-desc",jl="react-flow__aria-live",Nl=t=>t.ariaLiveMessage;function Sl({rfId:t}){const s=ne(Nl);return E.createElement("div",{id:`${jl}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:wl},s)}function kl({rfId:t,disableKeyboardA11y:s}){return E.createElement(E.Fragment,null,E.createElement("div",{id:`${Fr}-${t}`,style:Dn},"Press enter or space to select a node.",!s&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),E.createElement("div",{id:`${Hr}-${t}`,style:Dn},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!s&&E.createElement(Sl,{rfId:t}))}var It=(t=null,s={actInsideInputWithModifier:!0})=>{const[n,r]=p.useState(!1),o=p.useRef(!1),i=p.useRef(new Set([])),[a,l]=p.useMemo(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(g=>typeof g=="string").map(g=>g.split("+")),d=m.reduce((g,u)=>g.concat(...u),[]);return[m,d]}return[[],[]]},[t]);return p.useEffect(()=>{const c=typeof document<"u"?document:null,m=s?.target||c;if(t!==null){const d=h=>{if(o.current=h.ctrlKey||h.metaKey||h.shiftKey,(!o.current||o.current&&!s.actInsideInputWithModifier)&&ks(h))return!1;const x=In(h.code,l);i.current.add(h[x]),Mn(a,i.current,!1)&&(h.preventDefault(),r(!0))},g=h=>{if((!o.current||o.current&&!s.actInsideInputWithModifier)&&ks(h))return!1;const x=In(h.code,l);Mn(a,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(h[x]),h.key==="Meta"&&i.current.clear(),o.current=!1},u=()=>{i.current.clear(),r(!1)};return m?.addEventListener("keydown",d),m?.addEventListener("keyup",g),window.addEventListener("blur",u),()=>{m?.removeEventListener("keydown",d),m?.removeEventListener("keyup",g),window.removeEventListener("blur",u)}}},[t,r]),n};function Mn(t,s,n){return t.filter(r=>n||r.length===s.size).some(r=>r.every(o=>s.has(o)))}function In(t,s){return s.includes(t)?"code":"key"}function Br(t,s,n,r){const o=t.parentNode||t.parentId;if(!o)return n;const i=s.get(o),a=it(i,r);return Br(i,s,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(i[re]?.z??0)>(n.z??0)?i[re]?.z??0:n.z??0},r)}function Wr(t,s,n){t.forEach(r=>{const o=r.parentNode||r.parentId;if(o&&!t.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[r.id]){const{x:i,y:a,z:l}=Br(r,t,{...r.position,z:r[re]?.z??0},s);r.positionAbsolute={x:i,y:a},r[re].z=l,n?.[r.id]&&(r[re].isParent=!0)}})}function ps(t,s,n,r){const o=new Map,i={},a=r?1e3:0;return t.forEach(l=>{const c=(ye(l.zIndex)?l.zIndex:0)+(l.selected?a:0),m=s.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},g=l.parentNode||l.parentId;g&&(i[g]=!0);const u=m?.type&&m?.type!==l.type;Object.defineProperty(d,re,{enumerable:!1,value:{handleBounds:u?void 0:m?.[re]?.handleBounds,z:c}}),o.set(l.id,d)}),Wr(o,n,i),o}function Vr(t,s={}){const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:a,d3Zoom:l,d3Selection:c,fitViewOnInitDone:m,fitViewOnInit:d,nodeOrigin:g}=t(),u=s.initial&&!m&&d;if(l&&c&&(u||!s.initial)){const v=n().filter(w=>{const y=s.includeHiddenNodes?w.width&&w.height:!w.hidden;return s.nodes?.length?y&&s.nodes.some(f=>f.id===w.id):y}),x=v.every(w=>w.width&&w.height);if(v.length>0&&x){const w=Gs(v,g),{x:y,y:f,zoom:j}=Dr(w,r,o,s.minZoom??i,s.maxZoom??a,s.padding??.1),k=rt.translate(y,f).scale(j);return typeof s.duration=="number"&&s.duration>0?l.transform(He(c,s.duration),k):l.transform(c,k),!0}}return!1}function Cl(t,s){return t.forEach(n=>{const r=s.get(n.id);r&&s.set(r.id,{...r,[re]:r[re],selected:n.selected})}),new Map(s)}function Al(t,s){return s.map(n=>{const r=t.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function Ot({changedNodes:t,changedEdges:s,get:n,set:r}){const{nodeInternals:o,edges:i,onNodesChange:a,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:m}=n();t?.length&&(c&&r({nodeInternals:Cl(t,o)}),a?.(t)),s?.length&&(m&&r({edges:Al(s,i)}),l?.(s))}const Je=()=>{},El={zoomIn:Je,zoomOut:Je,zoomTo:Je,getZoom:()=>1,setViewport:Je,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Je,fitBounds:Je,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Dl=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Ml=()=>{const t=le(),{d3Zoom:s,d3Selection:n}=ne(Dl,ue);return p.useMemo(()=>n&&s?{zoomIn:o=>s.scaleBy(He(n,o?.duration),1.2),zoomOut:o=>s.scaleBy(He(n,o?.duration),1/1.2),zoomTo:(o,i)=>s.scaleTo(He(n,i?.duration),o),getZoom:()=>t.getState().transform[2],setViewport:(o,i)=>{const[a,l,c]=t.getState().transform,m=rt.translate(o.x??a,o.y??l).scale(o.zoom??c);s.transform(He(n,i?.duration),m)},getViewport:()=>{const[o,i,a]=t.getState().transform;return{x:o,y:i,zoom:a}},fitView:o=>Vr(t.getState,o),setCenter:(o,i,a)=>{const{width:l,height:c,maxZoom:m}=t.getState(),d=typeof a?.zoom<"u"?a.zoom:m,g=l/2-o*d,u=c/2-i*d,h=rt.translate(g,u).scale(d);s.transform(He(n,a?.duration),h)},fitBounds:(o,i)=>{const{width:a,height:l,minZoom:c,maxZoom:m}=t.getState(),{x:d,y:g,zoom:u}=Dr(o,a,l,c,m,i?.padding??.1),h=rt.translate(d,g).scale(u);s.transform(He(n,i?.duration),h)},project:o=>{const{transform:i,snapToGrid:a,snapGrid:l}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),As(o,i,a,l)},screenToFlowPosition:o=>{const{transform:i,snapToGrid:a,snapGrid:l,domNode:c}=t.getState();if(!c)return o;const{x:m,y:d}=c.getBoundingClientRect(),g={x:o.x-m,y:o.y-d};return As(g,i,a,l)},flowToScreenPosition:o=>{const{transform:i,domNode:a}=t.getState();if(!a)return o;const{x:l,y:c}=a.getBoundingClientRect(),m=Cr(o,i);return{x:m.x+l,y:m.y+c}},viewportInitialized:!0}:El,[s,n])};function Ys(){const t=Ml(),s=le(),n=p.useCallback(()=>s.getState().getNodes().map(x=>({...x})),[]),r=p.useCallback(x=>s.getState().nodeInternals.get(x),[]),o=p.useCallback(()=>{const{edges:x=[]}=s.getState();return x.map(w=>({...w}))},[]),i=p.useCallback(x=>{const{edges:w=[]}=s.getState();return w.find(y=>y.id===x)},[]),a=p.useCallback(x=>{const{getNodes:w,setNodes:y,hasDefaultNodes:f,onNodesChange:j}=s.getState(),k=w(),_=typeof x=="function"?x(k):x;if(f)y(_);else if(j){const M=_.length===0?k.map(R=>({type:"remove",id:R.id})):_.map(R=>({item:R,type:"reset"}));j(M)}},[]),l=p.useCallback(x=>{const{edges:w=[],setEdges:y,hasDefaultEdges:f,onEdgesChange:j}=s.getState(),k=typeof x=="function"?x(w):x;if(f)y(k);else if(j){const _=k.length===0?w.map(M=>({type:"remove",id:M.id})):k.map(M=>({item:M,type:"reset"}));j(_)}},[]),c=p.useCallback(x=>{const w=Array.isArray(x)?x:[x],{getNodes:y,setNodes:f,hasDefaultNodes:j,onNodesChange:k}=s.getState();if(j){const M=[...y(),...w];f(M)}else if(k){const _=w.map(M=>({item:M,type:"add"}));k(_)}},[]),m=p.useCallback(x=>{const w=Array.isArray(x)?x:[x],{edges:y=[],setEdges:f,hasDefaultEdges:j,onEdgesChange:k}=s.getState();if(j)f([...y,...w]);else if(k){const _=w.map(M=>({item:M,type:"add"}));k(_)}},[]),d=p.useCallback(()=>{const{getNodes:x,edges:w=[],transform:y}=s.getState(),[f,j,k]=y;return{nodes:x().map(_=>({..._})),edges:w.map(_=>({..._})),viewport:{x:f,y:j,zoom:k}}},[]),g=p.useCallback(({nodes:x,edges:w})=>{const{nodeInternals:y,getNodes:f,edges:j,hasDefaultNodes:k,hasDefaultEdges:_,onNodesDelete:M,onEdgesDelete:R,onNodesChange:D,onEdgesChange:I}=s.getState(),O=(x||[]).map(P=>P.id),$=(w||[]).map(P=>P.id),z=f().reduce((P,T)=>{const N=T.parentNode||T.parentId,b=!O.includes(T.id)&&N&&P.find(L=>L.id===N);return(typeof T.deletable=="boolean"?T.deletable:!0)&&(O.includes(T.id)||b)&&P.push(T),P},[]),A=j.filter(P=>typeof P.deletable=="boolean"?P.deletable:!0),C=A.filter(P=>$.includes(P.id));if(z||C){const P=Er(z,A),T=[...C,...P],N=T.reduce((b,S)=>(b.includes(S.id)||b.push(S.id),b),[]);if((_||k)&&(_&&s.setState({edges:j.filter(b=>!N.includes(b.id))}),k&&(z.forEach(b=>{y.delete(b.id)}),s.setState({nodeInternals:new Map(y)}))),N.length>0&&(R?.(T),I&&I(N.map(b=>({id:b,type:"remove"})))),z.length>0&&(M?.(z),D)){const b=z.map(S=>({id:S.id,type:"remove"}));D(b)}}},[]),u=p.useCallback(x=>{const w=Ki(x),y=w?null:s.getState().nodeInternals.get(x.id);return!w&&!y?[null,null,w]:[w?x:jn(y),y,w]},[]),h=p.useCallback((x,w=!0,y)=>{const[f,j,k]=u(x);return f?(y||s.getState().getNodes()).filter(_=>{if(!k&&(_.id===j.id||!_.positionAbsolute))return!1;const M=jn(_),R=Ss(M,f);return w&&R>0||R>=f.width*f.height}):[]},[]),v=p.useCallback((x,w,y=!0)=>{const[f]=u(x);if(!f)return!1;const j=Ss(f,w);return y&&j>0||j>=f.width*f.height},[]);return p.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:o,getEdge:i,setNodes:a,setEdges:l,addNodes:c,addEdges:m,toObject:d,deleteElements:g,getIntersectingNodes:h,isNodeIntersecting:v}),[t,n,r,o,i,a,l,c,m,d,g,h,v])}const Il={actInsideInputWithModifier:!1};var _l=({deleteKeyCode:t,multiSelectionKeyCode:s})=>{const n=le(),{deleteElements:r}=Ys(),o=It(t,Il),i=It(s);p.useEffect(()=>{if(o){const{edges:a,getNodes:l}=n.getState(),c=l().filter(d=>d.selected),m=a.filter(d=>d.selected);r({nodes:c,edges:m}),n.setState({nodesSelectionActive:!1})}},[o]),p.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function Pl(t){const s=le();p.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const o=zs(t.current);(o.height===0||o.width===0)&&s.getState().onError?.("004",Ce.error004()),s.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const Zs={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ll=(t,s)=>t.x!==s.x||t.y!==s.y||t.zoom!==s.k,Tt=t=>({x:t.x,y:t.y,zoom:t.k}),et=(t,s)=>t.target.closest(`.${s}`),_n=(t,s)=>s===2&&Array.isArray(t)&&t.includes(2),Pn=t=>{const s=t.ctrlKey&&Ut()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*s},Rl=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Ol=({onMove:t,onMoveStart:s,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:o=!0,zoomOnPinch:i=!0,panOnScroll:a=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=Be.Free,zoomOnDoubleClick:m=!0,elementsSelectable:d,panOnDrag:g=!0,defaultViewport:u,translateExtent:h,minZoom:v,maxZoom:x,zoomActivationKeyCode:w,preventScrolling:y=!0,children:f,noWheelClassName:j,noPanClassName:k})=>{const _=p.useRef(),M=le(),R=p.useRef(!1),D=p.useRef(!1),I=p.useRef(null),O=p.useRef({x:0,y:0,zoom:0}),{d3Zoom:$,d3Selection:z,d3ZoomHandler:A,userSelectionActive:C}=ne(Rl,ue),P=It(w),T=p.useRef(0),N=p.useRef(!1),b=p.useRef();return Pl(I),p.useEffect(()=>{if(I.current){const S=I.current.getBoundingClientRect(),L=na().scaleExtent([v,x]).translateExtent(h),F=Nt(I.current).call(L),B=rt.translate(u.x,u.y).scale(ct(u.zoom,v,x)),H=[[0,0],[S.width,S.height]],G=L.constrain()(B,H,h);L.transform(F,G),L.wheelDelta(Pn),M.setState({d3Zoom:L,d3Selection:F,d3ZoomHandler:F.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:I.current.closest(".react-flow")})}},[]),p.useEffect(()=>{z&&$&&(a&&!P&&!C?z.on("wheel.zoom",S=>{if(et(S,j))return!1;S.preventDefault(),S.stopImmediatePropagation();const L=z.property("__zoom").k||1;if(S.ctrlKey&&i){const oe=ra(S),se=Pn(S),J=L*Math.pow(2,se);$.scaleTo(z,J,oe,S);return}const F=S.deltaMode===1?20:1;let B=c===Be.Vertical?0:S.deltaX*F,H=c===Be.Horizontal?0:S.deltaY*F;!Ut()&&S.shiftKey&&c!==Be.Vertical&&(B=S.deltaY*F,H=0),$.translateBy(z,-(B/L)*l,-(H/L)*l,{internal:!0});const G=Tt(z.property("__zoom")),{onViewportChangeStart:Q,onViewportChange:te,onViewportChangeEnd:X}=M.getState();clearTimeout(b.current),N.current||(N.current=!0,s?.(S,G),Q?.(G)),N.current&&(t?.(S,G),te?.(G),b.current=setTimeout(()=>{n?.(S,G),X?.(G),N.current=!1},150))},{passive:!1}):typeof A<"u"&&z.on("wheel.zoom",function(S,L){if(!y&&S.type==="wheel"&&!S.ctrlKey||et(S,j))return null;S.preventDefault(),A.call(this,S,L)},{passive:!1}))},[C,a,c,z,$,A,P,i,y,j,s,t,n]),p.useEffect(()=>{$&&$.on("start",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;T.current=S.sourceEvent?.button;const{onViewportChangeStart:L}=M.getState(),F=Tt(S.transform);R.current=!0,O.current=F,S.sourceEvent?.type==="mousedown"&&M.setState({paneDragging:!0}),L?.(F),s?.(S.sourceEvent,F)})},[$,s]),p.useEffect(()=>{$&&(C&&!R.current?$.on("zoom",null):C||$.on("zoom",S=>{const{onViewportChange:L}=M.getState();if(M.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),D.current=!!(r&&_n(g,T.current??0)),(t||L)&&!S.sourceEvent?.internal){const F=Tt(S.transform);L?.(F),t?.(S.sourceEvent,F)}}))},[C,$,t,g,r]),p.useEffect(()=>{$&&$.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:L}=M.getState();if(R.current=!1,M.setState({paneDragging:!1}),r&&_n(g,T.current??0)&&!D.current&&r(S.sourceEvent),D.current=!1,(n||L)&&Ll(O.current,S.transform)){const F=Tt(S.transform);O.current=F,clearTimeout(_.current),_.current=setTimeout(()=>{L?.(F),n?.(S.sourceEvent,F)},a?150:0)}})},[$,a,g,n,r]),p.useEffect(()=>{$&&$.filter(S=>{const L=P||o,F=i&&S.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&S.button===1&&S.type==="mousedown"&&(et(S,"react-flow__node")||et(S,"react-flow__edge")))return!0;if(!g&&!L&&!a&&!m&&!i||C||!m&&S.type==="dblclick"||et(S,j)&&S.type==="wheel"||et(S,k)&&(S.type!=="wheel"||a&&S.type==="wheel"&&!P)||!i&&S.ctrlKey&&S.type==="wheel"||!L&&!a&&!F&&S.type==="wheel"||!g&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(g)&&!g.includes(S.button)&&S.type==="mousedown")return!1;const B=Array.isArray(g)&&g.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&B})},[C,$,o,i,a,m,g,d,P]),E.createElement("div",{className:"react-flow__renderer",ref:I,style:Zs},f)},Tl=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function zl(){const{userSelectionActive:t,userSelectionRect:s}=ne(Tl,ue);return t&&s?E.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:s.width,height:s.height,transform:`translate(${s.x}px, ${s.y}px)`}}):null}function Ln(t,s){const n=s.parentNode||s.parentId,r=t.find(o=>o.id===n);if(r){const o=s.position.x+s.width-r.width,i=s.position.y+s.height-r.height;if(o>0||i>0||s.position.x<0||s.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,o>0&&(r.style.width+=o),i>0&&(r.style.height+=i),s.position.x<0){const a=Math.abs(s.position.x);r.position.x=r.position.x-a,r.style.width+=a,s.position.x=0}if(s.position.y<0){const a=Math.abs(s.position.y);r.position.y=r.position.y-a,r.style.height+=a,s.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Gr(t,s){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return s.reduce((r,o)=>{const i=t.filter(l=>l.id===o.id);if(i.length===0)return r.push(o),r;const a={...o};for(const l of i)if(l)switch(l.type){case"select":{a.selected=l.selected;break}case"position":{typeof l.position<"u"&&(a.position=l.position),typeof l.positionAbsolute<"u"&&(a.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(a.dragging=l.dragging),a.expandParent&&Ln(r,a);break}case"dimensions":{typeof l.dimensions<"u"&&(a.width=l.dimensions.width,a.height=l.dimensions.height),typeof l.updateStyle<"u"&&(a.style={...a.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(a.resizing=l.resizing),a.expandParent&&Ln(r,a);break}case"remove":return r}return r.push(a),r},n)}function qr(t,s){return Gr(t,s)}function $l(t,s){return Gr(t,s)}const De=(t,s)=>({id:t,type:"select",selected:s});function nt(t,s){return t.reduce((n,r)=>{const o=s.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(De(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(De(r.id,!1))),n},[])}const xs=(t,s)=>n=>{n.target===s.current&&t?.(n)},Fl=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Ur=p.memo(({isSelecting:t,selectionMode:s=Dt.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:a,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:m,onPaneMouseLeave:d,children:g})=>{const u=p.useRef(null),h=le(),v=p.useRef(0),x=p.useRef(0),w=p.useRef(),{userSelectionActive:y,elementsSelectable:f,dragging:j}=ne(Fl,ue),k=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,x.current=0},_=A=>{i?.(A),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},M=A=>{if(Array.isArray(n)&&n?.includes(2)){A.preventDefault();return}a?.(A)},R=l?A=>l(A):void 0,D=A=>{const{resetSelectedElements:C,domNode:P}=h.getState();if(w.current=P?.getBoundingClientRect(),!f||!t||A.button!==0||A.target!==u.current||!w.current)return;const{x:T,y:N}=_e(A,w.current);C(),h.setState({userSelectionRect:{width:0,height:0,startX:T,startY:N,x:T,y:N}}),r?.(A)},I=A=>{const{userSelectionRect:C,nodeInternals:P,edges:T,transform:N,onNodesChange:b,onEdgesChange:S,nodeOrigin:L,getNodes:F}=h.getState();if(!t||!w.current||!C)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const B=_e(A,w.current),H=C.startX??0,G=C.startY??0,Q={...C,x:B.x<H?B.x:H,y:B.y<G?B.y:G,width:Math.abs(B.x-H),height:Math.abs(B.y-G)},te=F(),X=Ar(P,Q,N,s===Dt.Partial,!0,L),oe=Er(X,T).map(J=>J.id),se=X.map(J=>J.id);if(v.current!==se.length){v.current=se.length;const J=nt(te,se);J.length&&b?.(J)}if(x.current!==oe.length){x.current=oe.length;const J=nt(T,oe);J.length&&S?.(J)}h.setState({userSelectionRect:Q})},O=A=>{if(A.button!==0)return;const{userSelectionRect:C}=h.getState();!y&&C&&A.target===u.current&&_?.(A),h.setState({nodesSelectionActive:v.current>0}),k(),o?.(A)},$=A=>{y&&(h.setState({nodesSelectionActive:v.current>0}),o?.(A)),k()},z=f&&(t||y);return E.createElement("div",{className:he(["react-flow__pane",{dragging:j,selection:t}]),onClick:z?void 0:xs(_,u),onContextMenu:xs(M,u),onWheel:xs(R,u),onMouseEnter:z?void 0:c,onMouseDown:z?D:void 0,onMouseMove:z?I:m,onMouseUp:z?O:void 0,onMouseLeave:z?$:d,ref:u,style:Zs},g,E.createElement(zl,null))});Ur.displayName="Pane";function Yr(t,s){const n=t.parentNode||t.parentId;if(!n)return!1;const r=s.get(n);return r?r.selected?!0:Yr(r,s):!1}function Rn(t,s,n){let r=t;do{if(r?.matches(s))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Hl(t,s,n,r){return Array.from(t.values()).filter(o=>(o.selected||o.id===r)&&(!o.parentNode||o.parentId||!Yr(o,t))&&(o.draggable||s&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(o.positionAbsolute?.x??0),y:n.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function Bl(t,s){return!s||s==="parent"?s:[s[0],[s[1][0]-(t.width||0),s[1][1]-(t.height||0)]]}function Zr(t,s,n,r,o=[0,0],i){const a=Bl(t,t.extent||r);let l=a;const c=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(c&&t.width&&t.height){const g=n.get(c),{x:u,y:h}=it(g,o).positionAbsolute;l=g&&ye(u)&&ye(h)&&ye(g.width)&&ye(g.height)?[[u+t.width*o[0],h+t.height*o[1]],[u+g.width-t.width+t.width*o[0],h+g.height-t.height+t.height*o[1]]]:l}else i?.("005",Ce.error005()),l=a;else if(t.extent&&c&&t.extent!=="parent"){const g=n.get(c),{x:u,y:h}=it(g,o).positionAbsolute;l=[[t.extent[0][0]+u,t.extent[0][1]+h],[t.extent[1][0]+u,t.extent[1][1]+h]]}let m={x:0,y:0};if(c){const g=n.get(c);m=it(g,o).positionAbsolute}const d=l&&l!=="parent"?$s(s,l):s;return{position:{x:d.x-m.x,y:d.y-m.y},positionAbsolute:d}}function fs({nodeId:t,dragItems:s,nodeInternals:n}){const r=s.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[t?r.find(o=>o.id===t):r[0],r]}const On=(t,s,n,r)=>{const o=s.querySelectorAll(t);if(!o||!o.length)return null;const i=Array.from(o),a=s.getBoundingClientRect(),l={x:a.width*r[0],y:a.height*r[1]};return i.map(c=>{const m=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(m.left-a.left-l.x)/n,y:(m.top-a.top-l.y)/n,...zs(c)}})};function bt(t,s,n){return n===void 0?n:r=>{const o=s().nodeInternals.get(t);o&&n(r,{...o})}}function Ds({id:t,store:s,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:a,nodeInternals:l,onError:c}=s.getState(),m=l.get(t);if(!m){c?.("012",Ce.error012(t));return}s.setState({nodesSelectionActive:!1}),m.selected?(n||m.selected&&a)&&(i({nodes:[m],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([t])}function Wl(){const t=le();return p.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:o,snapToGrid:i}=t.getState(),a=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,c={x:(a-r[0])/r[2],y:(l-r[1])/r[2]};return{xSnapped:i?o[0]*Math.round(c.x/o[0]):c.x,ySnapped:i?o[1]*Math.round(c.y/o[1]):c.y,...c}},[])}function ys(t){return(s,n,r)=>t?.(s,r)}function Kr({nodeRef:t,disabled:s=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,selectNodesOnDrag:a}){const l=le(),[c,m]=p.useState(!1),d=p.useRef([]),g=p.useRef({x:null,y:null}),u=p.useRef(0),h=p.useRef(null),v=p.useRef({x:0,y:0}),x=p.useRef(null),w=p.useRef(!1),y=p.useRef(!1),f=p.useRef(!1),j=Wl();return p.useEffect(()=>{if(t?.current){const k=Nt(t.current),_=({x:D,y:I})=>{const{nodeInternals:O,onNodeDrag:$,onSelectionDrag:z,updateNodePositions:A,nodeExtent:C,snapGrid:P,snapToGrid:T,nodeOrigin:N,onError:b}=l.getState();g.current={x:D,y:I};let S=!1,L={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&C){const B=Gs(d.current,N);L=Fs(B)}if(d.current=d.current.map(B=>{const H={x:D-B.distance.x,y:I-B.distance.y};T&&(H.x=P[0]*Math.round(H.x/P[0]),H.y=P[1]*Math.round(H.y/P[1]));const G=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];d.current.length>1&&C&&!B.extent&&(G[0][0]=B.positionAbsolute.x-L.x+C[0][0],G[1][0]=B.positionAbsolute.x+(B.width??0)-L.x2+C[1][0],G[0][1]=B.positionAbsolute.y-L.y+C[0][1],G[1][1]=B.positionAbsolute.y+(B.height??0)-L.y2+C[1][1]);const Q=Zr(B,H,O,G,N,b);return S=S||B.position.x!==Q.position.x||B.position.y!==Q.position.y,B.position=Q.position,B.positionAbsolute=Q.positionAbsolute,B}),!S)return;A(d.current,!0,!0),m(!0);const F=o?$:ys(z);if(F&&x.current){const[B,H]=fs({nodeId:o,dragItems:d.current,nodeInternals:O});F(x.current,B,H)}},M=()=>{if(!h.current)return;const[D,I]=yr(v.current,h.current);if(D!==0||I!==0){const{transform:O,panBy:$}=l.getState();g.current.x=(g.current.x??0)-D/O[2],g.current.y=(g.current.y??0)-I/O[2],$({x:D,y:I})&&_(g.current)}u.current=requestAnimationFrame(M)},R=D=>{const{nodeInternals:I,multiSelectionActive:O,nodesDraggable:$,unselectNodesAndEdges:z,onNodeDragStart:A,onSelectionDragStart:C}=l.getState();y.current=!0;const P=o?A:ys(C);(!a||!i)&&!O&&o&&(I.get(o)?.selected||z()),o&&i&&a&&Ds({id:o,store:l,nodeRef:t});const T=j(D);if(g.current=T,d.current=Hl(I,$,T,o),P&&d.current){const[N,b]=fs({nodeId:o,dragItems:d.current,nodeInternals:I});P(D.sourceEvent,N,b)}};if(s)k.on(".drag",null);else{const D=oa().on("start",I=>{const{domNode:O,nodeDragThreshold:$}=l.getState();$===0&&R(I),f.current=!1;const z=j(I);g.current=z,h.current=O?.getBoundingClientRect()||null,v.current=_e(I.sourceEvent,h.current)}).on("drag",I=>{const O=j(I),{autoPanOnNodeDrag:$,nodeDragThreshold:z}=l.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(f.current=!0),!f.current){if(!w.current&&y.current&&$&&(w.current=!0,M()),!y.current){const A=O.xSnapped-(g?.current?.x??0),C=O.ySnapped-(g?.current?.y??0);Math.sqrt(A*A+C*C)>z&&R(I)}(g.current.x!==O.xSnapped||g.current.y!==O.ySnapped)&&d.current&&y.current&&(x.current=I.sourceEvent,v.current=_e(I.sourceEvent,h.current),_(O))}}).on("end",I=>{if(!(!y.current||f.current)&&(m(!1),w.current=!1,y.current=!1,cancelAnimationFrame(u.current),d.current)){const{updateNodePositions:O,nodeInternals:$,onNodeDragStop:z,onSelectionDragStop:A}=l.getState(),C=o?z:ys(A);if(O(d.current,!1,!1),C){const[P,T]=fs({nodeId:o,dragItems:d.current,nodeInternals:$});C(I.sourceEvent,P,T)}}}).filter(I=>{const O=I.target;return!I.button&&(!n||!Rn(O,`.${n}`,t))&&(!r||Rn(O,r,t))});return k.call(D),()=>{k.on(".drag",null)}}}},[t,s,n,r,i,l,o,a,j]),c}function Xr(){const t=le();return p.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:i,getNodes:a,snapToGrid:l,snapGrid:c,onError:m,nodesDraggable:d}=t.getState(),g=a().filter(f=>f.selected&&(f.draggable||d&&typeof f.draggable>"u")),u=l?c[0]:5,h=l?c[1]:5,v=n.isShiftPressed?4:1,x=n.x*u*v,w=n.y*h*v,y=g.map(f=>{if(f.positionAbsolute){const j={x:f.positionAbsolute.x+x,y:f.positionAbsolute.y+w};l&&(j.x=c[0]*Math.round(j.x/c[0]),j.y=c[1]*Math.round(j.y/c[1]));const{positionAbsolute:k,position:_}=Zr(f,j,r,o,void 0,m);f.position=_,f.positionAbsolute=k}return f});i(y,!0,!1)},[])}const lt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var vt=t=>{const s=({id:n,type:r,data:o,xPos:i,yPos:a,xPosOrigin:l,yPosOrigin:c,selected:m,onClick:d,onMouseEnter:g,onMouseMove:u,onMouseLeave:h,onContextMenu:v,onDoubleClick:x,style:w,className:y,isDraggable:f,isSelectable:j,isConnectable:k,isFocusable:_,selectNodesOnDrag:M,sourcePosition:R,targetPosition:D,hidden:I,resizeObserver:O,dragHandle:$,zIndex:z,isParent:A,noDragClassName:C,noPanClassName:P,initialized:T,disableKeyboardA11y:N,ariaLabel:b,rfId:S,hasHandleBounds:L})=>{const F=le(),B=p.useRef(null),H=p.useRef(null),G=p.useRef(R),Q=p.useRef(D),te=p.useRef(r),X=j||f||d||g||u||h,oe=Xr(),se=bt(n,F.getState,g),J=bt(n,F.getState,u),me=bt(n,F.getState,h),ce=bt(n,F.getState,v),be=bt(n,F.getState,x),xe=ee=>{const{nodeDragThreshold:U}=F.getState();if(j&&(!M||!f||U>0)&&Ds({id:n,store:F,nodeRef:B}),d){const pe=F.getState().nodeInternals.get(n);pe&&d(ee,{...pe})}},ae=ee=>{if(!ks(ee)&&!N)if(vr.includes(ee.key)&&j){const U=ee.key==="Escape";Ds({id:n,store:F,unselect:U,nodeRef:B})}else f&&m&&Object.prototype.hasOwnProperty.call(lt,ee.key)&&(F.setState({ariaLiveMessage:`Moved selected node ${ee.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~a}`}),oe({x:lt[ee.key].x,y:lt[ee.key].y,isShiftPressed:ee.shiftKey}))};p.useEffect(()=>()=>{H.current&&(O?.unobserve(H.current),H.current=null)},[]),p.useEffect(()=>{if(B.current&&!I){const ee=B.current;(!T||!L||H.current!==ee)&&(H.current&&O?.unobserve(H.current),O?.observe(ee),H.current=ee)}},[I,T,L]),p.useEffect(()=>{const ee=te.current!==r,U=G.current!==R,pe=Q.current!==D;B.current&&(ee||U||pe)&&(ee&&(te.current=r),U&&(G.current=R),pe&&(Q.current=D),F.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,r,R,D]);const we=Kr({nodeRef:B,disabled:I||!f,noDragClassName:C,handleSelector:$,nodeId:n,isSelectable:j,selectNodesOnDrag:M});return I?null:E.createElement("div",{className:he(["react-flow__node",`react-flow__node-${r}`,{[P]:f},y,{selected:m,selectable:j,parent:A,dragging:we}]),ref:B,style:{zIndex:z,transform:`translate(${l}px,${c}px)`,pointerEvents:X?"all":"none",visibility:T?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:se,onMouseMove:J,onMouseLeave:me,onContextMenu:ce,onClick:xe,onDoubleClick:be,onKeyDown:_?ae:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":N?void 0:`${Fr}-${S}`,"aria-label":b},E.createElement(nl,{value:n},E.createElement(t,{id:n,data:o,type:r,xPos:i,yPos:a,selected:m,isConnectable:k,sourcePosition:R,targetPosition:D,dragging:we,dragHandle:$,zIndex:z})))};return s.displayName="NodeWrapper",p.memo(s)};const Vl=t=>{const s=t.getNodes().filter(n=>n.selected);return{...Gs(s,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function Gl({onSelectionContextMenu:t,noPanClassName:s,disableKeyboardA11y:n}){const r=le(),{width:o,height:i,x:a,y:l,transformString:c,userSelectionActive:m}=ne(Vl,ue),d=Xr(),g=p.useRef(null);if(p.useEffect(()=>{n||g.current?.focus({preventScroll:!0})},[n]),Kr({nodeRef:g}),m||!o||!i)return null;const u=t?v=>{const x=r.getState().getNodes().filter(w=>w.selected);t(v,x)}:void 0,h=v=>{Object.prototype.hasOwnProperty.call(lt,v.key)&&d({x:lt[v.key].x,y:lt[v.key].y,isShiftPressed:v.shiftKey})};return E.createElement("div",{className:he(["react-flow__nodesselection","react-flow__container",s]),style:{transform:c}},E.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:o,height:i,top:l,left:a}}))}var ql=p.memo(Gl);const Ul=t=>t.nodesSelectionActive,Qr=({children:t,onPaneClick:s,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,deleteKeyCode:l,onMove:c,onMoveStart:m,onMoveEnd:d,selectionKeyCode:g,selectionOnDrag:u,selectionMode:h,onSelectionStart:v,onSelectionEnd:x,multiSelectionKeyCode:w,panActivationKeyCode:y,zoomActivationKeyCode:f,elementsSelectable:j,zoomOnScroll:k,zoomOnPinch:_,panOnScroll:M,panOnScrollSpeed:R,panOnScrollMode:D,zoomOnDoubleClick:I,panOnDrag:O,defaultViewport:$,translateExtent:z,minZoom:A,maxZoom:C,preventScrolling:P,onSelectionContextMenu:T,noWheelClassName:N,noPanClassName:b,disableKeyboardA11y:S})=>{const L=ne(Ul),F=It(g),B=It(y),H=B||O,G=B||M,Q=F||u&&H!==!0;return _l({deleteKeyCode:l,multiSelectionKeyCode:w}),E.createElement(Ol,{onMove:c,onMoveStart:m,onMoveEnd:d,onPaneContextMenu:i,elementsSelectable:j,zoomOnScroll:k,zoomOnPinch:_,panOnScroll:G,panOnScrollSpeed:R,panOnScrollMode:D,zoomOnDoubleClick:I,panOnDrag:!F&&H,defaultViewport:$,translateExtent:z,minZoom:A,maxZoom:C,zoomActivationKeyCode:f,preventScrolling:P,noWheelClassName:N,noPanClassName:b},E.createElement(Ur,{onSelectionStart:v,onSelectionEnd:x,onPaneClick:s,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,panOnDrag:H,isSelecting:!!Q,selectionMode:h},t,L&&E.createElement(ql,{onSelectionContextMenu:T,noPanClassName:b,disableKeyboardA11y:S})))};Qr.displayName="FlowRenderer";var Yl=p.memo(Qr);function Zl(t){return ne(p.useCallback(n=>t?Ar(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function Kl(t){const s={input:vt(t.input||Or),default:vt(t.default||Es),output:vt(t.output||zr),group:vt(t.group||Us)},n={},r=Object.keys(t).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,i)=>(o[i]=vt(t[i]||Es),o),n);return{...s,...r}}const Xl=({x:t,y:s,width:n,height:r,origin:o})=>!n||!r?{x:t,y:s}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:s}:{x:t-n*o[0],y:s-r*o[1]},Ql=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),Jr=t=>{const{nodesDraggable:s,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:i,onError:a}=ne(Ql,ue),l=Zl(t.onlyRenderVisibleElements),c=p.useRef(),m=p.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(g=>{const u=g.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(u)});return c.current=d,d},[]);return p.useEffect(()=>()=>{c?.current?.disconnect()},[]),E.createElement("div",{className:"react-flow__nodes",style:Zs},l.map(d=>{let g=d.type||"default";t.nodeTypes[g]||(a?.("003",Ce.error003(g)),g="default");const u=t.nodeTypes[g]||t.nodeTypes.default,h=!!(d.draggable||s&&typeof d.draggable>"u"),v=!!(d.selectable||o&&typeof d.selectable>"u"),x=!!(d.connectable||n&&typeof d.connectable>"u"),w=!!(d.focusable||r&&typeof d.focusable>"u"),y=t.nodeExtent?$s(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,f=y?.x??0,j=y?.y??0,k=Xl({x:f,y:j,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return E.createElement(u,{key:d.id,id:d.id,className:d.className,style:d.style,type:g,data:d.data,sourcePosition:d.sourcePosition||q.Bottom,targetPosition:d.targetPosition||q.Top,hidden:d.hidden,xPos:f,yPos:j,xPosOrigin:k.x,yPosOrigin:k.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:v,isConnectable:x,isFocusable:w,resizeObserver:m,dragHandle:d.dragHandle,zIndex:d[re]?.z??0,isParent:!!d[re]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!d[re]?.handleBounds})}))};Jr.displayName="NodeRenderer";var Jl=p.memo(Jr);const ec=(t,s,n)=>n===q.Left?t-s:n===q.Right?t+s:t,tc=(t,s,n)=>n===q.Top?t-s:n===q.Bottom?t+s:t,Tn="react-flow__edgeupdater",zn=({position:t,centerX:s,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:a,type:l})=>E.createElement("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:a,className:he([Tn,`${Tn}-${l}`]),cx:ec(s,r,t),cy:tc(n,r,t),r,stroke:"transparent",fill:"transparent"}),sc=()=>!0;var tt=t=>{const s=({id:n,className:r,type:o,data:i,onClick:a,onEdgeDoubleClick:l,selected:c,animated:m,label:d,labelStyle:g,labelShowBg:u,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:x,style:w,source:y,target:f,sourceX:j,sourceY:k,targetX:_,targetY:M,sourcePosition:R,targetPosition:D,elementsSelectable:I,hidden:O,sourceHandleId:$,targetHandleId:z,onContextMenu:A,onMouseEnter:C,onMouseMove:P,onMouseLeave:T,reconnectRadius:N,onReconnect:b,onReconnectStart:S,onReconnectEnd:L,markerEnd:F,markerStart:B,rfId:H,ariaLabel:G,isFocusable:Q,isReconnectable:te,pathOptions:X,interactionWidth:oe,disableKeyboardA11y:se})=>{const J=p.useRef(null),[me,ce]=p.useState(!1),[be,xe]=p.useState(!1),ae=le(),we=p.useMemo(()=>`url('#${Cs(B,H)}')`,[B,H]),ee=p.useMemo(()=>`url('#${Cs(F,H)}')`,[F,H]);if(O)return null;const U=de=>{const{edges:je,addSelectedEdges:Oe,unselectNodesAndEdges:Te,multiSelectionActive:Xe}=ae.getState(),Ne=je.find(ze=>ze.id===n);Ne&&(I&&(ae.setState({nodesSelectionActive:!1}),Ne.selected&&Xe?(Te({nodes:[],edges:[Ne]}),J.current?.blur()):Oe([n])),a&&a(de,Ne))},pe=yt(n,ae.getState,l),Pe=yt(n,ae.getState,A),ht=yt(n,ae.getState,C),qe=yt(n,ae.getState,P),Ue=yt(n,ae.getState,T),Se=(de,je)=>{if(de.button!==0)return;const{edges:Oe,isValidConnection:Te}=ae.getState(),Xe=je?f:y,Ne=(je?z:$)||null,ze=je?"target":"source",ts=Te||sc,ss=je,pt=Oe.find($e=>$e.id===n);xe(!0),S?.(de,pt,ze);const ns=$e=>{xe(!1),L?.($e,pt,ze)};_r({event:de,handleId:Ne,nodeId:Xe,onConnect:$e=>b?.(pt,$e),isTarget:ss,getState:ae.getState,setState:ae.setState,isValidConnection:ts,edgeUpdaterType:ze,onReconnectEnd:ns})},Ye=de=>Se(de,!0),Le=de=>Se(de,!1),Re=()=>ce(!0),Ze=()=>ce(!1),Ke=!I&&!a,gt=de=>{if(!se&&vr.includes(de.key)&&I){const{unselectNodesAndEdges:je,addSelectedEdges:Oe,edges:Te}=ae.getState();de.key==="Escape"?(J.current?.blur(),je({edges:[Te.find(Ne=>Ne.id===n)]})):Oe([n])}};return E.createElement("g",{className:he(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:c,animated:m,inactive:Ke,updating:me}]),onClick:U,onDoubleClick:pe,onContextMenu:Pe,onMouseEnter:ht,onMouseMove:qe,onMouseLeave:Ue,onKeyDown:Q?gt:void 0,tabIndex:Q?0:void 0,role:Q?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${y} to ${f}`,"aria-describedby":Q?`${Hr}-${H}`:void 0,ref:J},!be&&E.createElement(t,{id:n,source:y,target:f,selected:c,animated:m,label:d,labelStyle:g,labelShowBg:u,labelBgStyle:h,labelBgPadding:v,labelBgBorderRadius:x,data:i,style:w,sourceX:j,sourceY:k,targetX:_,targetY:M,sourcePosition:R,targetPosition:D,sourceHandleId:$,targetHandleId:z,markerStart:we,markerEnd:ee,pathOptions:X,interactionWidth:oe}),te&&E.createElement(E.Fragment,null,(te==="source"||te===!0)&&E.createElement(zn,{position:R,centerX:j,centerY:k,radius:N,onMouseDown:Ye,onMouseEnter:Re,onMouseOut:Ze,type:"source"}),(te==="target"||te===!0)&&E.createElement(zn,{position:D,centerX:_,centerY:M,radius:N,onMouseDown:Le,onMouseEnter:Re,onMouseOut:Ze,type:"target"})))};return s.displayName="EdgeWrapper",p.memo(s)};function nc(t){const s={default:tt(t.default||Zt),straight:tt(t.bezier||Ws),step:tt(t.step||Bs),smoothstep:tt(t.step||es),simplebezier:tt(t.simplebezier||Hs)},n={},r=Object.keys(t).filter(o=>!["default","bezier"].includes(o)).reduce((o,i)=>(o[i]=tt(t[i]||Zt),o),n);return{...s,...r}}function $n(t,s,n=null){const r=(n?.x||0)+s.x,o=(n?.y||0)+s.y,i=n?.width||s.width,a=n?.height||s.height;switch(t){case q.Top:return{x:r+i/2,y:o};case q.Right:return{x:r+i,y:o+a/2};case q.Bottom:return{x:r+i/2,y:o+a};case q.Left:return{x:r,y:o+a/2}}}function Fn(t,s){return t?t.length===1||!s?t[0]:s&&t.find(n=>n.id===s)||null:null}const rc=(t,s,n,r,o,i)=>{const a=$n(n,t,s),l=$n(i,r,o);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}};function oc({sourcePos:t,targetPos:s,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:i,width:a,height:l,transform:c}){const m={x:Math.min(t.x,s.x),y:Math.min(t.y,s.y),x2:Math.max(t.x+n,s.x+o),y2:Math.max(t.y+r,s.y+i)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const d=Fs({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:a/c[2],height:l/c[2]}),g=Math.max(0,Math.min(d.x2,m.x2)-Math.max(d.x,m.x)),u=Math.max(0,Math.min(d.y2,m.y2)-Math.max(d.y,m.y));return Math.ceil(g*u)>0}function Hn(t){const s=t?.[re]?.handleBounds||null,n=s&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},s,!!n]}const ac=[{level:0,isMaxLevel:!0,edges:[]}];function ic(t,s,n=!1){let r=-1;const o=t.reduce((a,l)=>{const c=ye(l.zIndex);let m=c?l.zIndex:0;if(n){const d=s.get(l.target),g=s.get(l.source),u=l.selected||d?.selected||g?.selected,h=Math.max(g?.[re]?.z||0,d?.[re]?.z||0,1e3);m=(c?l.zIndex:0)+(u?h:0)}return a[m]?a[m].push(l):a[m]=[l],r=m>r?m:r,a},{}),i=Object.entries(o).map(([a,l])=>{const c=+a;return{edges:l,level:c,isMaxLevel:c===r}});return i.length===0?ac:i}function lc(t,s,n){const r=ne(p.useCallback(o=>t?o.edges.filter(i=>{const a=s.get(i.source),l=s.get(i.target);return a?.width&&a?.height&&l?.width&&l?.height&&oc({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[t,s]));return ic(r,s,n)}const cc=({color:t="none",strokeWidth:s=1})=>E.createElement("polyline",{style:{stroke:t,strokeWidth:s},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),dc=({color:t="none",strokeWidth:s=1})=>E.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:s},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Bn={[Mt.Arrow]:cc,[Mt.ArrowClosed]:dc};function uc(t){const s=le();return p.useMemo(()=>Object.prototype.hasOwnProperty.call(Bn,t)?Bn[t]:(s.getState().onError?.("009",Ce.error009(t)),null),[t])}const mc=({id:t,type:s,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:a,orient:l="auto-start-reverse"})=>{const c=uc(s);return c?E.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},E.createElement(c,{color:n,strokeWidth:a})):null},hc=({defaultColor:t,rfId:s})=>n=>{const r=[];return n.edges.reduce((o,i)=>([i.markerStart,i.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const l=Cs(a,s);r.includes(l)||(o.push({id:l,color:a.color||t,...a}),r.push(l))}}),o),[]).sort((o,i)=>o.id.localeCompare(i.id))},eo=({defaultColor:t,rfId:s})=>{const n=ne(p.useCallback(hc({defaultColor:t,rfId:s}),[t,s]),(r,o)=>!(r.length!==o.length||r.some((i,a)=>i.id!==o[a].id)));return E.createElement("defs",null,n.map(r=>E.createElement(mc,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};eo.displayName="MarkerDefinitions";var gc=p.memo(eo);const pc=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),to=({defaultMarkerColor:t,onlyRenderVisibleElements:s,elevateEdgesOnSelect:n,rfId:r,edgeTypes:o,noPanClassName:i,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:m,onEdgeClick:d,onEdgeDoubleClick:g,onReconnect:u,onReconnectStart:h,onReconnectEnd:v,reconnectRadius:x,children:w,disableKeyboardA11y:y})=>{const{edgesFocusable:f,edgesUpdatable:j,elementsSelectable:k,width:_,height:M,connectionMode:R,nodeInternals:D,onError:I}=ne(pc,ue),O=lc(s,D,n);return _?E.createElement(E.Fragment,null,O.map(({level:$,edges:z,isMaxLevel:A})=>E.createElement("svg",{key:$,style:{zIndex:$},width:_,height:M,className:"react-flow__edges react-flow__container"},A&&E.createElement(gc,{defaultColor:t,rfId:r}),E.createElement("g",null,z.map(C=>{const[P,T,N]=Hn(D.get(C.source)),[b,S,L]=Hn(D.get(C.target));if(!N||!L)return null;let F=C.type||"default";o[F]||(I?.("011",Ce.error011(F)),F="default");const B=o[F]||o.default,H=R===Ve.Strict?S.target:(S.target??[]).concat(S.source??[]),G=Fn(T.source,C.sourceHandle),Q=Fn(H,C.targetHandle),te=G?.position||q.Bottom,X=Q?.position||q.Top,oe=!!(C.focusable||f&&typeof C.focusable>"u"),se=C.reconnectable||C.updatable,J=typeof u<"u"&&(se||j&&typeof se>"u");if(!G||!Q)return I?.("008",Ce.error008(G,C)),null;const{sourceX:me,sourceY:ce,targetX:be,targetY:xe}=rc(P,G,te,b,Q,X);return E.createElement(B,{key:C.id,id:C.id,className:he([C.className,i]),type:F,data:C.data,selected:!!C.selected,animated:!!C.animated,hidden:!!C.hidden,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,style:C.style,source:C.source,target:C.target,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerEnd:C.markerEnd,markerStart:C.markerStart,sourceX:me,sourceY:ce,targetX:be,targetY:xe,sourcePosition:te,targetPosition:X,elementsSelectable:k,onContextMenu:a,onMouseEnter:l,onMouseMove:c,onMouseLeave:m,onClick:d,onEdgeDoubleClick:g,onReconnect:u,onReconnectStart:h,onReconnectEnd:v,reconnectRadius:x,rfId:r,ariaLabel:C.ariaLabel,isFocusable:oe,isReconnectable:J,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth,disableKeyboardA11y:y})})))),w):null};to.displayName="EdgeRenderer";var xc=p.memo(to);const fc=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function yc({children:t}){const s=ne(fc);return E.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:s}},t)}function bc(t){const s=Ys(),n=p.useRef(!1);p.useEffect(()=>{!n.current&&s.viewportInitialized&&t&&(setTimeout(()=>t(s),1),n.current=!0)},[t,s.viewportInitialized])}const vc={[q.Left]:q.Right,[q.Right]:q.Left,[q.Top]:q.Bottom,[q.Bottom]:q.Top},so=({nodeId:t,handleType:s,style:n,type:r=Me.Bezier,CustomComponent:o,connectionStatus:i})=>{const{fromNode:a,handleId:l,toX:c,toY:m,connectionMode:d}=ne(p.useCallback(M=>({fromNode:M.nodeInternals.get(t),handleId:M.connectionHandleId,toX:(M.connectionPosition.x-M.transform[0])/M.transform[2],toY:(M.connectionPosition.y-M.transform[1])/M.transform[2],connectionMode:M.connectionMode}),[t]),ue),g=a?.[re]?.handleBounds;let u=g?.[s];if(d===Ve.Loose&&(u=u||g?.[s==="source"?"target":"source"]),!a||!u)return null;const h=l?u.find(M=>M.id===l):u[0],v=h?h.x+h.width/2:(a.width??0)/2,x=h?h.y+h.height/2:a.height??0,w=(a.positionAbsolute?.x??0)+v,y=(a.positionAbsolute?.y??0)+x,f=h?.position,j=f?vc[f]:null;if(!f||!j)return null;if(o)return E.createElement(o,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:h,fromX:w,fromY:y,toX:c,toY:m,fromPosition:f,toPosition:j,connectionStatus:i});let k="";const _={sourceX:w,sourceY:y,sourcePosition:f,targetX:c,targetY:m,targetPosition:j};return r===Me.Bezier?[k]=kr(_):r===Me.Step?[k]=Yt({..._,borderRadius:0}):r===Me.SmoothStep?[k]=Yt(_):r===Me.SimpleBezier?[k]=Sr(_):k=`M${w},${y} ${c},${m}`,E.createElement("path",{d:k,fill:"none",className:"react-flow__connection-path",style:n})};so.displayName="ConnectionLine";const wc=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function jc({containerStyle:t,style:s,type:n,component:r}){const{nodeId:o,handleType:i,nodesConnectable:a,width:l,height:c,connectionStatus:m}=ne(wc,ue);return!(o&&i&&l&&a)?null:E.createElement("svg",{style:t,width:l,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},E.createElement("g",{className:he(["react-flow__connection",m])},E.createElement(so,{nodeId:o,handleType:i,style:s,type:n,CustomComponent:r,connectionStatus:m})))}function Wn(t,s){return p.useRef(null),le(),p.useMemo(()=>s(t),[t])}const no=({nodeTypes:t,edgeTypes:s,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:i,onNodeClick:a,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:m,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:u,onNodeContextMenu:h,onSelectionContextMenu:v,onSelectionStart:x,onSelectionEnd:w,connectionLineType:y,connectionLineStyle:f,connectionLineComponent:j,connectionLineContainerStyle:k,selectionKeyCode:_,selectionOnDrag:M,selectionMode:R,multiSelectionKeyCode:D,panActivationKeyCode:I,zoomActivationKeyCode:O,deleteKeyCode:$,onlyRenderVisibleElements:z,elementsSelectable:A,selectNodesOnDrag:C,defaultViewport:P,translateExtent:T,minZoom:N,maxZoom:b,preventScrolling:S,defaultMarkerColor:L,zoomOnScroll:F,zoomOnPinch:B,panOnScroll:H,panOnScrollSpeed:G,panOnScrollMode:Q,zoomOnDoubleClick:te,panOnDrag:X,onPaneClick:oe,onPaneMouseEnter:se,onPaneMouseMove:J,onPaneMouseLeave:me,onPaneScroll:ce,onPaneContextMenu:be,onEdgeContextMenu:xe,onEdgeMouseEnter:ae,onEdgeMouseMove:we,onEdgeMouseLeave:ee,onReconnect:U,onReconnectStart:pe,onReconnectEnd:Pe,reconnectRadius:ht,noDragClassName:qe,noWheelClassName:Ue,noPanClassName:Se,elevateEdgesOnSelect:Ye,disableKeyboardA11y:Le,nodeOrigin:Re,nodeExtent:Ze,rfId:Ke})=>{const gt=Wn(t,Kl),de=Wn(s,nc);return bc(i),E.createElement(Yl,{onPaneClick:oe,onPaneMouseEnter:se,onPaneMouseMove:J,onPaneMouseLeave:me,onPaneContextMenu:be,onPaneScroll:ce,deleteKeyCode:$,selectionKeyCode:_,selectionOnDrag:M,selectionMode:R,onSelectionStart:x,onSelectionEnd:w,multiSelectionKeyCode:D,panActivationKeyCode:I,zoomActivationKeyCode:O,elementsSelectable:A,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:F,zoomOnPinch:B,zoomOnDoubleClick:te,panOnScroll:H,panOnScrollSpeed:G,panOnScrollMode:Q,panOnDrag:X,defaultViewport:P,translateExtent:T,minZoom:N,maxZoom:b,onSelectionContextMenu:v,preventScrolling:S,noDragClassName:qe,noWheelClassName:Ue,noPanClassName:Se,disableKeyboardA11y:Le},E.createElement(yc,null,E.createElement(xc,{edgeTypes:de,onEdgeClick:l,onEdgeDoubleClick:m,onlyRenderVisibleElements:z,onEdgeContextMenu:xe,onEdgeMouseEnter:ae,onEdgeMouseMove:we,onEdgeMouseLeave:ee,onReconnect:U,onReconnectStart:pe,onReconnectEnd:Pe,reconnectRadius:ht,defaultMarkerColor:L,noPanClassName:Se,elevateEdgesOnSelect:!!Ye,disableKeyboardA11y:Le,rfId:Ke},E.createElement(jc,{style:f,type:y,component:j,containerStyle:k})),E.createElement("div",{className:"react-flow__edgelabel-renderer"}),E.createElement(Jl,{nodeTypes:gt,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:u,onNodeContextMenu:h,selectNodesOnDrag:C,onlyRenderVisibleElements:z,noPanClassName:Se,noDragClassName:qe,disableKeyboardA11y:Le,nodeOrigin:Re,nodeExtent:Ze,rfId:Ke})))};no.displayName="GraphView";var Nc=p.memo(no);const Ms=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ae={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ms,nodeExtent:Ms,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ve.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Xi,isValidConnection:void 0},Sc=()=>Bi((t,s)=>({...Ae,setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=s();t({nodeInternals:ps(n,r,o,i)})},getNodes:()=>Array.from(s().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=s();t({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",i=typeof r<"u",a=o?ps(n,new Map,s().nodeOrigin,s().elevateNodesOnSelect):new Map;t({nodeInternals:a,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:a,fitViewOnInitOptions:l,domNode:c,nodeOrigin:m}=s(),d=c?.querySelector(".react-flow__viewport");if(!d)return;const g=window.getComputedStyle(d),{m22:u}=new window.DOMMatrixReadOnly(g.transform),h=n.reduce((x,w)=>{const y=o.get(w.id);if(y?.hidden)o.set(y.id,{...y,[re]:{...y[re],handleBounds:void 0}});else if(y){const f=zs(w.nodeElement);!!(f.width&&f.height&&(y.width!==f.width||y.height!==f.height||w.forceUpdate))&&(o.set(y.id,{...y,[re]:{...y[re],handleBounds:{source:On(".source",w.nodeElement,u,m),target:On(".target",w.nodeElement,u,m)}},...f}),x.push({id:y.id,type:"dimensions",dimensions:f}))}return x},[]);Wr(o,m);const v=a||i&&!a&&Vr(s,{initial:!0,...l});t({nodeInternals:new Map(o),fitViewOnInitDone:v}),h?.length>0&&r?.(h)},updateNodePositions:(n,r=!0,o=!1)=>{const{triggerNodeChanges:i}=s(),a=n.map(l=>{const c={id:l.id,type:"position",dragging:o};return r&&(c.positionAbsolute=l.positionAbsolute,c.position=l.position),c});i(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:a,getNodes:l,elevateNodesOnSelect:c}=s();if(n?.length){if(i){const m=qr(n,l()),d=ps(m,o,a,c);t({nodeInternals:d})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=s();let a,l=null;r?a=n.map(c=>De(c,!0)):(a=nt(i(),n),l=nt(o,[])),Ot({changedNodes:a,changedEdges:l,get:s,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=s();let a,l=null;r?a=n.map(c=>De(c,!0)):(a=nt(o,n),l=nt(i(),[])),Ot({changedNodes:l,changedEdges:a,get:s,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:o,getNodes:i}=s(),a=n||i(),l=r||o,c=a.map(d=>(d.selected=!1,De(d.id,!1))),m=l.map(d=>De(d.id,!1));Ot({changedNodes:c,changedEdges:m,get:s,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=s();r?.scaleExtent([n,o]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=s();r?.scaleExtent([o,n]),t({maxZoom:n})},setTranslateExtent:n=>{s().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=s(),i=r().filter(l=>l.selected).map(l=>De(l.id,!1)),a=n.filter(l=>l.selected).map(l=>De(l.id,!1));Ot({changedNodes:i,changedEdges:a,get:s,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=s();r.forEach(o=>{o.positionAbsolute=$s(o.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:o,height:i,d3Zoom:a,d3Selection:l,translateExtent:c}=s();if(!a||!l||!n.x&&!n.y)return!1;const m=rt.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[o,i]],g=a?.constrain()(m,d,c);return a.transform(l,g),r[0]!==g.x||r[1]!==g.y||r[2]!==g.k},cancelConnection:()=>t({connectionNodeId:Ae.connectionNodeId,connectionHandleId:Ae.connectionHandleId,connectionHandleType:Ae.connectionHandleType,connectionStatus:Ae.connectionStatus,connectionStartHandle:Ae.connectionStartHandle,connectionEndHandle:Ae.connectionEndHandle}),reset:()=>t({...Ae})}),Object.is),ro=({children:t})=>{const s=p.useRef(null);return s.current||(s.current=Sc()),E.createElement(Wi,{value:s.current},t)};ro.displayName="ReactFlowProvider";const oo=({children:t})=>p.useContext(Jt)?E.createElement(E.Fragment,null,t):E.createElement(ro,null,t);oo.displayName="ReactFlowWrapper";const kc={input:Or,default:Es,output:zr,group:Us},Cc={default:Zt,straight:Ws,step:Bs,smoothstep:es,simplebezier:Hs},Ac=[0,0],Ec=[15,15],Dc={x:0,y:0,zoom:1},Mc={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ao=p.forwardRef(({nodes:t,edges:s,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i=kc,edgeTypes:a=Cc,onNodeClick:l,onEdgeClick:c,onInit:m,onMove:d,onMoveStart:g,onMoveEnd:u,onConnect:h,onConnectStart:v,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:y,onNodeMouseEnter:f,onNodeMouseMove:j,onNodeMouseLeave:k,onNodeContextMenu:_,onNodeDoubleClick:M,onNodeDragStart:R,onNodeDrag:D,onNodeDragStop:I,onNodesDelete:O,onEdgesDelete:$,onSelectionChange:z,onSelectionDragStart:A,onSelectionDrag:C,onSelectionDragStop:P,onSelectionContextMenu:T,onSelectionStart:N,onSelectionEnd:b,connectionMode:S=Ve.Strict,connectionLineType:L=Me.Bezier,connectionLineStyle:F,connectionLineComponent:B,connectionLineContainerStyle:H,deleteKeyCode:G="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:te=!1,selectionMode:X=Dt.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:se=Ut()?"Meta":"Control",zoomActivationKeyCode:J=Ut()?"Meta":"Control",snapToGrid:me=!1,snapGrid:ce=Ec,onlyRenderVisibleElements:be=!1,selectNodesOnDrag:xe=!0,nodesDraggable:ae,nodesConnectable:we,nodesFocusable:ee,nodeOrigin:U=Ac,edgesFocusable:pe,edgesUpdatable:Pe,elementsSelectable:ht,defaultViewport:qe=Dc,minZoom:Ue=.5,maxZoom:Se=2,translateExtent:Ye=Ms,preventScrolling:Le=!0,nodeExtent:Re,defaultMarkerColor:Ze="#b1b1b7",zoomOnScroll:Ke=!0,zoomOnPinch:gt=!0,panOnScroll:de=!1,panOnScrollSpeed:je=.5,panOnScrollMode:Oe=Be.Free,zoomOnDoubleClick:Te=!0,panOnDrag:Xe=!0,onPaneClick:Ne,onPaneMouseEnter:ze,onPaneMouseMove:ts,onPaneMouseLeave:ss,onPaneScroll:pt,onPaneContextMenu:ns,children:Xs,onEdgeContextMenu:$e,onEdgeDoubleClick:So,onEdgeMouseEnter:ko,onEdgeMouseMove:Co,onEdgeMouseLeave:Ao,onEdgeUpdate:Eo,onEdgeUpdateStart:Do,onEdgeUpdateEnd:Mo,onReconnect:Io,onReconnectStart:_o,onReconnectEnd:Po,reconnectRadius:Lo=10,edgeUpdaterRadius:Ro=10,onNodesChange:Oo,onEdgesChange:To,noDragClassName:zo="nodrag",noWheelClassName:$o="nowheel",noPanClassName:Qs="nopan",fitView:Fo=!1,fitViewOptions:Ho,connectOnClick:Bo=!0,attributionPosition:Wo,proOptions:Vo,defaultEdgeOptions:Go,elevateNodesOnSelect:qo=!0,elevateEdgesOnSelect:Uo=!1,disableKeyboardA11y:Js=!1,autoPanOnConnect:Yo=!0,autoPanOnNodeDrag:Zo=!0,connectionRadius:Ko=20,isValidConnection:Xo,onError:Qo,style:Jo,id:en,nodeDragThreshold:ea,...ta},sa)=>{const rs=en||"1";return E.createElement("div",{...ta,style:{...Jo,...Mc},ref:sa,className:he(["react-flow",o]),"data-testid":"rf__wrapper",id:en},E.createElement(oo,null,E.createElement(Nc,{onInit:m,onMove:d,onMoveStart:g,onMoveEnd:u,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:f,onNodeMouseMove:j,onNodeMouseLeave:k,onNodeContextMenu:_,onNodeDoubleClick:M,nodeTypes:i,edgeTypes:a,connectionLineType:L,connectionLineStyle:F,connectionLineComponent:B,connectionLineContainerStyle:H,selectionKeyCode:Q,selectionOnDrag:te,selectionMode:X,deleteKeyCode:G,multiSelectionKeyCode:se,panActivationKeyCode:oe,zoomActivationKeyCode:J,onlyRenderVisibleElements:be,selectNodesOnDrag:xe,defaultViewport:qe,translateExtent:Ye,minZoom:Ue,maxZoom:Se,preventScrolling:Le,zoomOnScroll:Ke,zoomOnPinch:gt,zoomOnDoubleClick:Te,panOnScroll:de,panOnScrollSpeed:je,panOnScrollMode:Oe,panOnDrag:Xe,onPaneClick:Ne,onPaneMouseEnter:ze,onPaneMouseMove:ts,onPaneMouseLeave:ss,onPaneScroll:pt,onPaneContextMenu:ns,onSelectionContextMenu:T,onSelectionStart:N,onSelectionEnd:b,onEdgeContextMenu:$e,onEdgeDoubleClick:So,onEdgeMouseEnter:ko,onEdgeMouseMove:Co,onEdgeMouseLeave:Ao,onReconnect:Io??Eo,onReconnectStart:_o??Do,onReconnectEnd:Po??Mo,reconnectRadius:Lo??Ro,defaultMarkerColor:Ze,noDragClassName:zo,noWheelClassName:$o,noPanClassName:Qs,elevateEdgesOnSelect:Uo,rfId:rs,disableKeyboardA11y:Js,nodeOrigin:U,nodeExtent:Re}),E.createElement(vl,{nodes:t,edges:s,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:v,onConnectEnd:x,onClickConnectStart:w,onClickConnectEnd:y,nodesDraggable:ae,nodesConnectable:we,nodesFocusable:ee,edgesFocusable:pe,edgesUpdatable:Pe,elementsSelectable:ht,elevateNodesOnSelect:qo,minZoom:Ue,maxZoom:Se,nodeExtent:Re,onNodesChange:Oo,onEdgesChange:To,snapToGrid:me,snapGrid:ce,connectionMode:S,translateExtent:Ye,connectOnClick:Bo,defaultEdgeOptions:Go,fitView:Fo,fitViewOptions:Ho,onNodesDelete:O,onEdgesDelete:$,onNodeDragStart:R,onNodeDrag:D,onNodeDragStop:I,onSelectionDrag:C,onSelectionDragStart:A,onSelectionDragStop:P,noPanClassName:Qs,nodeOrigin:U,rfId:rs,autoPanOnConnect:Yo,autoPanOnNodeDrag:Zo,onError:Qo,connectionRadius:Ko,isValidConnection:Xo,nodeDragThreshold:ea}),E.createElement(yl,{onSelectionChange:z}),Xs,E.createElement(Gi,{proOptions:Vo,position:Wo}),E.createElement(kl,{rfId:rs,disableKeyboardA11y:Js})))});ao.displayName="ReactFlow";function io(t){return s=>{const[n,r]=p.useState(s),o=p.useCallback(i=>r(a=>t(i,a)),[]);return[n,r,o]}}const Ic=io(qr),_c=io($l);function Pc(){return E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},E.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Lc(){return E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},E.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Rc(){return E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},E.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Oc(){return E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},E.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Tc(){return E.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},E.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const jt=({children:t,className:s,...n})=>E.createElement("button",{type:"button",className:he(["react-flow__controls-button",s]),...n},t);jt.displayName="ControlButton";const zc=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),lo=({style:t,showZoom:s=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:a,onFitView:l,onInteractiveChange:c,className:m,children:d,position:g="bottom-left"})=>{const u=le(),[h,v]=p.useState(!1),{isInteractive:x,minZoomReached:w,maxZoomReached:y}=ne(zc,ue),{zoomIn:f,zoomOut:j,fitView:k}=Ys();if(p.useEffect(()=>{v(!0)},[]),!h)return null;const _=()=>{f(),i?.()},M=()=>{j(),a?.()},R=()=>{k(o),l?.()},D=()=>{u.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c?.(!x)};return E.createElement(fr,{className:he(["react-flow__controls",m]),position:g,style:t,"data-testid":"rf__controls"},s&&E.createElement(E.Fragment,null,E.createElement(jt,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},E.createElement(Pc,null)),E.createElement(jt,{onClick:M,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},E.createElement(Lc,null))),n&&E.createElement(jt,{className:"react-flow__controls-fitview",onClick:R,title:"fit view","aria-label":"fit view"},E.createElement(Rc,null)),r&&E.createElement(jt,{className:"react-flow__controls-interactive",onClick:D,title:"toggle interactivity","aria-label":"toggle interactivity"},x?E.createElement(Tc,null):E.createElement(Oc,null)),d)};lo.displayName="Controls";var $c=p.memo(lo),ve;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ve||(ve={}));function Fc({color:t,dimensions:s,lineWidth:n}){return E.createElement("path",{stroke:t,strokeWidth:n,d:`M${s[0]/2} 0 V${s[1]} M0 ${s[1]/2} H${s[0]}`})}function Hc({color:t,radius:s}){return E.createElement("circle",{cx:s,cy:s,r:s,fill:t})}const Bc={[ve.Dots]:"#91919a",[ve.Lines]:"#eee",[ve.Cross]:"#e2e2e2"},Wc={[ve.Dots]:1,[ve.Lines]:1,[ve.Cross]:6},Vc=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function co({id:t,variant:s=ve.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=2,color:a,style:l,className:c}){const m=p.useRef(null),{transform:d,patternId:g}=ne(Vc,ue),u=a||Bc[s],h=r||Wc[s],v=s===ve.Dots,x=s===ve.Cross,w=Array.isArray(n)?n:[n,n],y=[w[0]*d[2]||1,w[1]*d[2]||1],f=h*d[2],j=x?[f,f]:y,k=v?[f/i,f/i]:[j[0]/i,j[1]/i];return E.createElement("svg",{className:he(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},E.createElement("pattern",{id:g+t,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},v?E.createElement(Hc,{color:u,radius:f/i}):E.createElement(Fc,{dimensions:j,color:u,lineWidth:o})),E.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+t})`}))}co.displayName="Background";var Gc=p.memo(co);function uo(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(s=0;s<o;s++)t[s]&&(n=uo(t[s]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qc(){for(var t,s,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(s=uo(t))&&(r&&(r+=" "),r+=s);return r}const Uc=(t,s)=>{const n=new Array(t.length+s.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<s.length;r++)n[t.length+r]=s[r];return n},Yc=(t,s)=>({classGroupId:t,validator:s}),mo=(t=new Map,s=null,n)=>({nextPart:t,validators:s,classGroupId:n}),Kt="-",Vn=[],Zc="arbitrary..",Kc=t=>{const s=Qc(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return Xc(a);const l=a.split(Kt),c=l[0]===""&&l.length>1?1:0;return ho(l,c,s)},getConflictingClassGroupIds:(a,l)=>{if(l){const c=r[a],m=n[a];return c?m?Uc(m,c):c:m||Vn}return n[a]||Vn}}},ho=(t,s,n)=>{if(t.length-s===0)return n.classGroupId;const o=t[s],i=n.nextPart.get(o);if(i){const m=ho(t,s+1,i);if(m)return m}const a=n.validators;if(a===null)return;const l=s===0?t.join(Kt):t.slice(s).join(Kt),c=a.length;for(let m=0;m<c;m++){const d=a[m];if(d.validator(l))return d.classGroupId}},Xc=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=t.slice(1,-1),n=s.indexOf(":"),r=s.slice(0,n);return r?Zc+r:void 0})(),Qc=t=>{const{theme:s,classGroups:n}=t;return Jc(n,s)},Jc=(t,s)=>{const n=mo();for(const r in t){const o=t[r];Ks(o,n,r,s)}return n},Ks=(t,s,n,r)=>{const o=t.length;for(let i=0;i<o;i++){const a=t[i];ed(a,s,n,r)}},ed=(t,s,n,r)=>{if(typeof t=="string"){td(t,s,n);return}if(typeof t=="function"){sd(t,s,n,r);return}nd(t,s,n,r)},td=(t,s,n)=>{const r=t===""?s:go(s,t);r.classGroupId=n},sd=(t,s,n,r)=>{if(rd(t)){Ks(t(r),s,n,r);return}s.validators===null&&(s.validators=[]),s.validators.push(Yc(n,t))},nd=(t,s,n,r)=>{const o=Object.entries(t),i=o.length;for(let a=0;a<i;a++){const[l,c]=o[a];Ks(c,go(s,l),n,r)}},go=(t,s)=>{let n=t;const r=s.split(Kt),o=r.length;for(let i=0;i<o;i++){const a=r[i];let l=n.nextPart.get(a);l||(l=mo(),n.nextPart.set(a,l)),n=l}return n},rd=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,od=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=Object.create(null),r=Object.create(null);const o=(i,a)=>{n[i]=a,s++,s>t&&(s=0,r=n,n=Object.create(null))};return{get(i){let a=n[i];if(a!==void 0)return a;if((a=r[i])!==void 0)return o(i,a),a},set(i,a){i in n?n[i]=a:o(i,a)}}},Is="!",Gn=":",ad=[],qn=(t,s,n,r,o)=>({modifiers:t,hasImportantModifier:s,baseClassName:n,maybePostfixModifierPosition:r,isExternal:o}),id=t=>{const{prefix:s,experimentalParseClassName:n}=t;let r=o=>{const i=[];let a=0,l=0,c=0,m;const d=o.length;for(let x=0;x<d;x++){const w=o[x];if(a===0&&l===0){if(w===Gn){i.push(o.slice(c,x)),c=x+1;continue}if(w==="/"){m=x;continue}}w==="["?a++:w==="]"?a--:w==="("?l++:w===")"&&l--}const g=i.length===0?o:o.slice(c);let u=g,h=!1;g.endsWith(Is)?(u=g.slice(0,-1),h=!0):g.startsWith(Is)&&(u=g.slice(1),h=!0);const v=m&&m>c?m-c:void 0;return qn(i,h,u,v)};if(s){const o=s+Gn,i=r;r=a=>a.startsWith(o)?i(a.slice(o.length)):qn(ad,!1,a,void 0,!0)}if(n){const o=r;r=i=>n({className:i,parseClassName:o})}return r},ld=t=>{const s=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{s.set(n,1e6+r)}),n=>{const r=[];let o=[];for(let i=0;i<n.length;i++){const a=n[i],l=a[0]==="[",c=s.has(a);l||c?(o.length>0&&(o.sort(),r.push(...o),o=[]),r.push(a)):o.push(a)}return o.length>0&&(o.sort(),r.push(...o)),r}},cd=t=>({cache:od(t.cacheSize),parseClassName:id(t),sortModifiers:ld(t),...Kc(t)}),dd=/\s+/,ud=(t,s)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=s,a=[],l=t.trim().split(dd);let c="";for(let m=l.length-1;m>=0;m-=1){const d=l[m],{isExternal:g,modifiers:u,hasImportantModifier:h,baseClassName:v,maybePostfixModifierPosition:x}=n(d);if(g){c=d+(c.length>0?" "+c:c);continue}let w=!!x,y=r(w?v.substring(0,x):v);if(!y){if(!w){c=d+(c.length>0?" "+c:c);continue}if(y=r(v),!y){c=d+(c.length>0?" "+c:c);continue}w=!1}const f=u.length===0?"":u.length===1?u[0]:i(u).join(":"),j=h?f+Is:f,k=j+y;if(a.indexOf(k)>-1)continue;a.push(k);const _=o(y,w);for(let M=0;M<_.length;++M){const R=_[M];a.push(j+R)}c=d+(c.length>0?" "+c:c)}return c},md=(...t)=>{let s=0,n,r,o="";for(;s<t.length;)(n=t[s++])&&(r=po(n))&&(o&&(o+=" "),o+=r);return o},po=t=>{if(typeof t=="string")return t;let s,n="";for(let r=0;r<t.length;r++)t[r]&&(s=po(t[r]))&&(n&&(n+=" "),n+=s);return n},hd=(t,...s)=>{let n,r,o,i;const a=c=>{const m=s.reduce((d,g)=>g(d),t());return n=cd(m),r=n.cache.get,o=n.cache.set,i=l,l(c)},l=c=>{const m=r(c);if(m)return m;const d=ud(c,n);return o(c,d),d};return i=a,(...c)=>i(md(...c))},gd=[],ie=t=>{const s=n=>n[t]||gd;return s.isThemeGetter=!0,s},xo=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fo=/^\((?:(\w[\w-]*):)?(.+)\)$/i,pd=/^\d+\/\d+$/,xd=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yd=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,bd=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vd=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,st=t=>pd.test(t),Z=t=>!!t&&!Number.isNaN(Number(t)),Ee=t=>!!t&&Number.isInteger(Number(t)),bs=t=>t.endsWith("%")&&Z(t.slice(0,-1)),ke=t=>xd.test(t),wd=()=>!0,jd=t=>fd.test(t)&&!yd.test(t),yo=()=>!1,Nd=t=>bd.test(t),Sd=t=>vd.test(t),kd=t=>!W(t)&&!V(t),Cd=t=>ut(t,wo,yo),W=t=>xo.test(t),Fe=t=>ut(t,jo,jd),vs=t=>ut(t,Id,Z),Un=t=>ut(t,bo,yo),Ad=t=>ut(t,vo,Sd),zt=t=>ut(t,No,Nd),V=t=>fo.test(t),wt=t=>mt(t,jo),Ed=t=>mt(t,_d),Yn=t=>mt(t,bo),Dd=t=>mt(t,wo),Md=t=>mt(t,vo),$t=t=>mt(t,No,!0),ut=(t,s,n)=>{const r=xo.exec(t);return r?r[1]?s(r[1]):n(r[2]):!1},mt=(t,s,n=!1)=>{const r=fo.exec(t);return r?r[1]?s(r[1]):n:!1},bo=t=>t==="position"||t==="percentage",vo=t=>t==="image"||t==="url",wo=t=>t==="length"||t==="size"||t==="bg-size",jo=t=>t==="length",Id=t=>t==="number",_d=t=>t==="family-name",No=t=>t==="shadow",Pd=()=>{const t=ie("color"),s=ie("font"),n=ie("text"),r=ie("font-weight"),o=ie("tracking"),i=ie("leading"),a=ie("breakpoint"),l=ie("container"),c=ie("spacing"),m=ie("radius"),d=ie("shadow"),g=ie("inset-shadow"),u=ie("text-shadow"),h=ie("drop-shadow"),v=ie("blur"),x=ie("perspective"),w=ie("aspect"),y=ie("ease"),f=ie("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],_=()=>[...k(),V,W],M=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],D=()=>[V,W,c],I=()=>[st,"full","auto",...D()],O=()=>[Ee,"none","subgrid",V,W],$=()=>["auto",{span:["full",Ee,V,W]},Ee,V,W],z=()=>[Ee,"auto",V,W],A=()=>["auto","min","max","fr",V,W],C=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],P=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...D()],N=()=>[st,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],b=()=>[t,V,W],S=()=>[...k(),Yn,Un,{position:[V,W]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",Dd,Cd,{size:[V,W]}],B=()=>[bs,wt,Fe],H=()=>["","none","full",m,V,W],G=()=>["",Z,wt,Fe],Q=()=>["solid","dashed","dotted","double"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],X=()=>[Z,bs,Yn,Un],oe=()=>["","none",v,V,W],se=()=>["none",Z,V,W],J=()=>["none",Z,V,W],me=()=>[Z,V,W],ce=()=>[st,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ke],breakpoint:[ke],color:[wd],container:[ke],"drop-shadow":[ke],ease:["in","out","in-out"],font:[kd],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ke],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ke],shadow:[ke],spacing:["px",Z],text:[ke],"text-shadow":[ke],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",st,W,V,w]}],container:["container"],columns:[{columns:[Z,W,V,l]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:_()}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[Ee,"auto",V,W]}],basis:[{basis:[st,"full","auto",l,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Z,st,"auto","initial","none",W]}],grow:[{grow:["",Z,V,W]}],shrink:[{shrink:["",Z,V,W]}],order:[{order:[Ee,"first","last","none",V,W]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":A()}],"auto-rows":[{"auto-rows":A()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...C(),"normal"]}],"justify-items":[{"justify-items":[...P(),"normal"]}],"justify-self":[{"justify-self":["auto",...P()]}],"align-content":[{content:["normal",...C()]}],"align-items":[{items:[...P(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...P(),{baseline:["","last"]}]}],"place-content":[{"place-content":C()}],"place-items":[{"place-items":[...P(),"baseline"]}],"place-self":[{"place-self":["auto",...P()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:N()}],w:[{w:[l,"screen",...N()]}],"min-w":[{"min-w":[l,"screen","none",...N()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...N()]}],h:[{h:["screen","lh",...N()]}],"min-h":[{"min-h":["screen","lh","none",...N()]}],"max-h":[{"max-h":["screen","lh",...N()]}],"font-size":[{text:["base",n,wt,Fe]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,V,vs]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bs,W]}],"font-family":[{font:[Ed,W,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,V,W]}],"line-clamp":[{"line-clamp":[Z,"none",V,vs]}],leading:[{leading:[i,...D()]}],"list-image":[{"list-image":["none",V,W]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",V,W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:b()}],"text-color":[{text:b()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:[Z,"from-font","auto",V,Fe]}],"text-decoration-color":[{decoration:b()}],"underline-offset":[{"underline-offset":[Z,"auto",V,W]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V,W]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V,W]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:S()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ee,V,W],radial:["",V,W],conic:[Ee,V,W]},Md,Ad]}],"bg-color":[{bg:b()}],"gradient-from-pos":[{from:B()}],"gradient-via-pos":[{via:B()}],"gradient-to-pos":[{to:B()}],"gradient-from":[{from:b()}],"gradient-via":[{via:b()}],"gradient-to":[{to:b()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:G()}],"border-w-x":[{"border-x":G()}],"border-w-y":[{"border-y":G()}],"border-w-s":[{"border-s":G()}],"border-w-e":[{"border-e":G()}],"border-w-t":[{"border-t":G()}],"border-w-r":[{"border-r":G()}],"border-w-b":[{"border-b":G()}],"border-w-l":[{"border-l":G()}],"divide-x":[{"divide-x":G()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":G()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Q(),"hidden","none"]}],"divide-style":[{divide:[...Q(),"hidden","none"]}],"border-color":[{border:b()}],"border-color-x":[{"border-x":b()}],"border-color-y":[{"border-y":b()}],"border-color-s":[{"border-s":b()}],"border-color-e":[{"border-e":b()}],"border-color-t":[{"border-t":b()}],"border-color-r":[{"border-r":b()}],"border-color-b":[{"border-b":b()}],"border-color-l":[{"border-l":b()}],"divide-color":[{divide:b()}],"outline-style":[{outline:[...Q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Z,V,W]}],"outline-w":[{outline:["",Z,wt,Fe]}],"outline-color":[{outline:b()}],shadow:[{shadow:["","none",d,$t,zt]}],"shadow-color":[{shadow:b()}],"inset-shadow":[{"inset-shadow":["none",g,$t,zt]}],"inset-shadow-color":[{"inset-shadow":b()}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:b()}],"ring-offset-w":[{"ring-offset":[Z,Fe]}],"ring-offset-color":[{"ring-offset":b()}],"inset-ring-w":[{"inset-ring":G()}],"inset-ring-color":[{"inset-ring":b()}],"text-shadow":[{"text-shadow":["none",u,$t,zt]}],"text-shadow-color":[{"text-shadow":b()}],opacity:[{opacity:[Z,V,W]}],"mix-blend":[{"mix-blend":[...te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Z]}],"mask-image-linear-from-pos":[{"mask-linear-from":X()}],"mask-image-linear-to-pos":[{"mask-linear-to":X()}],"mask-image-linear-from-color":[{"mask-linear-from":b()}],"mask-image-linear-to-color":[{"mask-linear-to":b()}],"mask-image-t-from-pos":[{"mask-t-from":X()}],"mask-image-t-to-pos":[{"mask-t-to":X()}],"mask-image-t-from-color":[{"mask-t-from":b()}],"mask-image-t-to-color":[{"mask-t-to":b()}],"mask-image-r-from-pos":[{"mask-r-from":X()}],"mask-image-r-to-pos":[{"mask-r-to":X()}],"mask-image-r-from-color":[{"mask-r-from":b()}],"mask-image-r-to-color":[{"mask-r-to":b()}],"mask-image-b-from-pos":[{"mask-b-from":X()}],"mask-image-b-to-pos":[{"mask-b-to":X()}],"mask-image-b-from-color":[{"mask-b-from":b()}],"mask-image-b-to-color":[{"mask-b-to":b()}],"mask-image-l-from-pos":[{"mask-l-from":X()}],"mask-image-l-to-pos":[{"mask-l-to":X()}],"mask-image-l-from-color":[{"mask-l-from":b()}],"mask-image-l-to-color":[{"mask-l-to":b()}],"mask-image-x-from-pos":[{"mask-x-from":X()}],"mask-image-x-to-pos":[{"mask-x-to":X()}],"mask-image-x-from-color":[{"mask-x-from":b()}],"mask-image-x-to-color":[{"mask-x-to":b()}],"mask-image-y-from-pos":[{"mask-y-from":X()}],"mask-image-y-to-pos":[{"mask-y-to":X()}],"mask-image-y-from-color":[{"mask-y-from":b()}],"mask-image-y-to-color":[{"mask-y-to":b()}],"mask-image-radial":[{"mask-radial":[V,W]}],"mask-image-radial-from-pos":[{"mask-radial-from":X()}],"mask-image-radial-to-pos":[{"mask-radial-to":X()}],"mask-image-radial-from-color":[{"mask-radial-from":b()}],"mask-image-radial-to-color":[{"mask-radial-to":b()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[Z]}],"mask-image-conic-from-pos":[{"mask-conic-from":X()}],"mask-image-conic-to-pos":[{"mask-conic-to":X()}],"mask-image-conic-from-color":[{"mask-conic-from":b()}],"mask-image-conic-to-color":[{"mask-conic-to":b()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:S()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",V,W]}],filter:[{filter:["","none",V,W]}],blur:[{blur:oe()}],brightness:[{brightness:[Z,V,W]}],contrast:[{contrast:[Z,V,W]}],"drop-shadow":[{"drop-shadow":["","none",h,$t,zt]}],"drop-shadow-color":[{"drop-shadow":b()}],grayscale:[{grayscale:["",Z,V,W]}],"hue-rotate":[{"hue-rotate":[Z,V,W]}],invert:[{invert:["",Z,V,W]}],saturate:[{saturate:[Z,V,W]}],sepia:[{sepia:["",Z,V,W]}],"backdrop-filter":[{"backdrop-filter":["","none",V,W]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[Z,V,W]}],"backdrop-contrast":[{"backdrop-contrast":[Z,V,W]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Z,V,W]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Z,V,W]}],"backdrop-invert":[{"backdrop-invert":["",Z,V,W]}],"backdrop-opacity":[{"backdrop-opacity":[Z,V,W]}],"backdrop-saturate":[{"backdrop-saturate":[Z,V,W]}],"backdrop-sepia":[{"backdrop-sepia":["",Z,V,W]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",V,W]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Z,"initial",V,W]}],ease:[{ease:["linear","initial",y,V,W]}],delay:[{delay:[Z,V,W]}],animate:[{animate:["none",f,V,W]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,V,W]}],"perspective-origin":[{"perspective-origin":_()}],rotate:[{rotate:se()}],"rotate-x":[{"rotate-x":se()}],"rotate-y":[{"rotate-y":se()}],"rotate-z":[{"rotate-z":se()}],scale:[{scale:J()}],"scale-x":[{"scale-x":J()}],"scale-y":[{"scale-y":J()}],"scale-z":[{"scale-z":J()}],"scale-3d":["scale-3d"],skew:[{skew:me()}],"skew-x":[{"skew-x":me()}],"skew-y":[{"skew-y":me()}],transform:[{transform:[V,W,"","none","gpu","cpu"]}],"transform-origin":[{origin:_()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ce()}],"translate-x":[{"translate-x":ce()}],"translate-y":[{"translate-y":ce()}],"translate-z":[{"translate-z":ce()}],"translate-none":["translate-none"],accent:[{accent:b()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:b()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V,W]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V,W]}],fill:[{fill:["none",...b()]}],"stroke-w":[{stroke:[Z,wt,Fe,vs]}],stroke:[{stroke:["none",...b()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Ld=hd(Pd);function Ct(...t){return Ld(qc(t))}const Rd=({sourceX:t,sourceY:s,targetX:n,targetY:r,sourcePosition:o,targetPosition:i,style:a={},markerEnd:l,data:c})=>{const[m]=Yt({sourceX:t,sourceY:s,sourcePosition:o,targetX:n,targetY:r,targetPosition:i});return e.jsxs(e.Fragment,{children:[e.jsx(dt,{path:m,markerEnd:l,style:a}),c?.active&&e.jsx("circle",{r:"4",fill:"#0bcad9",children:e.jsx("animateMotion",{dur:"1.5s",repeatCount:"indefinite",path:m})})]})},Od={dataflow:Rd},Td=({data:t,selected:s})=>e.jsxs("div",{className:Ct("flex items-center gap-3 p-3 rounded-lg border bg-slate-900/90 w-52 transition-all shadow-lg",s?"border-primary shadow-[0_0_15px_-3px_rgba(11,202,217,0.4)]":"border-slate-800 hover:border-slate-700",t.active?"border-primary/50 shadow-[0_0_10px_-3px_rgba(11,202,217,0.3)]":""),children:[e.jsx(Ge,{type:"source",position:q.Right,className:"!bg-slate-600 !w-2 !h-2"}),e.jsx("div",{className:Ct("p-2 rounded bg-slate-950/50",t.color),children:t.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-medium text-slate-200",children:t.label}),e.jsx("div",{className:"text-[10px] text-slate-500",children:t.sub})]})]}),zd=({data:t,selected:s})=>{const n=t.shape==="hexagon";return e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx(Ge,{type:"target",position:q.Left,className:"!bg-slate-600 !w-2 !h-2 -ml-1"}),e.jsxs("div",{className:Ct("flex flex-col items-center justify-center gap-2 transition-all bg-slate-900/90 border-2 shadow-xl backdrop-blur-md",n?"w-32 h-32":"w-32 h-32 rounded-full",s?"border-primary shadow-[0_0_20px_-5px_rgba(11,202,217,0.5)]":"border-slate-700",t.active?"border-primary shadow-[0_0_20px_-5px_rgba(11,202,217,0.5)]":"",t.complete?"border-green-500 shadow-[0_0_15px_-5px_rgba(34,197,94,0.5)]":""),style:n?{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)"}:{},children:[e.jsx("div",{className:Ct("transition-colors duration-300",t.active?"text-white scale-110":"text-slate-400",t.complete?"text-green-400":""),children:t.icon}),e.jsxs("div",{className:"text-center z-10",children:[e.jsx("div",{className:"text-xs font-bold text-slate-200",children:t.label}),e.jsx("div",{className:"text-[9px] text-slate-500 uppercase tracking-wider",children:t.sub})]}),t.active&&e.jsx("div",{className:Ct("absolute inset-0 z-0 animate-ping opacity-20 bg-primary",n?"":"rounded-full"),style:n?{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)"}:{}})]}),e.jsx(Ge,{type:"source",position:q.Right,className:"!bg-slate-600 !w-2 !h-2 -mr-1"})]})},$d={vendor:Td,processing:zd},Fd=[{id:"salesforce",type:"vendor",position:{x:50,y:50},data:{label:"Salesforce",sub:"35 Assets",icon:e.jsx(ka,{className:"w-5 h-5"}),color:"text-blue-400"}},{id:"mongodb",type:"vendor",position:{x:50,y:150},data:{label:"MongoDB",sub:"28 Assets",icon:e.jsx(Ie,{className:"w-5 h-5"}),color:"text-green-500"}},{id:"supabase",type:"vendor",position:{x:50,y:250},data:{label:"Supabase",sub:"42 Assets",icon:e.jsx(or,{className:"w-5 h-5"}),color:"text-emerald-400"}},{id:"legacy",type:"vendor",position:{x:50,y:350},data:{label:"Legacy Files",sub:"12 Assets",icon:e.jsx(rr,{className:"w-5 h-5"}),color:"text-orange-400"}},{id:"aod",type:"processing",position:{x:350,y:200},data:{label:"AOD",sub:"Discovery",icon:e.jsx(St,{className:"w-6 h-6"}),shape:"circle"}},{id:"aam",type:"processing",position:{x:600,y:200},data:{label:"AAM",sub:"API Mesh",icon:e.jsx(Ma,{className:"w-6 h-6"}),shape:"circle"}},{id:"dcl",type:"processing",position:{x:850,y:200},data:{label:"DCL",sub:"Connectivity",icon:e.jsx(Rs,{className:"w-6 h-6"}),shape:"hexagon"}},{id:"agents",type:"processing",position:{x:1100,y:200},data:{label:"Agents",sub:"Intelligence",icon:e.jsx(Oa,{className:"w-6 h-6"}),shape:"circle"}}],Hd=[{id:"e-sf-aod",source:"salesforce",target:"aod",type:"dataflow",animated:!1,style:{stroke:"#334155",strokeWidth:2}},{id:"e-mg-aod",source:"mongodb",target:"aod",type:"dataflow",animated:!1,style:{stroke:"#334155",strokeWidth:2}},{id:"e-sb-aod",source:"supabase",target:"aod",type:"dataflow",animated:!1,style:{stroke:"#334155",strokeWidth:2}},{id:"e-lg-aod",source:"legacy",target:"aod",type:"dataflow",animated:!1,style:{stroke:"#334155",strokeWidth:2}},{id:"e-aod-aam",source:"aod",target:"aam",type:"dataflow",animated:!1,style:{stroke:"#334155",strokeWidth:2}},{id:"e-aam-dcl",source:"aam",target:"dcl",type:"dataflow",animated:!1,style:{stroke:"#334155",strokeWidth:2}},{id:"e-dcl-ag",source:"dcl",target:"agents",type:"dataflow",animated:!1,style:{stroke:"#334155",strokeWidth:2}}];function Bd({pipelineStep:t,pipelineState:s,onNodeClick:n}){const[r,o,i]=Ic(Fd),[a,l,c]=_c(Hd);p.useEffect(()=>{const d=s==="running",g=s==="complete";o(u=>u.map(h=>{let v=!1,x=!1;return g?x=!0:d&&(t===0&&h.id==="aod"&&(v=!0),t===1&&h.id==="aam"&&(v=!0),t===2&&h.id==="dcl"&&(v=!0),t===3&&h.id==="agents"&&(v=!0),t>0&&h.id==="aod"&&(x=!0),t>1&&h.id==="aam"&&(x=!0),t>2&&h.id==="dcl"&&(x=!0)),{...h,data:{...h.data,active:v,complete:x}}})),l(u=>u.map(h=>{let v=!1,x="#334155";return g?x="#0bcad9":d&&(t===0&&h.target==="aod"&&(v=!0,x="#0bcad9"),t===1&&h.source==="aod"&&h.target==="aam"&&(v=!0,x="#0bcad9"),t===2&&h.source==="aam"&&h.target==="dcl"&&(v=!0,x="#0bcad9"),t===3&&h.source==="dcl"&&h.target==="agents"&&(v=!0,x="#0bcad9"),t>0&&h.target==="aod"&&(x="#0bcad9"),t>1&&h.target==="aam"&&(x="#0bcad9"),t>2&&h.target==="dcl"&&(x="#0bcad9")),{...h,data:{...h.data,active:v},style:{stroke:x,strokeWidth:2}}}))},[t,s,o,l]);const m=p.useCallback((d,g)=>{n&&n(g.id,g.type||"default")},[n]);return e.jsx("div",{className:"w-full h-full bg-slate-950/50 rounded-xl border border-slate-800/50 overflow-hidden relative",children:e.jsxs(ao,{nodes:r,edges:a,onNodesChange:i,onEdgesChange:c,onNodeClick:m,nodeTypes:$d,edgeTypes:Od,fitView:!0,attributionPosition:"bottom-right",minZoom:.5,maxZoom:1.5,defaultEdgeOptions:{type:"dataflow",markerEnd:{type:Mt.ArrowClosed,color:"#334155"}},children:[e.jsx(Gc,{color:"#1e293b",gap:20,size:1}),e.jsx($c,{className:"bg-slate-800 border-slate-700 text-slate-200"})]})})}function Wd(){const[t,s]=p.useState(1),[n,r]=p.useState(!1),o=()=>{s(1),r(!0)},i=()=>{t<4?s(g=>g+1):r(!1)},a=()=>{r(!1)},l=()=>{t<4&&s(g=>g+1)},c=()=>{t>1&&s(g=>g-1)},m=g=>{s(g),r(!1)},d=Di(hr);return e.jsxs("div",{className:"flex flex-col h-screen bg-slate-950 text-white",style:{fontFamily:"Quicksand, sans-serif"},children:[e.jsx(Vd,{currentStage:t,isRunningPipeline:n}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-2/3 border-r border-slate-800 p-8 bg-slate-950 overflow-hidden",children:e.jsx(Gd,{currentStage:t,isRunningPipeline:n})}),e.jsx("div",{className:"w-1/3 p-8 bg-slate-900 overflow-auto",children:e.jsx(qd,{currentStage:t,totalCounts:d})})]}),e.jsx("div",{className:"bg-slate-900 border-t border-slate-800 px-6 py-6",children:e.jsx(Xd,{currentStage:t,onStageClick:m,onBack:c,onNext:l,onRunFullPipeline:o,onContinuePipeline:i,onEndDemo:a,isRunningPipeline:n})})]})}function Vd({currentStage:t,isRunningPipeline:s}){return e.jsxs("div",{className:"bg-slate-900 border-b border-slate-800 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"AutonomOS – Discovery & Mesh Demo"}),e.jsx("span",{className:"px-3 py-1 bg-cyan-500/20 border border-cyan-500/30 rounded-full text-xs text-cyan-400 font-semibold",children:"Demo Tenant"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-3 py-1 bg-green-500/20 border border-green-500/30 rounded-full text-xs text-green-400",children:["Stage ",t," of 4"]}),s&&e.jsxs("span",{className:"px-3 py-1 bg-blue-500/20 border border-blue-500/30 rounded-full text-xs text-blue-400 flex items-center gap-2",children:[e.jsx(_t,{className:"w-3 h-3 animate-pulse"}),"Running Pipeline"]})]})]})}function Gd({currentStage:t,isRunningPipeline:s}){const n=t-1,r=s?"running":"idle";return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-8",children:"Pipeline Graph"}),e.jsx("div",{className:"flex-1",children:e.jsx(Bd,{pipelineStep:n,pipelineState:r,onNodeClick:o=>console.log("Clicked:",o)})})]})}function qd({currentStage:t,totalCounts:s}){return t===1?e.jsx(Ud,{totalCounts:s}):t===2?e.jsx(Yd,{}):t===3?e.jsx(Zd,{}):e.jsx(Kd,{})}function Ud({totalCounts:t}){const s=hr.slice(0,10),n=o=>o==="UNKNOWN"?"High":o==="PARKED"?"Medium":"Low",r=o=>o==="High"?"text-red-400":o==="Medium"?"text-orange-400":"text-green-400";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2 break-words",children:"AOD Discovery — Assets & Risk"}),e.jsx("p",{className:"text-xs text-slate-400 break-words",children:"Automatically discovered assets across the demo tenant"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:t.total}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Assets"})]}),e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold text-green-400",children:t.ready}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Ready"})]}),e.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold text-orange-400",children:t.parked}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Parked"})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold text-red-400",children:t.shadowIT}),e.jsx("div",{className:"text-xs text-slate-400 mt-1 break-words",children:"Shadow / High-Risk"})]})]}),e.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-max",children:[e.jsx("thead",{className:"bg-slate-900 border-b border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-2 py-2 text-[10px] font-semibold text-slate-400 uppercase",children:"Asset"}),e.jsx("th",{className:"text-left px-2 py-2 text-[10px] font-semibold text-slate-400 uppercase",children:"Vendor"}),e.jsx("th",{className:"text-left px-2 py-2 text-[10px] font-semibold text-slate-400 uppercase",children:"Kind"}),e.jsx("th",{className:"text-left px-2 py-2 text-[10px] font-semibold text-slate-400 uppercase",children:"Env"}),e.jsx("th",{className:"text-left px-2 py-2 text-[10px] font-semibold text-slate-400 uppercase",children:"Risk"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:s.map(o=>{const i=n(o.state),a=gr(o.vendor);return e.jsxs("tr",{className:"hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-2 py-2 text-xs text-white truncate max-w-[120px]",title:o.name,children:o.name}),e.jsx("td",{className:"px-2 py-2 text-xs",children:e.jsx("span",{style:{color:Bt(o.vendor)},children:a})}),e.jsx("td",{className:"px-2 py-2 text-xs text-slate-300 capitalize",children:o.kind}),e.jsx("td",{className:"px-2 py-2 text-xs text-slate-300 uppercase",children:o.environment}),e.jsx("td",{className:`px-2 py-2 text-xs font-semibold ${r(i)}`,children:i})]},o.id)})})]})}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"text-xs text-slate-400 break-words",children:[e.jsx("span",{className:"font-semibold text-orange-400",children:"Normally:"})," spreadsheets, interviews, and guesswork to find what's running."]}),e.jsxs("div",{className:"text-xs text-cyan-400 break-words",children:[e.jsx("span",{className:"font-semibold",children:"Here:"})," AOS uses log & config telemetry and AI classifiers to discover and risk-score assets."]})]})]})}function Yd(){const t=[{vendor:"Salesforce",color:"#0BCAD9",auth:"OAuth2, scopes: api, refresh_token, offline_access",contract:"API v59.0, endpoints: /sobjects/Account, /sobjects/Opportunity",details:"Rate limits: 100 req/s, exponential backoff with jitter"},{vendor:"MongoDB",color:"#10B981",auth:"TLS SRV, vault credentials",contract:"Collections: users, events, read preference: secondaryPreferred",details:"Connection pooling: max 20, min 5, timeout 30s"},{vendor:"Supabase",color:"#A855F7",auth:"Postgres URL, schema: public, RLS awareness",contract:"Connection mode: PgBouncer session, max 10 connections",details:"Tables: customers, invoices, usage_events"},{vendor:"Legacy Files",color:"#F97316",auth:"S3 bucket, IAM role credentials, SSE-S3 encryption",contract:"File pattern: *.csv, schedule: daily at 02:00 UTC",details:"Buckets: customer-exports, legacy-backups, retention: 90 days"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2 break-words",children:"AAM Connections — Connectors"}),e.jsx("p",{className:"text-xs text-slate-400 break-words",children:"Adaptive API Mesh connector configurations"})]}),e.jsx("div",{className:"space-y-3",children:t.map(s=>e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-3",children:[e.jsx("h3",{className:"text-sm font-bold mb-2 break-words",style:{color:s.color},children:s.vendor}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400 font-semibold",children:"Auth:"}),e.jsx("div",{className:"text-slate-300 break-words",children:s.auth})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400 font-semibold",children:"Contract:"}),e.jsx("div",{className:"text-slate-300 break-words",children:s.contract})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400 font-semibold",children:"Details:"}),e.jsx("div",{className:"text-slate-300 break-words",children:s.details})]})]})]},s.vendor))}),e.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-3",children:e.jsxs("div",{className:"text-xs text-cyan-300 break-words",children:[e.jsx("span",{className:"font-semibold",children:"How AOS configured this:"})," AI over config corpus chooses auth flows, scopes, timeouts. No manual YAML."]})})]})}function Zd(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-2",children:["DCL Mapping — Unified ",e.jsx("code",{className:"text-cyan-400",children:"customer_360"})," Entity"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Schema mappings from Salesforce, MongoDB, Supabase, and Legacy Files"})]}),e.jsx("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-lg p-4 text-sm text-purple-300",children:"DCL builds a unified customer_360 entity from Salesforce, MongoDB, Supabase, and Legacy Files."}),e.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900 border-b border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase",children:"Canonical Field"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase",children:"Type"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase",children:"Sources"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:Mi.map(t=>e.jsxs("tr",{className:"hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("code",{className:"text-cyan-400 font-mono text-sm",children:t.canonicalField})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-slate-700 text-slate-300",children:t.type})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:t.sources.map((s,n)=>e.jsxs("div",{className:"text-xs px-2 py-1 rounded border flex items-center gap-1",style:{backgroundColor:`${Bt(s.vendor)}15`,borderColor:`${Bt(s.vendor)}40`,color:Bt(s.vendor)},children:[e.jsx("span",{className:"font-semibold",children:gr(s.vendor)}),e.jsx("span",{className:"text-slate-400",children:"·"}),e.jsx("code",{className:"font-mono",children:s.fieldPath}),e.jsx("span",{className:"text-slate-400",children:"·"}),e.jsxs("span",{className:"font-bold",children:[Math.round(s.confidence*100),"%"]})]},n))})})]},t.canonicalField))})]})}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"text-sm text-slate-400",children:[e.jsx("span",{className:"font-semibold text-orange-400",children:"Normally:"})," weeks of debating IDs and joins across CRM, billing, events, and legacy exports."]}),e.jsxs("div",{className:"text-sm text-cyan-400",children:[e.jsx("span",{className:"font-semibold",children:"Here:"})," ontologies, naming heuristics, and data profiling propose canonical fields and joins with confidence scores."]})]})]})}function Kd(){const t=["Resolved question to customer_360 unified entity.","Selected fields: customer_id, arr, last_activity_at, churn_flag, risk_score.","Fetched data via AAM from Salesforce, MongoDB, Supabase, Legacy Files.","Applied enterprise policy HIGH_ARR_HIGH_RISK_SERVICES."],s=[{service:"Enterprise Platform API",arr:"$2.4M",riskScore:87,reason:"High error rate (12%), declining engagement, overdue invoices"},{service:"Analytics Dashboard Service",arr:"$1.8M",riskScore:74,reason:"Churn flag active, 45-day inactivity, support ticket spike"},{service:"Global Commerce Platform",arr:"$3.1M",riskScore:92,reason:"Critical SLA breaches, payment delays, exec escalation"},{service:"Mobile SDK Integration",arr:"$1.2M",riskScore:68,reason:"Usage decline 40%, feature adoption low, renewal at risk"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Agent Execution — Query Plan & Result Trace"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Natural language query executed over unified customer_360 entity"})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase font-semibold mb-2",children:"User Question:"}),e.jsx("div",{className:"text-sm text-white italic",children:'"Show risky customer-facing services over $1M ARR across Salesforce, MongoDB, Supabase, and Legacy Files."'})]}),e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-slate-400 uppercase font-semibold mb-3",children:"Execution Trace:"}),e.jsx("div",{className:"space-y-2",children:t.map((n,r)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Vt,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"text-sm text-slate-300",children:n})]},r))})]}),e.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900 border-b border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase",children:"Service/Customer"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase",children:"ARR"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase",children:"Risk Score"}),e.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-400 uppercase",children:"Why Flagged"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:s.map((n,r)=>e.jsxs("tr",{className:"hover:bg-slate-700/50",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-white font-medium",children:n.service}),e.jsx("td",{className:"px-4 py-3 text-sm text-green-400 font-semibold",children:n.arr}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`text-sm font-bold ${n.riskScore>=80?"text-red-400":"text-orange-400"}`,children:n.riskScore})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-300",children:n.reason})]},r))})]})}),e.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/30 rounded-lg p-4",children:e.jsxs("div",{className:"text-sm text-cyan-300",children:[e.jsx("span",{className:"font-semibold",children:"How this works:"})," Agent executes over DCL's unified view, not raw tables; no manual SQL or joins."]})})]})}function Xd({currentStage:t,onStageClick:s,onBack:n,onNext:r,onRunFullPipeline:o,onContinuePipeline:i,onEndDemo:a,isRunningPipeline:l}){const c=[{num:1,label:"AOD Discovery"},{num:2,label:"AAM Connections"},{num:3,label:"DCL Mapping"},{num:4,label:"Agent Execution"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center gap-4",children:c.map((m,d)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:()=>s(m.num),disabled:l,className:`flex flex-col items-center gap-2 px-6 py-3 rounded-lg transition-all ${t===m.num?"bg-cyan-500/20 border-2 border-cyan-500":"bg-slate-800 border-2 border-slate-700 hover:border-slate-600"} ${l?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${t===m.num?"bg-cyan-500 text-white":t>m.num?"bg-green-500 text-white":"bg-slate-700 text-slate-400"}`,children:t>m.num?"✓":m.num}),e.jsx("div",{className:`text-sm font-semibold ${t===m.num?"text-cyan-400":"text-slate-400"}`,children:m.label})]}),d<c.length-1&&e.jsx("div",{className:`w-12 h-0.5 mx-2 ${t>m.num?"bg-green-500":"bg-slate-700"}`})]},m.num))}),l?e.jsx("div",{className:"bg-gradient-to-r from-cyan-500/10 to-purple-500/10 border border-cyan-500/30 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(_t,{className:"w-5 h-5 text-cyan-400 animate-pulse"}),e.jsxs("h3",{className:"text-lg font-bold text-white",children:["Pipeline Running - Stage ",t," of 4"]})]}),e.jsx("p",{className:"text-sm text-slate-400",children:t<4?"Review the information on the right panel. Click 'Continue' to proceed to the next stage.":"Demo complete! Review the final results or restart the pipeline."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:a,className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors font-semibold",children:"End Demo"}),t<4?e.jsxs("button",{onClick:i,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors font-semibold flex items-center gap-2",children:["Continue to Next Stage",e.jsx(Gt,{className:"w-4 h-4"})]}):e.jsxs("button",{onClick:o,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors font-semibold flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),"Restart Pipeline"]})]})]})}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:n,disabled:t===1,className:"px-6 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg transition-colors font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ba,{className:"w-4 h-4"}),"Back"]}),e.jsxs("button",{onClick:o,className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors font-semibold flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),"Run Full Pipeline"]}),e.jsxs("button",{onClick:r,disabled:t===4,className:"px-6 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg transition-colors font-semibold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",e.jsx(Gt,{className:"w-4 h-4"})]})]})]})}function Qd({isOpen:t,onClose:s,initialMode:n="login"}){const[r,o]=p.useState(n==="signup"?"register":"login"),[i,a]=p.useState(!1),[l,c]=p.useState(""),[m,d]=p.useState(!1),[g,u]=p.useState(""),[h,v]=p.useState(""),[x,w]=p.useState(""),[y,f]=p.useState(""),[j,k]=p.useState(""),{login:_,register:M}=dr(),R=p.useRef(null);if(p.useEffect(()=>{t&&R.current&&setTimeout(()=>R.current?.focus(),100)},[t,r]),p.useEffect(()=>{c("")},[r]),!t)return null;const D=async O=>{O.preventDefault(),c(""),a(!0);try{await _(g,h),s()}catch($){c($.message||"Invalid credentials")}finally{a(!1)}},I=async O=>{O.preventDefault(),c(""),a(!0);try{await M(x,y,j),s()}catch($){c($.message||"Registration failed")}finally{a(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm animate-fadeIn",children:e.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-2xl shadow-2xl w-full max-w-md mx-4 animate-slideUp",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"A"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Welcome to autonomOS"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Sign in to continue"})]})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white transition-colors",disabled:i,children:e.jsx(Ts,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>o("login"),className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${r==="login"?"bg-cyan-600 text-white shadow-lg shadow-cyan-600/30":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,disabled:i,children:"Login"}),e.jsx("button",{onClick:()=>o("register"),className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${r==="register"?"bg-cyan-600 text-white shadow-lg shadow-cyan-600/30":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,disabled:i,children:"Register"})]}),l&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-400",children:l})}),r==="login"?e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("input",{ref:R,type:"email",value:g,onChange:O=>u(O.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors",placeholder:"your@email.com",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",value:h,onChange:O=>v(O.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors pr-12",placeholder:"••••••••",required:!0,disabled:i}),e.jsx("button",{type:"button",onClick:()=>d(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",disabled:i,children:m?e.jsx(an,{className:"w-5 h-5"}):e.jsx(qt,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-semibold rounded-lg transition-all shadow-lg shadow-cyan-600/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5 animate-spin"}),"Logging in..."]}):"Log In"})]}):e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),e.jsx("input",{ref:R,type:"text",value:x,onChange:O=>w(O.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors",placeholder:"Your Name",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:y,onChange:O=>f(O.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors",placeholder:"your@email.com",required:!0,disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",value:j,onChange:O=>k(O.target.value),className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-cyan-500 transition-colors pr-12",placeholder:"••••••••",required:!0,minLength:6,disabled:i}),e.jsx("button",{type:"button",onClick:()=>d(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition-colors",disabled:i,children:m?e.jsx(an,{className:"w-5 h-5"}):e.jsx(qt,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-semibold rounded-lg transition-all shadow-lg shadow-cyan-600/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-5 h-5 animate-spin"}),"Creating account..."]}):"Create Account"})]})]})})})}function Jd(){const t=()=>{const g=window.location.pathname.slice(1);return["architecture","control-center","discover","connect","ontology","orchestration","faq","demo-discovery"].includes(g)?g:"architecture"},[s,n]=p.useState(t()),[r,o]=p.useState(!1),[i,a]=p.useState("login"),{legacyMode:l}=ua();p.useEffect(()=>{const g=u=>{const v=u.detail?.page;v&&(n(v),window.history.pushState({},"",`/${v}`))};return window.addEventListener("navigate",g),()=>{window.removeEventListener("navigate",g)}},[]),p.useEffect(()=>{const g=()=>{const u=window.location.pathname.slice(1);["architecture","control-center","discover","connect","ontology","orchestration","faq","demo-discovery"].includes(u)&&n(u)};return window.addEventListener("popstate",g),()=>{window.removeEventListener("popstate",g)}},[]);const c=g=>{a(g),o(!0)},m=()=>{o(!1)},d=()=>{switch(s){case"architecture":return e.jsx(dn,{});case"control-center":return e.jsx(ei,{});case"discover":return e.jsx(si,{});case"connect":return e.jsx(ri,{});case"ontology":return e.jsx(vi,{});case"orchestration":return e.jsx(Ai,{});case"faq":return e.jsx(Ei,{});case"demo-discovery":return e.jsx(Wd,{});default:return e.jsx(dn,{})}};return e.jsxs(e.Fragment,{children:[e.jsx(Wa,{currentPage:s,onNavigate:n,onAuthOpen:c,children:d()}),r&&e.jsx(Qd,{isOpen:r,onClose:m,initialMode:i})]})}function eu(){return e.jsx(ha,{children:e.jsx(da,{children:e.jsx(Jd,{})})})}const Ft={sources:[],agents:[],devMode:!1};function tu(){console.log("[DCL Bridge] Initializing..."),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("[DCL Bridge] DOM loaded, setting up DCL controls"),Zn()}):(console.log("[DCL Bridge] DOM already loaded, setting up DCL controls"),Zn())}function Zn(){window.dclConnect=async function(t,s){const n=t||"dynamics,salesforce,hubspot",r=s||"revops_pilot,finops_pilot";console.log(`[DCL] Connecting sources: ${n}, agents: ${r}`);const o=encodeURIComponent(n),i=encodeURIComponent(r);try{const l=await(await fetch(`/dcl/connect?sources=${o}&agents=${i}`)).json();return console.log("[DCL Connect Success]",l),l}catch(a){throw console.error("[DCL Connect Error]",a),a}},window.dclReset=async function(){console.log("[DCL] ⚠️ DEPRECATED: dclReset() is deprecated. Reset functionality removed - calling dclConnect() instead."),console.log("[DCL] Backend /dcl/connect is now idempotent and handles state clearing automatically.");try{const t=Ft.sources.length>0?Ft.sources.join(","):"dynamics,salesforce,hubspot",s=Ft.agents.length>0?Ft.agents.join(","):"revops_pilot,finops_pilot";return await window.dclConnect(t,s)}catch(t){throw console.error("[DCL] Error in deprecated dclReset():",t),t}},window.dclToggleDevMode=async function(){console.log("[DCL] Toggling dev mode...");try{const s=await(await fetch("/dcl/toggle_dev_mode")).json();return console.log("[DCL Toggle Dev Mode Success]",s),s}catch(t){throw console.error("[DCL Toggle Dev Mode Error]",t),t}},console.log("[DCL Bridge] Ready! Use:"),console.log("  - window.dclConnect() to connect sources"),console.log("  - window.dclReset() [DEPRECATED] calls dclConnect() - use dclConnect() instead"),console.log("  - window.dclToggleDevMode() to toggle dev mode"),console.log("  Note: State updates now use WebSocket instead of polling")}const su="2025-10-25T12:10:00Z";window.__BUILD_ID__=su;ca.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(eu,{})}));tu();
