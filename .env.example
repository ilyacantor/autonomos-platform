# AutonomOS Platform Configuration
# Copy this file to .env and configure with your actual values

# ═══════════════════════════════════════════════════════════════════
# DATABASE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
POSTGRES_URL=postgresql://user:password@localhost:5432/autonomos
DATABASE_URL=postgresql://user:password@localhost:5432/autonomos
POSTGRES_USER=your_db_user
POSTGRES_PASSWORD=your_db_password
POSTGRES_DB=autonomos

# ═══════════════════════════════════════════════════════════════════
# REDIS CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# ═══════════════════════════════════════════════════════════════════
# JWT AUTHENTICATION
# ═══════════════════════════════════════════════════════════════════
JWT_SECRET=your-secret-key-min-32-characters-long
JWT_SECRET_KEY=your-secret-key-min-32-characters-long
JWT_ISSUER=autonomos.dev
JWT_AUDIENCE=aos.agents
JWT_EXPIRE_MINUTES=30
SECRET_KEY=your-secret-key-min-32-characters-long

# ═══════════════════════════════════════════════════════════════════
# API KEYS - REQUIRED FOR CORE FUNCTIONALITY
# ═══════════════════════════════════════════════════════════════════
# Gemini API (Google) - REQUIRED for DCL semantic processing
GEMINI_API_KEY=your-gemini-api-key

# OpenAI API - REQUIRED for DCL embeddings and some NLQ functions
OPENAI_API_KEY=your-openai-api-key

# Pinecone API - REQUIRED for vector similarity search
PINECONE_API_KEY=your-pinecone-api-key

# General API authentication key
API_KEY=your-api-key

# ═══════════════════════════════════════════════════════════════════
# SUPABASE CONFIGURATION (if using Supabase)
# ═══════════════════════════════════════════════════════════════════
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_KEY=your-supabase-service-key
SUPABASE_DB_URL=postgresql://postgres:your-password@db.xxx.supabase.co:5432/postgres
SUPABASE_SCHEMA=public

# ═══════════════════════════════════════════════════════════════════
# FEATURE FLAGS
# ═══════════════════════════════════════════════════════════════════
# Enable file-based source connector for CSV ingestion
FEATURE_USE_FILESOURCE=true

# Enable automatic drift repair (>=0.85 confidence threshold)
FEATURE_DRIFT_AUTOFIX=false

# Enable AAM monitoring dashboard polling
MONITOR_POLLING=false

# ═══════════════════════════════════════════════════════════════════
# GATEWAY CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
# Rate limiting: requests per minute per tenant
RATE_LIMIT_RPM=60

# Rate limiting: burst allowance
RATE_LIMIT_BURST=10

# Idempotency key cache duration (minutes)
IDEMPOTENCY_CACHE_MINUTES=10

# Build SHA for health endpoint (auto-generated in CI/CD)
BUILD_SHA=local-dev

# ═══════════════════════════════════════════════════════════════════
# AAM SERVICES CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
# Orchestrator service
ORCHESTRATOR_PORT=8001
ORCHESTRATOR_URL=http://localhost:8001

# Drift Repair Agent
DRIFT_REPAIR_PORT=8003
DRIFT_REPAIR_URL=http://localhost:8003

# Schema Observer
SCHEMA_OBSERVER_PORT=8004
SCHEMA_OBSERVER_URL=http://localhost:8004

# RAG Engine
RAG_ENGINE_PORT=8005
RAG_ENGINE_URL=http://localhost:8005

# Confidence threshold for auto-repair (0.0-1.0)
DRIFT_REPAIR_CONFIDENCE_THRESHOLD=0.85

# AAM Batch Processing
AAM_BATCH_CHUNK_SIZE=200
AAM_MAX_SAMPLES_PER_TABLE=8
AAM_REDIS_STREAM_MAXLEN=1000
AAM_IDEMPOTENCY_TTL=86400
AAM_CONNECTORS_SYNC=true

# ═══════════════════════════════════════════════════════════════════
# AIRBYTE CONFIGURATION (optional)
# ═══════════════════════════════════════════════════════════════════
AIRBYTE_API_URL=http://localhost:8000/api/v1
AIRBYTE_WORKSPACE_ID=your-workspace-id

# ═══════════════════════════════════════════════════════════════════
# EXTERNAL INTEGRATIONS
# ═══════════════════════════════════════════════════════════════════
# Slack webhook for notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# CORS allowed origins
ALLOWED_WEB_ORIGIN=http://localhost:3000

# ═══════════════════════════════════════════════════════════════════
# AAM CONNECTOR CONFIGURATION - MongoDB (optional)
# ═══════════════════════════════════════════════════════════════════
# MongoDB connection URI (Atlas or self-hosted)
MONGODB_URI=mongodb+srv://user:password@cluster.mongodb.net/dbname?retryWrites=true&w=majority
MONGODB_DB=autonomos

# ═══════════════════════════════════════════════════════════════════
# AAM CONNECTOR CONFIGURATION - Salesforce (optional)
# ═══════════════════════════════════════════════════════════════════
SALESFORCE_INSTANCE_URL=https://login.salesforce.com
SALESFORCE_CLIENT_ID=your-client-id
SALESFORCE_CLIENT_SECRET=your-client-secret
SALESFORCE_REFRESH_TOKEN=your-refresh-token
SALESFORCE_ACCESS_TOKEN=your-access-token

# ═══════════════════════════════════════════════════════════════════
# MULTI-TENANT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
# Demo tenant ID for testing
TENANT_ID=default
TENANT_ID_DEMO=demo-tenant
DEMO_TENANT_UUID=f8ab4417-86a1-4dd2-a049-ea423063850e

# ═══════════════════════════════════════════════════════════════════
# DCL ENGINE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
# DuckDB registry path
DCL_REGISTRY_PATH=./app/dcl_engine/registry.duckdb

# Enable DCL dev mode
DCL_DEV_MODE=false

# Encryption key for DCL data
ENCRYPTION_KEY=dcl-default-key-2024

# ═══════════════════════════════════════════════════════════════════
# LOGGING CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
LOG_LEVEL=INFO
LOG_FORMAT=json

# ═══════════════════════════════════════════════════════════════════
# EVENT STREAMING CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
# Enable Server-Sent Events (SSE) for live flow visualization
EVENT_STREAM_ENABLED=true

# Heartbeat interval for SSE connections (milliseconds)
EVENT_STREAM_HEARTBEAT_MS=15000

# ═══════════════════════════════════════════════════════════════════
# DEPLOYMENT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
# Environment (development, staging, production)
ENVIRONMENT=development

# Server port
PORT=5000

# Disable automatic database migrations on startup
DISABLE_AUTO_MIGRATIONS=false

# ═══════════════════════════════════════════════════════════════════
# DEVELOPMENT & DEBUGGING
# ═══════════════════════════════════════════════════════════════════
# Enable debug mode (DO NOT use in production)
DEBUG=false
DEV_DEBUG=false

# Enable verbose logging
VERBOSE=false

# Node environment (for some components)
NODE_ENV=production

# AOS Demo mode
AOS_DEMO_MODE=false

# Drift fingerprint TTL (seconds)
DRIFT_FINGERPRINT_TTL=86400

# ═══════════════════════════════════════════════════════════════════
# REPLIT CONFIGURATION (auto-set by Replit)
# ═══════════════════════════════════════════════════════════════════
# REPL_SLUG=autonomos-platform
# REPL_OWNER=your-username
